function _inherits(c,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(e&&e.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),e&&_setPrototypeOf(c,e)}function _setPrototypeOf(c,e){return(_setPrototypeOf=Object.setPrototypeOf||function(c,e){return c.__proto__=e,c})(c,e)}function _createSuper(c){var e=_isNativeReflectConstruct();return function(){var t,i=_getPrototypeOf(c);if(e){var r=_getPrototypeOf(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(c,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(c):e}function _assertThisInitialized(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(c){return!1}}function _getPrototypeOf(c){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)})(c)}function _classCallCheck(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}function _createClass(c,e,t){return e&&_defineProperties(c.prototype,e),t&&_defineProperties(c,t),c}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4gke":function(c,e,t){"use strict";t.r(e),t.d(e,"MiningCompanyModule",(function(){return Ze}));var i,r,n,a=t("ofXK"),o=t("3Pt+"),s=t("ZOsW"),d=t("LqlI"),l=t("ienR"),u=t("6No5"),b=t("fXoL"),m=new b.w("WindowToken","undefined"!=typeof window&&window.document?{providedIn:"root",factory:function(){return window}}:void 0),p=t("XNiG"),v=((n=function(){function c(e,t){_classCallCheck(this,c),this.document=e,this.window=t,this.copySubject=new p.a,this.copyResponse$=this.copySubject.asObservable(),this.config={}}return _createClass(c,[{key:"configure",value:function(c){this.config=c}},{key:"copy",value:function(c){if(!this.isSupported||!c)return this.pushCopyResponse({isSuccess:!1,content:c});var e=this.copyFromContent(c);return this.pushCopyResponse(e?{content:c,isSuccess:e}:{isSuccess:!1,content:c})}},{key:"isTargetValid",value:function(c){if(c instanceof HTMLInputElement||c instanceof HTMLTextAreaElement){if(c.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}},{key:"copyFromInputElement",value:function(c){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{this.selectTarget(c);var t=this.copyText();return this.clearSelection(e?c:void 0,this.window),t&&this.isCopySuccessInIE11()}catch(i){return!1}}},{key:"isCopySuccessInIE11",value:function(){var c=this.window.clipboardData;return!(c&&c.getData&&!c.getData("Text"))}},{key:"copyFromContent",value:function(c){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.document.body;if(this.tempTextArea&&!e.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{e.appendChild(this.tempTextArea)}catch(i){throw new Error("Container should be a Dom element")}}this.tempTextArea.value=c;var t=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),t}},{key:"destroy",value:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.document.body;this.tempTextArea&&(c.removeChild(this.tempTextArea),this.tempTextArea=void 0)}},{key:"selectTarget",value:function(c){return c.select(),c.setSelectionRange(0,c.value.length),c.value.length}},{key:"copyText",value:function(){return this.document.execCommand("copy")}},{key:"clearSelection",value:function(c,e){var t;c&&c.focus(),null===(t=e.getSelection())||void 0===t||t.removeAllRanges()}},{key:"createTempTextArea",value:function(c,e){var t,i="rtl"===c.documentElement.getAttribute("dir");return(t=c.createElement("textarea")).style.fontSize="12pt",t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute",t.style[i?"right":"left"]="-9999px",t.style.top=(e.pageYOffset||c.documentElement.scrollTop)+"px",t.setAttribute("readonly",""),t}},{key:"pushCopyResponse",value:function(c){this.copySubject.next(c)}},{key:"pushCopyReponse",value:function(c){this.pushCopyResponse(c)}},{key:"isSupported",get:function(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}}]),c}()).\u0275fac=function(c){return new(c||n)(b.gc(a.d),b.gc(m,8))},n.\u0275prov=Object(b.Sb)({factory:function(){return new n(Object(b.gc)(a.d),Object(b.gc)(m,8))},token:n,providedIn:"root"}),n),_=((r=function(){function c(e){_classCallCheck(this,c),this.clipboardSrv=e,this.cbOnSuccess=new b.q,this.cbOnError=new b.q}return _createClass(c,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.clipboardSrv.destroy(this.container)}},{key:"onClick",value:function(c){this.clipboardSrv.isSupported?this.targetElm&&this.clipboardSrv.isTargetValid(this.targetElm)?this.handleResult(this.clipboardSrv.copyFromInputElement(this.targetElm),this.targetElm.value,c):this.cbContent&&this.handleResult(this.clipboardSrv.copyFromContent(this.cbContent,this.container),this.cbContent,c):this.handleResult(!1,void 0,c)}},{key:"handleResult",value:function(c,e,t){var i={isSuccess:c,event:t};c?(i=Object.assign(i,{content:e,successMessage:this.cbSuccessMsg}),this.cbOnSuccess.emit(i)):this.cbOnError.emit(i),this.clipboardSrv.pushCopyResponse(i)}}]),c}()).\u0275fac=function(c){return new(c||r)(b.Wb(v))},r.\u0275dir=b.Rb({type:r,selectors:[["","ngxClipboard",""]],hostBindings:function(c,e){1&c&&b.kc("click",(function(c){return e.onClick(c.target)}))},inputs:{targetElm:["ngxClipboard","targetElm"],container:"container",cbContent:"cbContent",cbSuccessMsg:"cbSuccessMsg"},outputs:{cbOnSuccess:"cbOnSuccess",cbOnError:"cbOnError"}}),r),f=((i=function c(){_classCallCheck(this,c)}).\u0275mod=b.Ub({type:i}),i.\u0275inj=b.Tb({factory:function(c){return new(c||i)},imports:[[a.c]]}),i),h=t("tyNb"),g=t("LvDl"),y=t.n(g),L=t("g/JT"),k=t("fwOm"),C=t("wgH9"),S=t("IYfF"),K=t("a+IK"),N=t("5eHb");function E(c,e){1&c&&(b.cc(0,"small",42),b.Lc(1," Name is required "),b.bc())}function I(c,e){1&c&&(b.cc(0,"small",42),b.Lc(1," Business Registration No. is required "),b.bc())}function M(c,e){1&c&&(b.cc(0,"small",42),b.Lc(1," Mining License No. is required "),b.bc())}function w(c,e){1&c&&(b.cc(0,"small",42),b.Lc(1," Contact No. is required "),b.bc())}function O(c,e){1&c&&(b.cc(0,"small",42),b.Lc(1," Address 1 is required "),b.bc())}function A(c,e){1&c&&(b.cc(0,"small",42),b.Lc(1," Postcode is required "),b.bc())}function D(c,e){1&c&&(b.cc(0,"small",42),b.Lc(1," City is required "),b.bc())}function P(c,e){1&c&&(b.cc(0,"small",42),b.Lc(1," State is required "),b.bc())}function x(c,e){1&c&&(b.cc(0,"small",42),b.Lc(1," Country is required "),b.bc())}var T=function(c){return{"is-invalid":c}},R=function(){return{containerClass:"theme-blue",dateInputFormat:"YYYY-MM-DD"}};function q(c,e){if(1&c){var t=b.dc();b.cc(0,"div",1),b.cc(1,"form",7),b.kc("ngSubmit",(function(){return b.Dc(t),b.mc().onSubmit()})),b.cc(2,"div",8),b.cc(3,"div",9),b.cc(4,"div",10),b.cc(5,"label",11),b.Lc(6,"Name\xa0"),b.cc(7,"span",12),b.Lc(8,"*"),b.bc(),b.bc(),b.cc(9,"div",13),b.Xb(10,"input",14),b.Jc(11,E,2,0,"small",15),b.bc(),b.bc(),b.cc(12,"div",10),b.cc(13,"label",11),b.Lc(14,"Business Registration No.\xa0"),b.cc(15,"span",12),b.Lc(16,"*"),b.bc(),b.bc(),b.cc(17,"div",13),b.Xb(18,"input",16),b.Jc(19,I,2,0,"small",15),b.bc(),b.bc(),b.cc(20,"div",10),b.cc(21,"label",11),b.Lc(22,"Mining License No.\xa0"),b.cc(23,"span",12),b.Lc(24,"*"),b.bc(),b.bc(),b.cc(25,"div",13),b.Xb(26,"input",17),b.Jc(27,M,2,0,"small",15),b.bc(),b.bc(),b.cc(28,"div",10),b.cc(29,"label",11),b.Lc(30,"License Expiry\xa0"),b.cc(31,"span",12),b.Lc(32,"*"),b.bc(),b.bc(),b.cc(33,"div",18),b.cc(34,"div",19),b.Xb(35,"input",20,21),b.cc(37,"div",22),b.cc(38,"button",23),b.kc("click",(function(){return b.Dc(t),b.Bc(36).show()})),b.Xb(39,"i",24),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(40,"div",10),b.cc(41,"label",11),b.Lc(42,"Contact No.\xa0"),b.cc(43,"span",12),b.Lc(44,"*"),b.bc(),b.bc(),b.cc(45,"div",13),b.Xb(46,"input",25),b.Jc(47,w,2,0,"small",15),b.bc(),b.bc(),b.cc(48,"div",10),b.cc(49,"label",11),b.Lc(50,"Email"),b.bc(),b.cc(51,"div",13),b.Xb(52,"input",26),b.bc(),b.bc(),b.cc(53,"div",10),b.cc(54,"label",11),b.Lc(55,"Fax No."),b.bc(),b.cc(56,"div",13),b.Xb(57,"input",27),b.bc(),b.bc(),b.cc(58,"div",10),b.cc(59,"label",11),b.Lc(60,"Address\xa0"),b.cc(61,"span",12),b.Lc(62,"*"),b.bc(),b.bc(),b.cc(63,"div",13),b.Xb(64,"input",28),b.Jc(65,O,2,0,"small",15),b.bc(),b.bc(),b.cc(66,"div",10),b.cc(67,"div",29),b.Xb(68,"input",30),b.bc(),b.bc(),b.cc(69,"div",10),b.cc(70,"div",29),b.Xb(71,"input",31),b.bc(),b.bc(),b.cc(72,"div",10),b.cc(73,"label",11),b.Lc(74,"Postcode\xa0"),b.cc(75,"span",12),b.Lc(76,"*"),b.bc(),b.bc(),b.cc(77,"div",32),b.Xb(78,"input",33),b.Jc(79,A,2,0,"small",15),b.bc(),b.cc(80,"label",34),b.Lc(81,"City\xa0"),b.cc(82,"span",12),b.Lc(83,"*"),b.bc(),b.bc(),b.cc(84,"div",35),b.Xb(85,"input",36),b.Jc(86,D,2,0,"small",15),b.bc(),b.bc(),b.cc(87,"div",10),b.cc(88,"label",11),b.Lc(89,"State\xa0"),b.cc(90,"span",12),b.Lc(91,"*"),b.bc(),b.bc(),b.cc(92,"div",32),b.Xb(93,"ng-select",37),b.Jc(94,P,2,0,"small",15),b.bc(),b.cc(95,"label",34),b.Lc(96,"Country\xa0"),b.cc(97,"span",12),b.Lc(98,"*"),b.bc(),b.bc(),b.cc(99,"div",35),b.cc(100,"ng-select",38),b.kc("change",(function(c){return b.Dc(t),b.mc().onChangeCountry(c)})),b.bc(),b.Jc(101,x,2,0,"small",15),b.bc(),b.bc(),b.bc(),b.cc(102,"div",39),b.cc(103,"button",40),b.Xb(104,"i",41),b.Lc(105," Save"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc()}if(2&c){var i=b.Bc(36),r=b.mc();b.Kb(1),b.sc("formGroup",r.mform),b.Kb(9),b.sc("ngClass",b.vc(23,T,r.invalid("name"))),b.Kb(1),b.sc("ngIf",r.invalid("name")&&r.f.name.hasError("required")),b.Kb(7),b.sc("ngClass",b.vc(25,T,r.invalid("registration_num"))),b.Kb(1),b.sc("ngIf",r.invalid("registration_num")&&r.f.registration_num.hasError("required")),b.Kb(7),b.sc("ngClass",b.vc(27,T,r.invalid("registration_num"))),b.Kb(1),b.sc("ngIf",r.invalid("mining_license_num")&&r.f.mining_license_num.hasError("required")),b.Kb(8),b.sc("bsConfig",b.uc(29,R)),b.Kb(3),b.Lb("aria-expanded",i.isOpen),b.Kb(8),b.sc("ngClass",b.vc(30,T,r.invalid("contact_no"))),b.Kb(1),b.sc("ngIf",r.invalid("contact_no")&&r.f.contact_no.hasError("required")),b.Kb(17),b.sc("ngClass",b.vc(32,T,r.invalid("addr_line_1"))),b.Kb(1),b.sc("ngIf",r.invalid("addr_line_1")&&r.f.addr_line_1.hasError("required")),b.Kb(3),b.sc("ngClass",b.vc(34,T,r.invalid("addr_line_2"))),b.Kb(3),b.sc("ngClass",b.vc(36,T,r.invalid("addr_line_3"))),b.Kb(7),b.sc("ngClass",b.vc(38,T,r.invalid("postcode"))),b.Kb(1),b.sc("ngIf",r.invalid("postcode")&&r.f.postcode.hasError("required")),b.Kb(6),b.sc("ngClass",b.vc(40,T,r.invalid("city"))),b.Kb(1),b.sc("ngIf",r.invalid("city")&&r.f.city.hasError("required")),b.Kb(7),b.sc("items",r.stateList),b.Kb(1),b.sc("ngIf",r.invalid("state_id")&&r.f.state_id.hasError("required")),b.Kb(6),b.sc("items",r.countryList),b.Kb(1),b.sc("ngIf",r.invalid("country_id")&&r.f.country_id.hasError("required"))}}var X,F=((X=function(c){_inherits(t,c);var e=_createSuper(t);function t(c,i,r,n,a){var o;return _classCallCheck(this,t),(o=e.call(this)).fb=c,o.lookupService=i,o.authService=r,o.miningCompanyService=n,o.toastr=a,o.isLoading=!1,o.data={id:""},o.countryList=[],o.stateList=[],o.createForm(),o}return _createClass(t,[{key:"ngOnInit",value:function(){var c=this.authService.loadUser();this.id=c.mining_company_id,this.load()}},{key:"createForm",value:function(){this.mform=this.fb.group({name:["",[o.p.required]],registration_num:["",[o.p.required]],mining_license_num:["",[o.p.required]],mining_license_expiry_date:[null,[o.p.required]],contact_no:["",[o.p.required]],email:[""],fax_no:[""],addr_line_1:["",[o.p.required]],addr_line_2:[""],addr_line_3:[""],postcode:["",[o.p.required]],city:["",[o.p.required]],state_id:[null,[o.p.required]],country_id:[null,[o.p.required]]})}},{key:"setForm",value:function(){var c=this,e=this.data;this.mform.patchValue({name:e.name,registration_num:e.registration_num,mining_license_num:e.mining_license_num,mining_license_expiry_date:e.mining_license_expiry_date,contact_no:e.contact_no,email:e.email,fax_no:e.fax_no,addr_line_1:e.addr_line_1,addr_line_2:e.addr_line_2,addr_line_3:e.addr_line_3,postcode:e.postcode,city:e.city,country_id:e.country.id}),this.lookupService.listStates(e.country.id).subscribe((function(t){c.stateList=t,c.mform.patchValue({state_id:e.state.id})}))}},{key:"load",value:function(){var c=this;this.isLoading=!0,this.lookupService.listCountry().subscribe((function(e){c.countryList=e,c.loadDetails()}),(function(e){c.isLoading=!1}))}},{key:"loadDetails",value:function(){var c=this;y.a.isNull(this.id)||y.a.isUndefined(this.id)?this.isLoading=!1:this.miningCompanyService.edit(this.id).subscribe((function(e){c.data=e,c.setForm()}),(function(c){}),(function(){c.isLoading=!1}))}},{key:"onSubmit",value:function(){var c=this;if(this.mform.invalid)this.mform.markAllAsTouched();else{var e=this.mform.value,t={name:e.name,registration_num:e.registration_num,mining_license_num:e.mining_license_num,mining_license_expiry_date:L.a.toDateStr(e.mining_license_expiry_date),contact_no:e.contact_no,email:e.email,fax_no:e.fax_no,addr_line_1:e.addr_line_1,addr_line_2:e.addr_line_2,addr_line_3:e.addr_line_3,postcode:e.postcode,city:e.city,state_id:e.state_id,country_id:e.country_id};this.miningCompanyService.update(this.data.id,t).subscribe((function(e){c.toastr.success("Mining Company successfully updated")}))}}},{key:"onChangeCountry",value:function(c){var e=this;this.lookupService.listStates(c.id).subscribe((function(c){e.stateList=c,e.mform.patchValue({state_id:null})}))}}]),t}(k.a)).\u0275fac=function(c){return new(c||X)(b.Wb(o.c),b.Wb(C.a),b.Wb(S.a),b.Wb(K.a),b.Wb(N.b))},X.\u0275cmp=b.Qb({type:X,selectors:[["app-company-details"]],features:[b.Hb],decls:8,vars:1,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],["class","container-fluid",4,"ngIf"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-2","col-form-label"],[1,"text-danger"],[1,"col-sm-10"],["type","text","placeholder","Name","name","name","formControlName","name",1,"form-control",3,"ngClass"],["class","badge badge-danger",4,"ngIf"],["type","text","placeholder","Business Registration No.","name","registration_num","formControlName","registration_num",1,"form-control",3,"ngClass"],["type","text","placeholder","Mining License No.","name","mining_license_num","formControlName","mining_license_num",1,"form-control",3,"ngClass"],[1,"col-sm-2","col-12"],[1,"input-group","date"],["type","text","placeholder","License Expiry","name","mining_license_expiry_date","formControlName","mining_license_expiry_date","bsDatepicker","",1,"form-control",3,"bsConfig"],["dp1","bsDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-default",3,"click"],[1,"fas","fa-calendar-alt"],["type","text","placeholder","Contact No.","name","contact_no","formControlName","contact_no",1,"form-control",3,"ngClass"],["type","text","placeholder","Email","name","email","formControlName","email",1,"form-control"],["type","text","placeholder","Fax No.","name","fax_no","formControlName","fax_no",1,"form-control"],["type","text","placeholder","Adress 1","name","addr_line_1","formControlName","addr_line_1",1,"form-control",3,"ngClass"],[1,"col-sm-10","offset-sm-2"],["type","text","placeholder","Adress 2","name","addr_line_2","formControlName","addr_line_2",1,"form-control",3,"ngClass"],["type","text","placeholder","Adress 3","name","addr_line_3","formControlName","addr_line_3",1,"form-control",3,"ngClass"],[1,"col-sm-3"],["type","text","placeholder","Postcode","name","postcode","formControlName","postcode",1,"form-control",3,"ngClass"],[1,"col-sm-1","col-form-label"],[1,"col-sm-6"],["type","text","placeholder","City","name","city","formControlName","city",1,"form-control",3,"ngClass"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","state_id","name","state_id",3,"items"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","country_id","name","country_id",3,"items","change"],[1,"card-footer"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],[1,"badge","badge-danger"]],template:function(c,e){1&c&&(b.cc(0,"section",0),b.cc(1,"div",1),b.cc(2,"div",2),b.cc(3,"div",3),b.cc(4,"h1",4),b.Lc(5,"Company Details"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(6,"section",5),b.Jc(7,q,106,42,"div",6),b.bc()),2&c&&(b.Kb(7),b.sc("ngIf",!e.isLoading))},directives:[a.m,o.q,o.k,o.e,o.a,o.j,o.d,a.k,l.b,l.a,s.a],styles:[""]}),X),J=t("C7yL");function B(c,e){1&c&&(b.cc(0,"small",17),b.Lc(1," Weight is required "),b.bc())}function W(c,e){1&c&&(b.cc(0,"small",17),b.Lc(1," Weight is invalid "),b.bc())}var U,V=function(c){return{"is-invalid":c}},G=((U=function(c){_inherits(t,c);var e=_createSuper(t);function t(c,i){var r;return _classCallCheck(this,t),(r=e.call(this)).fb=c,r.bsModalRef=i,r.createForm(),r}return _createClass(t,[{key:"ngOnInit",value:function(){this.onClose=new p.a,this.mform.patchValue({weight:this.weight})}},{key:"createForm",value:function(){this.mform=this.fb.group({weight:["",[o.p.required]]})}},{key:"onYes",value:function(){this.mform.invalid?this.mform.markAllAsTouched():(this.onClose.next({result:!0,weight:this.mform.value.weight}),this.bsModalRef.hide())}},{key:"onHide",value:function(){this.onClose.next({result:!1}),this.bsModalRef.hide()}}]),t}(k.a)).\u0275fac=function(c){return new(c||U)(b.Wb(o.c),b.Wb(d.a))},U.\u0275cmp=b.Qb({type:U,selectors:[["app-checkout-modal"]],features:[b.Hb],decls:25,vars:8,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-horizontal",3,"formGroup"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"text-danger"],[1,"col-sm-7"],["type","text","placeholder","Actual Weight (tons)","name","weight","formControlName","weight",1,"form-control",3,"ngClass"],["class","badge badge-danger",4,"ngIf"],[1,"col-sm-1","col-form-label"],[1,"modal-footer"],["type","button",1,"btn","btn-success","mr-2","pl-4","pr-4",3,"click"],["type","button",1,"btn","btn-default","pl-4","pr-4",3,"click"],[1,"badge","badge-danger"]],template:function(c,e){1&c&&(b.cc(0,"div",0),b.cc(1,"div",1),b.cc(2,"h4",2),b.Lc(3),b.bc(),b.cc(4,"button",3),b.kc("click",(function(){return e.bsModalRef.hide()})),b.cc(5,"span",4),b.Lc(6,"\xd7"),b.bc(),b.bc(),b.bc(),b.cc(7,"div",5),b.cc(8,"form",6),b.cc(9,"div",7),b.cc(10,"label",8),b.Lc(11,"Weight\xa0"),b.cc(12,"span",9),b.Lc(13,"*"),b.bc(),b.bc(),b.cc(14,"div",10),b.Xb(15,"input",11),b.Jc(16,B,2,0,"small",12),b.Jc(17,W,2,0,"small",12),b.bc(),b.cc(18,"label",13),b.Lc(19,"tons"),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(20,"div",14),b.cc(21,"button",15),b.kc("click",(function(){return e.onYes()})),b.Lc(22),b.bc(),b.cc(23,"button",16),b.kc("click",(function(){return e.onHide()})),b.Lc(24,"Cancel"),b.bc(),b.bc(),b.bc()),2&c&&(b.Kb(3),b.Mc(e.title),b.Kb(5),b.sc("formGroup",e.mform),b.Kb(7),b.sc("ngClass",b.vc(6,V,e.invalid("weight"))),b.Kb(1),b.sc("ngIf",e.invalid("weight")&&e.f.weight.hasError("required")),b.Kb(1),b.sc("ngIf",e.invalid("weight")&&e.f.weight.hasError("pattern")),b.Kb(5),b.Mc(e.btnYesText))},directives:[o.q,o.k,o.e,o.a,o.j,o.d,a.k,a.m],styles:[""]}),U),j=t("vVtw"),H=t("QLLi"),Z=t("OpGx"),Q=t("C4D8");function Y(c,e){1&c&&(b.cc(0,"div",21),b.cc(1,"h4"),b.Lc(2,"No records found"),b.bc(),b.bc())}function z(c,e){if(1&c){var t=b.dc();b.cc(0,"button",29),b.kc("click",(function(){b.Dc(t);var c=b.mc().$implicit;return b.mc(2).onEdit(c)})),b.Xb(1,"i",30),b.bc()}}function $(c,e){if(1&c){var t=b.dc();b.cc(0,"button",29),b.kc("click",(function(){b.Dc(t);var c=b.mc().$implicit;return b.mc(2).onView(c)})),b.Xb(1,"i",31),b.bc()}}function cc(c,e){if(1&c){var t=b.dc();b.cc(0,"button",29),b.kc("click",(function(){b.Dc(t);var c=b.mc().$implicit;return b.mc(2).onCheckIn(c)})),b.Lc(1,"Check In"),b.bc()}}function ec(c,e){if(1&c){var t=b.dc();b.cc(0,"button",29),b.kc("click",(function(){b.Dc(t);var c=b.mc().$implicit;return b.mc(2).onCheckOut(c)})),b.Lc(1,"Check Out"),b.bc()}}function tc(c,e){if(1&c){var t=b.dc();b.cc(0,"button",32),b.kc("click",(function(){b.Dc(t);var c=b.mc().$implicit;return b.mc(2).onPermit(c)})),b.Lc(1,"Permit"),b.bc()}}function ic(c,e){if(1&c&&(b.cc(0,"tr"),b.cc(1,"td"),b.Lc(2),b.bc(),b.cc(3,"td"),b.Lc(4),b.nc(5,"date"),b.bc(),b.cc(6,"td"),b.Lc(7),b.bc(),b.cc(8,"td"),b.Lc(9),b.bc(),b.cc(10,"td"),b.Lc(11),b.bc(),b.cc(12,"td"),b.Lc(13),b.bc(),b.cc(14,"td"),b.Lc(15),b.bc(),b.cc(16,"td"),b.Lc(17),b.nc(18,"date"),b.bc(),b.cc(19,"td"),b.Lc(20),b.nc(21,"date"),b.bc(),b.cc(22,"td",26),b.Jc(23,z,2,0,"button",27),b.Jc(24,$,2,0,"button",27),b.Jc(25,cc,2,0,"button",27),b.Jc(26,ec,2,0,"button",27),b.Jc(27,tc,2,0,"button",28),b.bc(),b.bc()),2&c){var t=e.$implicit,i=b.mc(2);b.Kb(2),b.Mc(t.do_num),b.Kb(2),b.Mc(b.pc(5,16,t.created_date,"d MMM yyyy h:mm:ss aaa")),b.Kb(3),b.Pc("",t.material.name," (",t.material.material_type,") - ",t.material.grade,""),b.Kb(2),b.Mc(t.truck.registration_num),b.Kb(2),b.Mc(t.driver.name),b.Kb(2),b.Mc(t.driver.id_num),b.Kb(2),b.Mc(i.getDOStatus(t)),b.Kb(2),b.Mc(b.pc(18,19,t.checkin_date,"d MMM yyyy h:mm:ss aaa")),b.Kb(3),b.Mc(b.pc(21,22,t.checkout_date,"d MMM yyyy h:mm:ss aaa")),b.Kb(3),b.sc("ngIf",t.status===i.DOStatus.NEW),b.Kb(1),b.sc("ngIf",t.status!==i.DOStatus.NEW),b.Kb(1),b.sc("ngIf",!t.checkin_date),b.Kb(1),b.sc("ngIf",!t.checkout_date&&t.checkin_date),b.Kb(1),b.sc("ngIf",null!==t.permit)}}function rc(c,e){if(1&c){var t=b.dc();b.cc(0,"div",22),b.cc(1,"table",23),b.cc(2,"thead"),b.cc(3,"tr"),b.cc(4,"th"),b.cc(5,"app-sort-column",24),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.cc(6,"th"),b.cc(7,"app-sort-column",24),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.cc(8,"th"),b.cc(9,"app-sort-column",24),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.cc(10,"th"),b.cc(11,"app-sort-column",24),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.cc(12,"th"),b.cc(13,"app-sort-column",24),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.cc(14,"th"),b.cc(15,"app-sort-column",24),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.cc(16,"th"),b.Lc(17,"Status"),b.bc(),b.cc(18,"th"),b.cc(19,"app-sort-column",24),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.cc(20,"th"),b.cc(21,"app-sort-column",24),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.Xb(22,"th"),b.bc(),b.bc(),b.cc(23,"tbody"),b.Jc(24,ic,28,25,"tr",25),b.bc(),b.bc(),b.bc()}if(2&c){var i=b.mc();b.Kb(5),b.sc("name","DO No.")("sort","do_num")("dir",i.sortDir)("current",i.sort),b.Kb(2),b.sc("name","DO Created Date")("sort","created_date")("dir",i.sortDir)("current",i.sort),b.Kb(2),b.sc("name","Material")("sort","material__name")("dir",i.sortDir)("current",i.sort),b.Kb(2),b.sc("name","Truck")("sort","truck__registration_num")("dir",i.sortDir)("current",i.sort),b.Kb(2),b.sc("name","Driver")("sort","driver__name")("dir",i.sortDir)("current",i.sort),b.Kb(2),b.sc("name","I/C No.")("sort","driver__id_num")("dir",i.sortDir)("current",i.sort),b.Kb(4),b.sc("name","Check In Time")("sort","checkin_date")("dir",i.sortDir)("current",i.sort),b.Kb(2),b.sc("name","Check Out Time")("sort","checkout_date")("dir",i.sortDir)("current",i.sort),b.Kb(3),b.sc("ngForOf",i.list)}}function nc(c,e){if(1&c){var t=b.dc();b.cc(0,"div",33),b.cc(1,"div",34),b.cc(2,"pagination",35),b.kc("ngModelChange",(function(c){return b.Dc(t),b.mc().page=c}))("pageChanged",(function(c){return b.Dc(t),b.mc().pageChanged(c)})),b.bc(),b.bc(),b.bc()}if(2&c){var i=b.mc();b.Kb(2),b.sc("totalItems",i.totalCount)("itemsPerPage",i.pageSize)("maxSize",i.MAX_PAGE_NUMBERS)("ngModel",i.page)}}var ac,oc=((ac=function(){function c(e,t,i,r,n,a,o){_classCallCheck(this,c),this.route=e,this.router=t,this.authService=i,this.deliveryOrderService=r,this.msService=n,this.toastr=a,this.modalService=o,this.isLoading=!1,this.list=[],this.totalCount=0,this.pageSize=J.a.PAGE_SIZE,this.page=1,this.search="",this.do_status=["all"],this.isRoleMiningHQ=!1,this.sort="created_date",this.sortDir="desc",this.sx=0,this.sy=0,this.doStatusList=[{id:"all",name:"ALL"},{id:"0",name:"NEW"},{id:"1",name:"IN PROGRESS"},{id:"2",name:"DISPATCHING"},{id:"3",name:"RECEIVED"}],this.uiState="mining-company.delivery-order-listing",this.isEmpty=L.a.isEmpty,this.PAGE_SIZE=J.a.PAGE_SIZE,this.MAX_PAGE_NUMBERS=J.a.MAX_PAGE_NUMBERS,this.DOStatus=J.a.DOStatus}return _createClass(c,[{key:"ngOnInit",value:function(){var c=this,e=this.authService.loadUser();this.mining_company_id=e.mining_company_id,this.isRoleMiningHQ=this.authService.hasRole(J.a.ROLE.MINING_HQ),this.isLoading=!0,this.subs=this.msService.get().subscribe((function(e){if(e.name===c.uiState){var t=e.data;c.page=t.page,c.sort=t.sort,c.sortDir=t.dir,c.search=t.search,c.do_status=t.do_status,c.sx=t.sx,c.sy=t.sy}})),this.load()}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}},{key:"load",value:function(){var c=this;""===this.search?(this.isLoading=!0,this.deliveryOrderService.list(this.do_status,this.page,J.a.PAGE_SIZE,this.sort,this.sortDir).subscribe((function(e){c.list=e.body,c.totalCount=Number(e.headers.get(J.a.HTTP_HEADER.X_TOTAL_COUNT)),c.isLoading=!1,setTimeout((function(){window.scrollTo(c.sx,c.sy)}),200)}),(function(c){}),(function(){c.isLoading=!1}))):this.onSearch(this.search)}},{key:"onSearch",value:function(c){var e=this;this.search=c,this.isLoading=!0,this.deliveryOrderService.search(this.do_status,this.page,J.a.PAGE_SIZE,this.sort,this.sortDir,c).subscribe((function(c){e.list=c.body,e.totalCount=Number(c.headers.get(J.a.HTTP_HEADER.X_TOTAL_COUNT)),e.isLoading=!1,setTimeout((function(){window.scrollTo(e.sx,e.sy)}),200)}),(function(c){}),(function(){e.isLoading=!1}))}},{key:"pageChanged",value:function(c){this.page=c.page,this.load()}},{key:"onSortBy",value:function(c){""===c.sort&&"asc"===c.dir?(this.sort="created_date",this.sortDir="desc"):(this.sort=c.sort,this.sortDir=c.dir),this.load()}},{key:"onApplyFilter",value:function(){this.load()}},{key:"goto",value:function(c){this.msService.send(this.uiState,{page:this.page,sort:this.sort,dir:this.sortDir,search:this.search,do_status:this.do_status,sx:window.scrollX,sy:window.scrollY}),this.router.navigate(["/ams/mining-company/delivery-order/"+c])}},{key:"onEdit",value:function(c){this.goto("edit/"+c.id)}},{key:"onView",value:function(c){this.goto("detail/"+c.id)}},{key:"onCheckIn",value:function(c){var e=this;this.bsModalRef=this.modalService.show(G,{initialState:{title:"Check In DO",weight:c.checkin_weight,btnYesText:"Check In"}}),this.bsModalRef.content.onClose.subscribe((function(t){!0===t.result&&(e.isLoading=!0,e.deliveryOrderService.updateTime({id:c.id,checkin:1,weight:t.weight}).subscribe((function(t){e.toastr.success("DO #".concat(c.do_num," successfully checked in")),e.load()}),(function(c){}),(function(){e.isLoading=!1})))}))}},{key:"onCheckOut",value:function(c){var e=this;this.bsModalRef=this.modalService.show(G,{initialState:{title:"Check Out DO",weight:c.checkout_weight,btnYesText:"Check Out"}}),this.bsModalRef.content.onClose.subscribe((function(t){!0===t.result&&(e.isLoading=!0,e.deliveryOrderService.updateTime({id:c.id,checkin:0,weight:t.weight}).subscribe((function(t){e.toastr.success("DO #".concat(c.do_num," successfully checked out")),e.load()}),(function(c){}),(function(){e.isLoading=!1})))}))}},{key:"onPermit",value:function(c){this.msService.send(this.uiState,{page:this.page,sort:this.sort,dir:this.sortDir,search:this.search,do_status:this.do_status,sx:window.scrollX,sy:window.scrollY}),this.router.navigate(["/ams/mining-company/permit/"+c.permit.id])}},{key:"onReceived",value:function(c){var e=this;this.isLoading=!0,this.deliveryOrderService.receive(c.id).subscribe((function(t){e.toastr.success("DO #".concat(c.do_num," successfully received")),e.load()}),(function(c){}),(function(){e.isLoading=!1}))}},{key:"getDOStatus",value:function(c){return c.status===J.a.DOStatus.NEW?"NEW":c.status===J.a.DOStatus.IN_PROGRESS?"IN PROGRESS":c.status===J.a.DOStatus.DELIVERING?"DISPATCHING":c.status===J.a.DOStatus.DELIVERED?"RECEIVED":"NEW"}}]),c}()).\u0275fac=function(c){return new(c||ac)(b.Wb(h.a),b.Wb(h.g),b.Wb(S.a),b.Wb(j.a),b.Wb(H.a),b.Wb(N.b),b.Wb(d.b))},ac.\u0275cmp=b.Qb({type:ac,selectors:[["app-delivery-order-listing"]],decls:25,vars:7,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-6","col-12","p-1"],[3,"search","onSearch"],[1,"col-sm-4","col-12","p-1"],["bindLabel","name","bindValue","id","placeholder","Please select","name","do_status",3,"ngModel","items","multiple","ngModelChange"],[1,"col-sm-2","col-12","p-1","text-right"],["type","button",1,"btn","btn-primary","mr-2",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card-body"],["class","text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover"],[3,"name","sort","dir","current","onSortBy"],[4,"ngFor","ngForOf"],[1,"text-nowrap"],["type","button","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"fas","fa-pencil-alt"],[1,"fas","fa-eye"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"card-footer"],[1,"float-right"],[3,"totalItems","itemsPerPage","maxSize","ngModel","ngModelChange","pageChanged"]],template:function(c,e){1&c&&(b.cc(0,"section",0),b.cc(1,"div",1),b.cc(2,"div",2),b.cc(3,"div",3),b.cc(4,"h1",4),b.Lc(5,"Delivery Order Listing"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(6,"section",5),b.cc(7,"div",1),b.cc(8,"div",6),b.cc(9,"div",7),b.cc(10,"div",8),b.cc(11,"div",9),b.cc(12,"app-search-input",10),b.kc("onSearch",(function(c){return e.onSearch(c)})),b.bc(),b.bc(),b.cc(13,"div",11),b.cc(14,"ng-select",12),b.kc("ngModelChange",(function(c){return e.do_status=c})),b.bc(),b.bc(),b.cc(15,"div",13),b.cc(16,"button",14),b.kc("click",(function(){return e.onApplyFilter()})),b.Lc(17,"Apply"),b.bc(),b.cc(18,"button",15),b.kc("click",(function(){return e.goto("create")})),b.Xb(19,"i",16),b.Lc(20," Issue DO"),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(21,"div",17),b.Jc(22,Y,3,0,"div",18),b.Jc(23,rc,25,33,"div",19),b.bc(),b.Jc(24,nc,3,4,"div",20),b.bc(),b.bc(),b.bc()),2&c&&(b.Kb(12),b.sc("search",e.search),b.Kb(2),b.sc("ngModel",e.do_status)("items",e.doStatusList)("multiple",!0),b.Kb(8),b.sc("ngIf",e.isEmpty(e.list)&&!e.isLoading),b.Kb(1),b.sc("ngIf",!e.isEmpty(e.list)&&!e.isLoading),b.Kb(1),b.sc("ngIf",e.totalCount&&!e.isLoading))},directives:[Z.a,s.a,o.j,o.l,a.m,Q.a,a.l,u.a],pipes:[a.e],styles:[""]}),ac),sc=t("cp0P"),dc=t("lSWO"),lc=t("kny6");function uc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," Buyer is required "),b.bc())}function bc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," PO No. is required "),b.bc())}function mc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," Material is required "),b.bc())}function pc(c,e){if(1&c){var t=b.dc();b.cc(0,"div",54),b.cc(1,"a",55),b.kc("click",(function(){b.Dc(t);var c=b.mc(2),e=b.Bc(9);return c.onViewTruck(e)})),b.Lc(2,"View"),b.bc(),b.bc()}}function vc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," Truck is required "),b.bc())}function _c(c,e){if(1&c){var t=b.dc();b.cc(0,"div",54),b.cc(1,"a",55),b.kc("click",(function(){b.Dc(t);var c=b.mc(2),e=b.Bc(11);return c.onViewDriver(e)})),b.Lc(2,"View"),b.bc(),b.bc()}}function fc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," Name is required "),b.bc())}function hc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," Address is required "),b.bc())}function gc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," Postcode is required "),b.bc())}function yc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," City is required "),b.bc())}function Lc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," State is required "),b.bc())}function kc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," Country is required "),b.bc())}function Cc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," Name is required "),b.bc())}function Sc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," Address is required "),b.bc())}function Kc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," Postcode is required "),b.bc())}function Nc(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," City is required "),b.bc())}function Ec(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," State is required "),b.bc())}function Ic(c,e){1&c&&(b.cc(0,"small",53),b.Lc(1," Country is required "),b.bc())}var Mc=function(c){return{"is-invalid":c}};function wc(c,e){if(1&c){var t=b.dc();b.cc(0,"div",1),b.cc(1,"form",9),b.kc("ngSubmit",(function(){return b.Dc(t),b.mc().onSubmit()})),b.cc(2,"div",10),b.cc(3,"div",11),b.cc(4,"div",12),b.cc(5,"label",13),b.Lc(6,"Buyer\xa0"),b.cc(7,"span",14),b.Lc(8,"*"),b.bc(),b.bc(),b.cc(9,"div",15),b.cc(10,"ng-select",16),b.kc("change",(function(c){return b.Dc(t),b.mc().onChangeBuyer(c)})),b.bc(),b.Jc(11,uc,2,0,"small",17),b.bc(),b.bc(),b.cc(12,"div",12),b.cc(13,"label",13),b.Lc(14,"PO No.\xa0"),b.cc(15,"span",14),b.Lc(16,"*"),b.bc(),b.bc(),b.cc(17,"div",15),b.Xb(18,"input",18),b.Jc(19,bc,2,0,"small",17),b.bc(),b.bc(),b.cc(20,"div",12),b.cc(21,"label",13),b.Lc(22,"Contract No."),b.bc(),b.cc(23,"div",15),b.Xb(24,"input",19),b.bc(),b.bc(),b.cc(25,"div",12),b.cc(26,"label",13),b.Lc(27,"Remarks"),b.bc(),b.cc(28,"div",15),b.Xb(29,"textarea",20),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(30,"div",10),b.cc(31,"div",11),b.cc(32,"div",21),b.cc(33,"div",22),b.cc(34,"div",23),b.cc(35,"label"),b.Lc(36,"Material\xa0"),b.cc(37,"span",14),b.Lc(38,"*"),b.bc(),b.bc(),b.Xb(39,"ng-select",24),b.Jc(40,mc,2,0,"small",17),b.bc(),b.bc(),b.cc(41,"div",22),b.cc(42,"div",23),b.cc(43,"label"),b.Lc(44,"Truck\xa0"),b.cc(45,"span",14),b.Lc(46,"*"),b.bc(),b.bc(),b.Jc(47,pc,3,0,"div",25),b.Xb(48,"ng-select",26),b.Jc(49,vc,2,0,"small",17),b.bc(),b.bc(),b.cc(50,"div",22),b.cc(51,"div",23),b.cc(52,"label"),b.Lc(53,"Driver"),b.bc(),b.Jc(54,_c,3,0,"div",25),b.Xb(55,"ng-select",27),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(56,"div",21),b.cc(57,"div",28),b.cc(58,"div",10),b.cc(59,"div",11),b.cc(60,"fieldset"),b.cc(61,"legend"),b.Lc(62,"Pickup Location"),b.bc(),b.cc(63,"div",12),b.cc(64,"label",13),b.Lc(65,"Name\xa0"),b.cc(66,"span",14),b.Lc(67,"*"),b.bc(),b.bc(),b.cc(68,"div",15),b.Xb(69,"input",29),b.Jc(70,fc,2,0,"small",17),b.bc(),b.bc(),b.cc(71,"div",12),b.cc(72,"label",13),b.Lc(73,"Address\xa0"),b.cc(74,"span",14),b.Lc(75,"*"),b.bc(),b.bc(),b.cc(76,"div",15),b.Xb(77,"input",30),b.Jc(78,hc,2,0,"small",17),b.bc(),b.bc(),b.cc(79,"div",12),b.cc(80,"div",31),b.Xb(81,"input",32),b.bc(),b.bc(),b.cc(82,"div",12),b.cc(83,"div",31),b.Xb(84,"input",33),b.bc(),b.bc(),b.cc(85,"div",12),b.cc(86,"label",13),b.Lc(87,"Postcode\xa0"),b.cc(88,"span",14),b.Lc(89,"*"),b.bc(),b.bc(),b.cc(90,"div",34),b.Xb(91,"input",35),b.Jc(92,gc,2,0,"small",17),b.bc(),b.cc(93,"label",13),b.Lc(94,"City\xa0"),b.cc(95,"span",14),b.Lc(96,"*"),b.bc(),b.bc(),b.cc(97,"div",36),b.Xb(98,"input",37),b.Jc(99,yc,2,0,"small",17),b.bc(),b.bc(),b.cc(100,"div",12),b.cc(101,"label",13),b.Lc(102,"State\xa0"),b.cc(103,"span",14),b.Lc(104,"*"),b.bc(),b.bc(),b.cc(105,"div",34),b.Xb(106,"ng-select",38),b.Jc(107,Lc,2,0,"small",17),b.bc(),b.cc(108,"label",13),b.Lc(109,"Country\xa0"),b.cc(110,"span",14),b.Lc(111,"*"),b.bc(),b.bc(),b.cc(112,"div",36),b.cc(113,"ng-select",39),b.kc("change",(function(c){return b.Dc(t),b.mc().onChangePickupCountry(c)})),b.bc(),b.Jc(114,kc,2,0,"small",17),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(115,"div",28),b.cc(116,"div",10),b.cc(117,"div",11),b.cc(118,"fieldset"),b.cc(119,"legend"),b.Lc(120,"Receiver Details"),b.bc(),b.cc(121,"div",12),b.cc(122,"label",13),b.Lc(123,"Name\xa0"),b.cc(124,"span",14),b.Lc(125,"*"),b.bc(),b.bc(),b.cc(126,"div",15),b.Xb(127,"input",40),b.Jc(128,Cc,2,0,"small",17),b.bc(),b.bc(),b.cc(129,"div",12),b.cc(130,"label",13),b.Lc(131,"Address\xa0"),b.cc(132,"span",14),b.Lc(133,"*"),b.bc(),b.bc(),b.cc(134,"div",15),b.Xb(135,"input",41),b.Jc(136,Sc,2,0,"small",17),b.bc(),b.bc(),b.cc(137,"div",12),b.cc(138,"div",31),b.Xb(139,"input",42),b.bc(),b.bc(),b.cc(140,"div",12),b.cc(141,"div",31),b.Xb(142,"input",43),b.bc(),b.bc(),b.cc(143,"div",12),b.cc(144,"label",13),b.Lc(145,"Postcode\xa0"),b.cc(146,"span",14),b.Lc(147,"*"),b.bc(),b.bc(),b.cc(148,"div",34),b.Xb(149,"input",44),b.Jc(150,Kc,2,0,"small",17),b.bc(),b.cc(151,"label",13),b.Lc(152,"City\xa0"),b.cc(153,"span",14),b.Lc(154,"*"),b.bc(),b.bc(),b.cc(155,"div",36),b.Xb(156,"input",45),b.Jc(157,Nc,2,0,"small",17),b.bc(),b.bc(),b.cc(158,"div",12),b.cc(159,"label",13),b.Lc(160,"State\xa0"),b.cc(161,"span",14),b.Lc(162,"*"),b.bc(),b.bc(),b.cc(163,"div",34),b.Xb(164,"ng-select",46),b.Jc(165,Ec,2,0,"small",17),b.bc(),b.cc(166,"label",13),b.Lc(167,"Country\xa0"),b.cc(168,"span",14),b.Lc(169,"*"),b.bc(),b.bc(),b.cc(170,"div",36),b.cc(171,"ng-select",47),b.kc("change",(function(c){return b.Dc(t),b.mc().onChangeReceiverCountry(c)})),b.bc(),b.Jc(172,Ic,2,0,"small",17),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(173,"div",48),b.cc(174,"div",3),b.cc(175,"button",49),b.kc("click",(function(){return b.Dc(t),b.mc().onBack()})),b.Xb(176,"i",50),b.Lc(177," Back"),b.bc(),b.cc(178,"button",51),b.Xb(179,"i",52),b.Lc(180," Submit"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc()}if(2&c){var i=b.mc();b.Kb(1),b.sc("formGroup",i.mform),b.Kb(9),b.sc("items",i.buyerList),b.Kb(1),b.sc("ngIf",i.invalid("buyer_id")&&i.f.buyer_id.hasError("required")),b.Kb(7),b.sc("ngClass",b.vc(36,Mc,i.invalid("po_num"))),b.Kb(1),b.sc("ngIf",i.invalid("po_num")&&i.f.po_num.hasError("required")),b.Kb(20),b.sc("items",i.materialList),b.Kb(1),b.sc("ngIf",i.invalid("material_id")&&i.f.material_id.hasError("required")),b.Kb(7),b.sc("ngIf",null!==i.f.truck_id.value),b.Kb(1),b.sc("items",i.truckList),b.Kb(1),b.sc("ngIf",i.invalid("truck_id")&&i.f.truck_id.hasError("required")),b.Kb(5),b.sc("ngIf",null!==i.f.driver_id.value),b.Kb(1),b.sc("items",i.driverList),b.Kb(14),b.sc("ngClass",b.vc(38,Mc,i.invalid("pickup_name"))),b.Kb(1),b.sc("ngIf",i.invalid("pickup_name")&&i.f.pickup_name.hasError("required")),b.Kb(7),b.sc("ngClass",b.vc(40,Mc,i.invalid("pickup_addr_line_1"))),b.Kb(1),b.sc("ngIf",i.invalid("pickup_addr_line_1")&&i.f.pickup_addr_line_1.hasError("required")),b.Kb(13),b.sc("ngClass",b.vc(42,Mc,i.invalid("pickup_postcode"))),b.Kb(1),b.sc("ngIf",i.invalid("pickup_postcode")&&i.f.pickup_postcode.hasError("required")),b.Kb(6),b.sc("ngClass",b.vc(44,Mc,i.invalid("pickup_city"))),b.Kb(1),b.sc("ngIf",i.invalid("pickup_city")&&i.f.pickup_city.hasError("required")),b.Kb(7),b.sc("items",i.stateList),b.Kb(1),b.sc("ngIf",i.invalid("pickup_state_id")&&i.f.pickup_state_id.hasError("required")),b.Kb(6),b.sc("items",i.countryList),b.Kb(1),b.sc("ngIf",i.invalid("pickup_country_id")&&i.f.pickup_country_id.hasError("required")),b.Kb(13),b.sc("ngClass",b.vc(46,Mc,i.invalid("recv_name"))),b.Kb(1),b.sc("ngIf",i.invalid("recv_name")&&i.f.recv_name.hasError("required")),b.Kb(7),b.sc("ngClass",b.vc(48,Mc,i.invalid("recv_addr_line_1"))),b.Kb(1),b.sc("ngIf",i.invalid("recv_addr_line_1")&&i.f.recv_addr_line_1.hasError("required")),b.Kb(13),b.sc("ngClass",b.vc(50,Mc,i.invalid("recv_postcode"))),b.Kb(1),b.sc("ngIf",i.invalid("recv_postcode")&&i.f.recv_postcode.hasError("required")),b.Kb(6),b.sc("ngClass",b.vc(52,Mc,i.invalid("recv_city"))),b.Kb(1),b.sc("ngIf",i.invalid("recv_city")&&i.f.recv_city.hasError("required")),b.Kb(7),b.sc("items",i.stateList),b.Kb(1),b.sc("ngIf",i.invalid("recv_state_id")&&i.f.recv_state_id.hasError("required")),b.Kb(6),b.sc("items",i.countryList),b.Kb(1),b.sc("ngIf",i.invalid("recv_country_id")&&i.f.recv_country_id.hasError("required"))}}function Oc(c,e){if(1&c){var t=b.dc();b.cc(0,"div",56),b.cc(1,"h4",57),b.Lc(2),b.bc(),b.cc(3,"button",58),b.kc("click",(function(){return b.Dc(t),b.mc().bsModalRef.hide()})),b.cc(4,"span",59),b.Lc(5,"\xd7"),b.bc(),b.bc(),b.bc(),b.cc(6,"div",60),b.cc(7,"div",61),b.Xb(8,"img",62),b.bc(),b.bc()}if(2&c){var i=b.mc();b.Kb(2),b.Nc("Truck ",i.truckReg,""),b.Kb(6),b.sc("src",i.truckImg,b.Fc)}}function Ac(c,e){if(1&c){var t=b.dc();b.cc(0,"div",56),b.cc(1,"h4",57),b.Lc(2),b.bc(),b.cc(3,"button",58),b.kc("click",(function(){return b.Dc(t),b.mc().bsModalRef.hide()})),b.cc(4,"span",59),b.Lc(5,"\xd7"),b.bc(),b.bc(),b.bc(),b.cc(6,"div",60),b.cc(7,"div",61),b.Xb(8,"img",62),b.bc(),b.bc()}if(2&c){var i=b.mc();b.Kb(2),b.Nc("Driver ",i.driverId,""),b.Kb(6),b.sc("src",i.driverImg,b.Fc)}}var Dc,Pc=((Dc=function(c){_inherits(t,c);var e=_createSuper(t);function t(c,i,r,n,a,o,s,d,l,u){var b;return _classCallCheck(this,t),(b=e.call(this)).fb=c,b.route=i,b.router=r,b.authService=n,b.lookupService=a,b.deliveryOrderService=o,b.truckService=s,b.driverService=d,b.toastr=l,b.modalService=u,b.isLoading=!1,b.data={id:""},b.isEdit=!1,b.truckImg=null,b.truckReg="",b.driverImg=null,b.driverId="",b.buyerList=[],b.materialList=[],b.truckList=[],b.driverList=[],b.countryList=[],b.stateList=[],b.createForm(),b}return _createClass(t,[{key:"ngOnInit",value:function(){var c=this,e=this.authService.loadUser();this.mining_company_id=e.mining_company_id,this.route.paramMap.subscribe((function(e){c.id=e.get("id"),y.a.isNull(c.id)||(c.isEdit=!0),c.load()}))}},{key:"createForm",value:function(){this.mform=this.fb.group({po_num:["",[o.p.required]],contract_num:[""],remarks:[""],buyer_id:[null,[o.p.required]],material_id:[null,[o.p.required]],truck_id:[null,[o.p.required]],driver_id:[null],pickup_name:["",[o.p.required]],pickup_addr_line_1:["",[o.p.required]],pickup_addr_line_2:[""],pickup_addr_line_3:[""],pickup_postcode:["",[o.p.required]],pickup_city:["",[o.p.required]],pickup_state_id:[null,[o.p.required]],pickup_country_id:[null,[o.p.required]],recv_name:["",[o.p.required]],recv_addr_line_1:["",[o.p.required]],recv_addr_line_2:[""],recv_addr_line_3:[""],recv_postcode:["",[o.p.required]],recv_city:["",[o.p.required]],recv_state_id:[null,[o.p.required]],recv_country_id:[null,[o.p.required]]})}},{key:"setForm",value:function(){var c=this,e=this.data;this.mform.patchValue({po_num:e.po_num,contract_num:e.contract_num,remarks:e.remarks,buyer_id:e.buyer.id,material_id:e.material.id,truck_id:e.truck.id,driver_id:e.driver.id,pickup_name:e.pickup_name,pickup_addr_line_1:e.pickup_addr_line_1,pickup_addr_line_2:e.pickup_addr_line_2,pickup_addr_line_3:e.pickup_addr_line_3,pickup_postcode:e.pickup_postcode,pickup_city:e.pickup_city,pickup_country_id:e.pickup_country.id,recv_name:e.recv_name,recv_addr_line_1:e.recv_addr_line_1,recv_addr_line_2:e.recv_addr_line_2,recv_addr_line_3:e.recv_addr_line_3,recv_postcode:e.recv_postcode,recv_city:e.recv_city,recv_country_id:e.recv_country.id});var t=this.lookupService.listTruck(e.buyer.id),i=this.lookupService.listDriver(e.buyer.id),r=this.lookupService.listStates(e.recv_country.id);Object(sc.a)([t,i,r]).subscribe((function(t){c.truckList=t[0],c.driverList=t[1],c.stateList=t[2],c.driverList=t[1].map((function(c){return c.label="".concat(c.name," - ").concat(c.id_num),c})),c.mform.patchValue({truck_id:e.truck.id,driver_id:e.driver.id,pickup_state_id:e.pickup_state.id,recv_state_id:e.recv_state.id})}),(function(c){}),(function(){c.isLoading=!1}))}},{key:"load",value:function(){var c=this;this.isLoading=!0;var e=this.lookupService.listBuyer(),t=this.lookupService.listMaterial(this.mining_company_id),i=this.lookupService.listCountry();Object(sc.a)([e,t,i]).subscribe((function(e){c.buyerList=e[0],c.materialList=e[1],c.countryList=e[2],c.materialList=e[1].map((function(c){return c.label="".concat(c.name," (").concat(c.material_type,") - ").concat(c.grade),c})),c.mform.patchValue({pickup_country_id:c.countryList[0].id,recv_country_id:c.countryList[0].id}),c.onChangePickupCountry(c.countryList[0]),c.onChangeReceiverCountry(c.countryList[0]),c.loadDetails()}),(function(e){c.isLoading=!1}))}},{key:"loadDetails",value:function(){var c=this;y.a.isNull(this.id)||y.a.isUndefined(this.id)?this.isLoading=!1:this.deliveryOrderService.edit(this.id).subscribe((function(e){c.data=e,c.setForm()}),(function(e){c.isLoading=!1}))}},{key:"onViewTruck",value:function(c){var e=this,t=this.mform.value;return this.isLoading=!0,this.truckService.edit(t.buyer_id,t.truck_id).subscribe((function(t){t.img?(e.truckReg=t.registration_num,e.truckImg=t.img.img,e.bsModalRef=e.modalService.show(c,{class:"modal-lg"})):e.toastr.info("No image found for this truck")}),(function(c){}),(function(){e.isLoading=!1})),!1}},{key:"onViewDriver",value:function(c){var e=this,t=this.mform.value;return this.isLoading=!0,this.driverService.edit(t.buyer_id,t.driver_id).subscribe((function(t){t.license?(e.driverId=t.id_num,e.driverImg=t.license.img,e.bsModalRef=e.modalService.show(c,{class:"modal-lg"})):e.toastr.info("No image found for this driver")}),(function(c){}),(function(){e.isLoading=!1})),!1}},{key:"onBack",value:function(){this.router.navigate(["/ams/mining-company/delivery-order/list"])}},{key:"onSubmit",value:function(){var c=this;if(this.mform.invalid)this.mform.markAllAsTouched();else{var e=this.mform.value,t={po_num:e.po_num,contract_num:e.contract_num,remarks:e.remarks,buyer_id:e.buyer_id,issue_from_id:this.mining_company_id,material_id:e.material_id,truck_id:e.truck_id,driver_id:e.driver_id,pickup_name:e.pickup_name,pickup_addr_line_1:e.pickup_addr_line_1,pickup_addr_line_2:e.pickup_addr_line_2,pickup_addr_line_3:e.pickup_addr_line_3,pickup_postcode:e.pickup_postcode,pickup_city:e.pickup_city,pickup_state_id:e.pickup_state_id,pickup_country_id:e.pickup_country_id,recv_name:e.recv_name,recv_addr_line_1:e.recv_addr_line_1,recv_addr_line_2:e.recv_addr_line_2,recv_addr_line_3:e.recv_addr_line_3,recv_postcode:e.recv_postcode,recv_city:e.recv_city,recv_state_id:e.recv_state_id,recv_country_id:e.recv_country_id};this.isEdit?this.deliveryOrderService.update(this.data.id,t).subscribe((function(e){c.toastr.success("Delivery Order successfully updated")})):this.deliveryOrderService.create(t).subscribe((function(e){c.toastr.success("New Delivery Order successfully created"),c.mform.reset()}))}}},{key:"onChangeBuyer",value:function(c){var e=this,t=this.lookupService.listTruck(c.id),i=this.lookupService.listDriver(c.id);Object(sc.a)([t,i]).subscribe((function(c){e.truckList=c[0],e.driverList=c[1],e.driverList=c[1].map((function(c){return c.label="".concat(c.name," - ").concat(c.id_num),c})),e.mform.patchValue({truck_id:null,driver_id:null})}))}},{key:"onChangePickupCountry",value:function(c){var e=this;this.lookupService.listStates(c.id).subscribe((function(c){e.stateList=c,e.mform.patchValue({pickup_state_id:null})}))}},{key:"onChangeReceiverCountry",value:function(c){var e=this;this.lookupService.listStates(c.id).subscribe((function(c){e.stateList=c,e.mform.patchValue({recv_state_id:null})}))}}]),t}(k.a)).\u0275fac=function(c){return new(c||Dc)(b.Wb(o.c),b.Wb(h.a),b.Wb(h.g),b.Wb(S.a),b.Wb(C.a),b.Wb(j.a),b.Wb(dc.a),b.Wb(lc.a),b.Wb(N.b),b.Wb(d.b))},Dc.\u0275cmp=b.Qb({type:Dc,selectors:[["app-delivery-order-create"]],features:[b.Hb],decls:12,vars:1,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],["class","container-fluid",4,"ngIf"],["truckIm",""],["driverIm",""],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-2","col-form-label"],[1,"text-danger"],[1,"col-sm-10"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","buyer_id","name","buyer_id",3,"items","change"],["class","badge badge-danger",4,"ngIf"],["type","text","placeholder","PO No.","name","po_num","formControlName","po_num",1,"form-control",3,"ngClass"],["type","text","placeholder","Contract No.","name","contract_num","formControlName","contract_num",1,"form-control"],["placeholder","Remarks","name","remarks","formControlName","remarks","rows","3","cols","20",1,"form-control"],[1,"row"],[1,"col-sm-4"],[1,"form-group"],["bindLabel","label","bindValue","id","placeholder","Please select","formControlName","material_id","name","material_id",3,"items"],["class","d-inline float-right",4,"ngIf"],["bindLabel","registration_num","bindValue","id","placeholder","Please select","formControlName","truck_id","name","truck_id",3,"items"],["bindLabel","label","bindValue","id","placeholder","Please select","formControlName","driver_id","name","driver_id",3,"items"],[1,"col-sm-6","col-12"],["type","text","placeholder","Name","name","recv_name","formControlName","pickup_name",1,"form-control",3,"ngClass"],["type","text","placeholder","Address","name","pickup_addr_line_1","formControlName","pickup_addr_line_1",1,"form-control",3,"ngClass"],[1,"col-sm-10","offset-sm-2"],["type","text","placeholder","Address 2","name","pickup_addr_line_2","formControlName","pickup_addr_line_2",1,"form-control"],["type","text","placeholder","Address 3","name","pickup_addr_line_3","formControlName","pickup_addr_line_3",1,"form-control"],[1,"col-sm-3"],["type","text","placeholder","Postcode","name","pickup_postcode","formControlName","pickup_postcode",1,"form-control",3,"ngClass"],[1,"col-sm-5"],["type","text","placeholder","City","name","pickup_city","formControlName","pickup_city",1,"form-control",3,"ngClass"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","pickup_state_id","name","recv_state_id",3,"items"],["bindLabel","name","bindValue","id","placeholder","Please select","name","pickup_country_id","formControlName","pickup_country_id",3,"items","change"],["type","text","placeholder","Name","name","recv_name","formControlName","recv_name",1,"form-control",3,"ngClass"],["type","text","placeholder","Address","name","recv_addr_line_1","formControlName","recv_addr_line_1",1,"form-control",3,"ngClass"],["type","text","placeholder","Address 2","name","recv_addr_line_2","formControlName","recv_addr_line_2",1,"form-control"],["type","text","placeholder","Address 3","name","recv_addr_line_3","formControlName","recv_addr_line_3",1,"form-control"],["type","text","placeholder","Postcode","name","recv_postcode","formControlName","recv_postcode",1,"form-control",3,"ngClass"],["type","text","placeholder","City","name","recv_city","formControlName","recv_city",1,"form-control",3,"ngClass"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","recv_state_id","name","recv_state_id",3,"items"],["bindLabel","name","bindValue","id","placeholder","Please select","name","recv_country_id","formControlName","recv_country_id",3,"items","change"],[1,"row","mb-3"],["type","button",1,"btn","btn-outline-dark","mr-2",3,"click"],[1,"fas","fa-chevron-circle-left"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],[1,"badge","badge-danger"],[1,"d-inline","float-right"],["href","#",3,"click"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-center"],[1,"img-fluid","rounded",3,"src"]],template:function(c,e){1&c&&(b.cc(0,"section",0),b.cc(1,"div",1),b.cc(2,"div",2),b.cc(3,"div",3),b.cc(4,"h1",4),b.Lc(5,"Issue DO"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(6,"section",5),b.Jc(7,wc,181,54,"div",6),b.bc(),b.Jc(8,Oc,9,2,"ng-template",null,7,b.Kc),b.Jc(10,Ac,9,2,"ng-template",null,8,b.Kc)),2&c&&(b.Kb(7),b.sc("ngIf",!e.isLoading))},directives:[a.m,o.q,o.k,o.e,s.a,o.j,o.d,o.a,a.k],styles:[""]}),Dc),xc=t("cpHE"),Tc=function(c){return["/permit",c,"print"]};function Rc(c,e){if(1&c){var t=b.dc();b.cc(0,"div",2),b.cc(1,"div",3),b.cc(2,"div",4),b.cc(3,"div"),b.Lc(4,"SALINAN JMG"),b.bc(),b.Xb(5,"img",5),b.bc(),b.cc(6,"div",6),b.cc(7,"div",7),b.Lc(8,"JABATAN MINERAL DAN GEOSAINS MALAYSIA"),b.bc(),b.cc(9,"div",7),b.Lc(10,"AKTA PEMBANGUNAN MINERAL 1994"),b.bc(),b.cc(11,"div",7),b.Lc(12,"PERATURAN-PERATURAN PEMBANGUNAN MINERAL (PELESENAN) 2016"),b.bc(),b.cc(13,"div",8),b.Lc(14,"(SUBPERATURAN 8(2))"),b.bc(),b.bc(),b.cc(15,"div",9),b.cc(16,"div",10),b.cc(17,"span",11),b.Lc(18,"NO. SIRI: "),b.bc(),b.cc(19,"span",12),b.Lc(20),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(21,"div",13),b.cc(22,"div",14),b.Xb(23,"div",15),b.bc(),b.bc(),b.cc(24,"div",3),b.cc(25,"div",14),b.cc(26,"div",16),b.cc(27,"u"),b.Lc(28,"BUTIR-BUTIR PEMEGANG LESEN"),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(29,"div",3),b.cc(30,"div",14),b.cc(31,"table",17),b.cc(32,"tbody"),b.cc(33,"tr"),b.cc(34,"td",18),b.Lc(35,"NAMA:"),b.bc(),b.cc(36,"td"),b.cc(37,"div",19),b.Lc(38),b.nc(39,"uppercase"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(40,"div",3),b.cc(41,"div",14),b.cc(42,"table",17),b.cc(43,"tbody"),b.cc(44,"tr"),b.cc(45,"td",18),b.Lc(46,"ALAMAT PREMIS:"),b.bc(),b.cc(47,"td"),b.cc(48,"div",19),b.Lc(49),b.nc(50,"uppercase"),b.bc(),b.bc(),b.bc(),b.cc(51,"tr"),b.cc(52,"td",20),b.cc(53,"div",19),b.Lc(54),b.nc(55,"uppercase"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(56,"div",3),b.cc(57,"div",14),b.cc(58,"table",17),b.cc(59,"tbody"),b.cc(60,"tr"),b.cc(61,"td",18),b.Lc(62,"NO. LESEN MINERAL/MEMPROSES:"),b.bc(),b.cc(63,"td",21),b.cc(64,"div",19),b.Lc(65),b.bc(),b.bc(),b.cc(66,"td",18),b.Lc(67,"TARIKH LUPUT LESEN:"),b.bc(),b.cc(68,"td"),b.cc(69,"div",19),b.Lc(70),b.nc(71,"uppercase"),b.nc(72,"date"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(73,"div",13),b.cc(74,"div",14),b.Xb(75,"div",15),b.bc(),b.bc(),b.cc(76,"div",3),b.cc(77,"div",14),b.cc(78,"div",16),b.cc(79,"u"),b.Lc(80,"BUTIR-BUTIR PENGANGKUTAN MINERAL"),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(81,"div",3),b.cc(82,"div",14),b.cc(83,"table",17),b.cc(84,"tbody"),b.cc(85,"tr"),b.cc(86,"td",18),b.Lc(87,"NAMA PEMANDU:"),b.bc(),b.cc(88,"td"),b.cc(89,"div",19),b.Lc(90),b.nc(91,"uppercase"),b.bc(),b.bc(),b.cc(92,"td",18),b.Lc(93,"NO. K.P.:"),b.bc(),b.cc(94,"td"),b.cc(95,"div",19),b.Lc(96),b.nc(97,"uppercase"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(98,"div",3),b.cc(99,"div",14),b.cc(100,"table",17),b.cc(101,"tbody"),b.cc(102,"tr"),b.cc(103,"td",18),b.Lc(104,"NO. KENDERAAN:"),b.bc(),b.cc(105,"td",22),b.cc(106,"div",19),b.Lc(107),b.bc(),b.bc(),b.cc(108,"td",18),b.Lc(109,"DESTINASI:"),b.bc(),b.cc(110,"td"),b.cc(111,"div",19),b.Lc(112),b.nc(113,"uppercase"),b.nc(114,"uppercase"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(115,"div",3),b.cc(116,"div",14),b.cc(117,"table",17),b.cc(118,"tbody"),b.cc(119,"tr"),b.cc(120,"td",18),b.Lc(121,"JENIS MINERAL:"),b.bc(),b.cc(122,"td"),b.cc(123,"div",19),b.Lc(124),b.nc(125,"uppercase"),b.nc(126,"uppercase"),b.nc(127,"uppercase"),b.bc(),b.bc(),b.cc(128,"td",18),b.Lc(129,"BERAT:"),b.bc(),b.cc(130,"td"),b.cc(131,"div",19),b.Lc(132),b.nc(133,"number"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(134,"div",13),b.cc(135,"div",14),b.Xb(136,"div",15),b.bc(),b.bc(),b.cc(137,"div",3),b.cc(138,"div",14),b.cc(139,"div",16),b.cc(140,"u"),b.Lc(141,"AKUAN PENERIMAAN"),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(142,"div",3),b.cc(143,"div",14),b.cc(144,"table",17),b.cc(145,"tr"),b.cc(146,"td",18),b.Lc(147,"NAMA DAN ALAMAT PENERIMA:"),b.bc(),b.cc(148,"td"),b.cc(149,"div",19),b.Lc(150),b.nc(151,"uppercase"),b.bc(),b.bc(),b.bc(),b.cc(152,"tr"),b.cc(153,"td",20),b.cc(154,"div",19),b.Lc(155),b.nc(156,"uppercase"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(157,"div",3),b.cc(158,"div",14),b.cc(159,"table",17),b.cc(160,"tr"),b.cc(161,"td",18),b.Lc(162,"TARIKH TERIMA:"),b.bc(),b.cc(163,"td"),b.cc(164,"div",19),b.Lc(165,"\xa0"),b.bc(),b.bc(),b.cc(166,"td",18),b.Lc(167,"TANDATANGAN:"),b.bc(),b.cc(168,"td"),b.cc(169,"div",19),b.Lc(170,"\xa0"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(171,"div",3),b.cc(172,"div",14),b.cc(173,"div",23),b.cc(174,"table",17),b.cc(175,"tbody"),b.cc(176,"tr"),b.cc(177,"td",24),b.cc(178,"div",11),b.Lc(179,"UNTUK KEGUNAAN PEJABAT:"),b.bc(),b.bc(),b.bc(),b.cc(180,"tr"),b.cc(181,"td",18),b.Lc(182,"TARIKH LUPUT:"),b.bc(),b.cc(183,"td"),b.cc(184,"div",19),b.Lc(185,"\xa0"),b.bc(),b.bc(),b.cc(186,"td",22),b.cc(187,"div",19),b.Lc(188,"\xa0"),b.bc(),b.bc(),b.cc(189,"td",18),b.Lc(190,"TARIKH LUPUT:"),b.bc(),b.cc(191,"td"),b.cc(192,"div",19),b.Lc(193,"\xa0"),b.bc(),b.bc(),b.bc(),b.cc(194,"tr"),b.Xb(195,"td",20),b.cc(196,"td",18),b.Lc(197,"PEN. PENGARAH GALIAN"),b.bc(),b.Xb(198,"td",20),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(199,"div",25),b.cc(200,"div",26),b.cc(201,"button",27),b.kc("click",(function(){return b.Dc(t),b.mc().onBack()})),b.Xb(202,"i",28),b.Lc(203," Back"),b.bc(),b.cc(204,"a",29),b.Xb(205,"i",30),b.Lc(206," Print"),b.bc(),b.bc(),b.bc(),b.bc()}if(2&c){var i=b.mc();b.Kb(20),b.Mc(i.data.permit_num),b.Kb(18),b.Mc(b.oc(39,18,i.data.do_master.issue_from.name)),b.Kb(11),b.Mc(b.oc(50,20,i.issueFromAddress1)),b.Kb(5),b.Mc(b.oc(55,22,i.issueFromAddress2)),b.Kb(11),b.Mc(i.data.do_master.issue_from.mining_license_num),b.Kb(5),b.Mc(b.oc(71,24,b.pc(72,26,i.data.do_master.issue_from.mining_license_expiry_date,"d MMM yyyy"))),b.Kb(20),b.Mc(b.oc(91,29,i.data.do_master.driver.name)),b.Kb(6),b.Mc(b.oc(97,31,i.data.do_master.driver.id_num)),b.Kb(11),b.Mc(i.data.do_master.truck.registration_num),b.Kb(5),b.Oc("",b.oc(113,33,i.data.do_master.recv_city)," - ",b.oc(114,35,i.data.do_master.recv_state.name),""),b.Kb(12),b.Pc("",b.oc(125,37,i.data.do_master.material.name),", ",b.oc(126,39,i.data.do_master.material.material_type),", ",b.oc(127,41,i.data.do_master.material.grade),""),b.Kb(8),b.Nc("",b.oc(133,43,i.data.do_master.actual_weight)," tons"),b.Kb(18),b.Mc(b.oc(151,45,i.data.do_master.recv_name)),b.Kb(5),b.Mc(b.oc(156,47,i.destinationAddress)),b.Kb(49),b.sc("routerLink",b.vc(49,Tc,i.id))}}var qc,Xc=((qc=function(){function c(e,t,i){_classCallCheck(this,c),this.route=e,this.router=t,this.permitService=i,this.isLoading=!1,this.data={id:""}}return _createClass(c,[{key:"ngOnInit",value:function(){var c=this;this.route.paramMap.subscribe((function(e){c.id=e.get("id"),c.load()}))}},{key:"load",value:function(){var c=this;y.a.isNull(this.id)||y.a.isUndefined(this.id)?this.isLoading=!1:(this.isLoading=!0,this.permitService.detail(this.id).subscribe((function(e){c.data=e}),(function(c){}),(function(){c.isLoading=!1})))}},{key:"onBack",value:function(){this.router.navigate(["/ams/mining-company/delivery-order/list"])}},{key:"issueFromAddress1",get:function(){var c="";if(this.data.do_master&&this.data.do_master.issue_from){var e=this.data.do_master.issue_from,t=[e.addr_line_1];e.addr_line_2&&t.push(e.addr_line_2),e.addr_line_3&&t.push(e.addr_line_3),c=t.join(", ")}return c}},{key:"issueFromAddress2",get:function(){var c="";if(this.data.do_master&&this.data.do_master.issue_from){var e=this.data.do_master.issue_from;c=" ".concat(e.postcode," ").concat(e.city," ").concat(e.state.name," ").concat(e.country.name)}return c}},{key:"destinationAddress",get:function(){var c="";if(this.data.do_master){var e=this.data.do_master,t=[e.recv_addr_line_1];e.recv_addr_line_2&&t.push(e.recv_addr_line_2),e.recv_addr_line_3&&t.push(e.recv_addr_line_3),c=t.join(", "),c+=" ".concat(e.recv_postcode," ").concat(e.recv_city," ").concat(e.recv_state.name," ").concat(e.recv_country.name)}return c}}]),c}()).\u0275fac=function(c){return new(c||qc)(b.Wb(h.a),b.Wb(h.g),b.Wb(xc.a))},qc.\u0275cmp=b.Qb({type:qc,selectors:[["app-permit-detail"]],decls:2,vars:1,consts:[[1,"content"],["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-sm-2"],["src","assets/img/jmg.png",1,"img-jmg"],[1,"col-sm-7"],[1,"text-center","text-bold"],[1,"text-center","text-sm"],[1,"col-sm-3"],[1,"float-right","d-inline"],[1,"text-bold"],[1,"text-danger","text-xl"],[1,"row","mb-2"],[1,"col-sm-12"],[1,"border-top","border-dark","header-line"],[1,"text-bold","text-left"],[1,"table","table-sm","table-borderless"],[1,"w-min"],[1,"border-bottom","border-dark"],["colspan","2"],[2,"width","200px"],[2,"width","180px"],[1,"border","border-dark"],["colspan","5"],[1,"row","mt-2","mb-2","no-print"],[1,"col-12"],["type","button",1,"btn","btn-outline-dark","mr-2",3,"click"],[1,"fas","fa-chevron-circle-left"],["target","_blank",1,"btn","btn-default",3,"routerLink"],[1,"fas","fa-print"]],template:function(c,e){1&c&&(b.cc(0,"section",0),b.Jc(1,Rc,207,51,"div",1),b.bc()),2&c&&(b.Kb(1),b.sc("ngIf",!e.isLoading))},directives:[a.m,h.h],pipes:[a.s,a.e,a.f],styles:[".img-jmg[_ngcontent-%COMP%]{width:100px;height:100px;-o-object-fit:contain;object-fit:contain}.header-line[_ngcontent-%COMP%]{border-top:2px solid #000!important}td.w-min[_ngcontent-%COMP%]{width:1%;white-space:nowrap}"]}),qc),Fc=t("LNgY"),Jc=t("VuLe"),Bc=t("eUtn"),Wc=t("bOQg"),Uc=t("fdx9"),Vc=t("wWB1");function Gc(c,e){if(1&c&&(b.ac(0),b.Lc(1),b.nc(2,"uppercase"),b.Zb()),2&c){var t=b.mc(2);b.Kb(1),b.Nc(",\xa0",b.oc(2,1,t.data.recv_addr_line_2),",")}}function jc(c,e){if(1&c&&(b.ac(0),b.Lc(1),b.nc(2,"uppercase"),b.Zb()),2&c){var t=b.mc(2);b.Kb(1),b.Nc("",b.oc(2,1,t.data.recv_addr_line_3),"\xa0")}}function Hc(c,e){if(1&c&&(b.ac(0),b.Lc(1),b.nc(2,"uppercase"),b.Zb()),2&c){var t=b.mc(2);b.Kb(1),b.Nc(",\xa0",b.oc(2,1,t.data.pickup_addr_line_2),",")}}function Zc(c,e){if(1&c&&(b.ac(0),b.Lc(1),b.nc(2,"uppercase"),b.Zb()),2&c){var t=b.mc(2);b.Kb(1),b.Nc("",b.oc(2,1,t.data.pickup_addr_line_3),"\xa0")}}function Qc(c,e){if(1&c&&(b.ac(0),b.Lc(1),b.Zb()),2&c){var t=b.mc(2);b.Kb(1),b.Nc("\xa0",t.data.issue_from.addr_line_2,",")}}function Yc(c,e){if(1&c&&(b.ac(0),b.Lc(1),b.Zb()),2&c){var t=b.mc(2);b.Kb(1),b.Nc("\xa0",t.data.issue_from.addr_line_3,",")}}function zc(c,e){if(1&c&&(b.ac(0),b.Lc(1),b.Zb()),2&c){var t=b.mc(2);b.Kb(1),b.Nc("+",t.data.issue_from.fax_no,"")}}var $c=function(c){return["/delivery-order",c,"print"]};function ce(c,e){if(1&c){var t=b.dc();b.cc(0,"div",1),b.cc(1,"div",6),b.cc(2,"div",7),b.cc(3,"div"),b.Lc(4,"Date:"),b.bc(),b.bc(),b.cc(5,"div",8),b.cc(6,"div",9),b.Lc(7),b.nc(8,"date"),b.bc(),b.bc(),b.bc(),b.cc(9,"div",10),b.cc(10,"div",7),b.cc(11,"div"),b.Lc(12,"DO no.:"),b.bc(),b.bc(),b.cc(13,"div",8),b.cc(14,"div",9),b.Lc(15),b.bc(),b.bc(),b.bc(),b.cc(16,"div",10),b.cc(17,"div",7),b.cc(18,"div"),b.Lc(19,"Delivery to:"),b.bc(),b.bc(),b.cc(20,"div",8),b.cc(21,"div",9),b.Lc(22),b.bc(),b.bc(),b.bc(),b.cc(23,"div",10),b.cc(24,"div",11),b.cc(25,"div",9),b.Lc(26),b.nc(27,"uppercase"),b.Jc(28,Gc,3,3,"ng-container",12),b.bc(),b.bc(),b.bc(),b.cc(29,"div",10),b.cc(30,"div",11),b.cc(31,"div",9),b.Jc(32,jc,3,3,"ng-container",12),b.Lc(33),b.nc(34,"uppercase"),b.nc(35,"uppercase"),b.nc(36,"uppercase"),b.bc(),b.bc(),b.bc(),b.cc(37,"div",10),b.cc(38,"div",11),b.cc(39,"div",9),b.Lc(40,"\xa0"),b.bc(),b.bc(),b.bc(),b.cc(41,"div",10),b.cc(42,"div",7),b.cc(43,"div"),b.Lc(44,"Contract no.:"),b.bc(),b.bc(),b.cc(45,"div",8),b.cc(46,"div",9),b.Lc(47),b.bc(),b.bc(),b.bc(),b.cc(48,"div",6),b.cc(49,"div",7),b.cc(50,"div"),b.Lc(51,"PO no:"),b.bc(),b.bc(),b.cc(52,"div",8),b.cc(53,"div",9),b.Lc(54),b.bc(),b.bc(),b.bc(),b.cc(55,"div",10),b.cc(56,"div",7),b.cc(57,"div"),b.Lc(58,"Pick up location:"),b.bc(),b.bc(),b.cc(59,"div",8),b.cc(60,"div",9),b.Lc(61),b.bc(),b.bc(),b.bc(),b.cc(62,"div",10),b.cc(63,"div",11),b.cc(64,"div",9),b.Lc(65),b.nc(66,"uppercase"),b.Jc(67,Hc,3,3,"ng-container",12),b.bc(),b.bc(),b.bc(),b.cc(68,"div",10),b.cc(69,"div",11),b.cc(70,"div",9),b.Jc(71,Zc,3,3,"ng-container",12),b.Lc(72),b.nc(73,"uppercase"),b.nc(74,"uppercase"),b.nc(75,"uppercase"),b.bc(),b.bc(),b.bc(),b.cc(76,"div",10),b.cc(77,"div",11),b.cc(78,"div",9),b.Lc(79,"\xa0"),b.bc(),b.bc(),b.bc(),b.cc(80,"div",13),b.cc(81,"div",11),b.cc(82,"div",9),b.Lc(83,"\xa0"),b.bc(),b.bc(),b.bc(),b.cc(84,"div",14),b.cc(85,"div",15),b.cc(86,"table",16),b.cc(87,"thead"),b.cc(88,"tr"),b.cc(89,"th"),b.Lc(90,"No."),b.bc(),b.cc(91,"th"),b.Lc(92,"Vehicle No."),b.bc(),b.cc(93,"th"),b.Lc(94,"Driver"),b.bc(),b.cc(95,"th"),b.Lc(96,"I/C no."),b.bc(),b.cc(97,"th"),b.Lc(98,"Remarks"),b.bc(),b.cc(99,"th"),b.Lc(100,"Tonnage (MT)"),b.bc(),b.bc(),b.bc(),b.cc(101,"tbody"),b.cc(102,"td"),b.Lc(103,"1"),b.bc(),b.cc(104,"td"),b.Lc(105),b.bc(),b.cc(106,"td"),b.Lc(107),b.bc(),b.cc(108,"td"),b.Lc(109),b.bc(),b.cc(110,"td"),b.Lc(111),b.bc(),b.cc(112,"td"),b.Lc(113),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(114,"div",10),b.cc(115,"div",17),b.cc(116,"div",18),b.Lc(117,"\xa0"),b.bc(),b.bc(),b.Xb(118,"div",19),b.cc(119,"div",20),b.cc(120,"div",18),b.Lc(121,"\xa0"),b.bc(),b.bc(),b.bc(),b.cc(122,"div",6),b.cc(123,"div",17),b.cc(124,"div",21),b.Lc(125,"Prepared by:"),b.bc(),b.bc(),b.Xb(126,"div",19),b.cc(127,"div",20),b.cc(128,"div",21),b.Lc(129,"Received By:"),b.bc(),b.bc(),b.bc(),b.cc(130,"div",6),b.cc(131,"div",3),b.cc(132,"div",22),b.Lc(133),b.bc(),b.cc(134,"div",23),b.Lc(135),b.Jc(136,Qc,2,1,"ng-container",12),b.Jc(137,Yc,2,1,"ng-container",12),b.Lc(138),b.Xb(139,"br"),b.Lc(140),b.bc(),b.cc(141,"div",23),b.cc(142,"b"),b.Lc(143,"T"),b.bc(),b.Lc(144),b.cc(145,"b"),b.Lc(146,"F"),b.bc(),b.Jc(147,zc,2,1,"ng-container",12),b.bc(),b.bc(),b.bc(),b.cc(148,"div",24),b.cc(149,"div",3),b.cc(150,"button",25),b.kc("click",(function(){return b.Dc(t),b.mc().onBack()})),b.Xb(151,"i",26),b.Lc(152," Back"),b.bc(),b.cc(153,"a",27),b.Xb(154,"i",28),b.Lc(155," Print"),b.bc(),b.bc(),b.bc(),b.bc()}if(2&c){var i=b.mc();b.Kb(7),b.Mc(b.pc(8,37,i.data.issued_date,"d MMM yyyy")),b.Kb(8),b.Mc(i.data.do_num),b.Kb(7),b.Mc(i.data.recv_name),b.Kb(4),b.Nc(" ",b.oc(27,40,i.data.recv_addr_line_1),""),b.Kb(2),b.sc("ngIf",i.data.recv_addr_line_2),b.Kb(4),b.sc("ngIf",i.data.recv_addr_line_3),b.Kb(1),b.Qc(" ",i.data.recv_postcode,"\xa0",b.oc(34,42,i.data.recv_city),"\xa0 ",b.oc(35,44,i.data.recv_state.name),"\xa0",b.oc(36,46,i.data.recv_country.name)," "),b.Kb(14),b.Nc("",i.data.contract_num,"\xa0"),b.Kb(7),b.Mc(i.data.po_num),b.Kb(7),b.Mc(i.data.pickup_name),b.Kb(4),b.Nc(" ",b.oc(66,48,i.data.pickup_addr_line_1),""),b.Kb(2),b.sc("ngIf",i.data.pickup_addr_line_2),b.Kb(4),b.sc("ngIf",i.data.pickup_addr_line_3),b.Kb(1),b.Qc(" ",i.data.pickup_postcode,"\xa0",b.oc(73,50,i.data.pickup_city),"\xa0 ",b.oc(74,52,i.data.pickup_state.name),"\xa0",b.oc(75,54,i.data.pickup_country.name)," "),b.Kb(33),b.Mc(i.data.truck.registration_num),b.Kb(2),b.Mc(i.data.driver.name),b.Kb(2),b.Mc(i.data.driver.id_num),b.Kb(2),b.Mc(i.data.remarks),b.Kb(2),b.Mc(i.data.actual_weight),b.Kb(20),b.Oc("",i.data.issue_from.name," ",i.data.issue_from.registration_num,""),b.Kb(2),b.Nc(" ",i.data.issue_from.addr_line_1,", "),b.Kb(1),b.sc("ngIf",i.data.issue_from.addr_line_2),b.Kb(1),b.sc("ngIf",i.data.issue_from.addr_line_3),b.Kb(1),b.Oc(" \xa0",i.data.issue_from.postcode,"\xa0",i.data.issue_from.city,""),b.Kb(2),b.Oc(" ",i.data.issue_from.state.name,"\xa0",i.data.issue_from.country.name," "),b.Kb(4),b.Nc(" ",i.data.issue_from.contact_no,"\u2003|\u2003"),b.Kb(3),b.sc("ngIf",i.data.issue_from.fax_no),b.Kb(6),b.sc("routerLink",b.vc(56,$c,i.id))}}var ee,te,ie=((ee=function(){function c(e,t,i,r,n){_classCallCheck(this,c),this.route=e,this.router=t,this.authService=i,this.deliveryOrderService=r,this.toastr=n,this.isLoading=!1,this.data={id:""}}return _createClass(c,[{key:"ngOnInit",value:function(){var c=this;this.route.paramMap.subscribe((function(e){c.id=e.get("id"),c.load()}))}},{key:"load",value:function(){var c=this;y.a.isNull(this.id)||y.a.isUndefined(this.id)?this.isLoading=!1:(this.isLoading=!0,this.deliveryOrderService.edit(this.id).subscribe((function(e){c.data=e}),(function(c){}),(function(){c.isLoading=!1})))}},{key:"onBack",value:function(){this.router.navigate(["/ams/mining-company/delivery-order/list"])}}]),c}()).\u0275fac=function(c){return new(c||ee)(b.Wb(h.a),b.Wb(h.g),b.Wb(S.a),b.Wb(j.a),b.Wb(N.b))},ee.\u0275cmp=b.Qb({type:ee,selectors:[["app-delivery-order-detail"]],decls:8,vars:1,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-sm-12"],[1,"content"],["class","container-fluid",4,"ngIf"],[1,"row","mb-3"],[1,"col-sm-2"],[1,"col-sm-6"],[1,"border-bottom","border-dark"],[1,"row"],[1,"col-sm-6","offset-sm-2"],[4,"ngIf"],[1,"row","mb-4"],[1,"row","mb-5"],[1,"col-sm-12","table-responsive"],[1,"table","table-bordered"],[1,"col-sm-4","offset-sm-1"],[1,"border-bottom","border-dark","ml-3"],[1,"col-sm-4"],[1,"col-sm-3"],[1,"ml-3"],[1,"text-center","text-bold"],[1,"text-center"],[1,"row","mb-3","no-print"],["type","button",1,"btn","btn-outline-dark","mr-2",3,"click"],[1,"fas","fa-chevron-circle-left"],["target","_blank",1,"btn","btn-default",3,"routerLink"],[1,"fas","fa-print"]],template:function(c,e){1&c&&(b.cc(0,"section",0),b.cc(1,"div",1),b.cc(2,"div",2),b.cc(3,"div",3),b.cc(4,"h1"),b.Lc(5,"DELIVERY ORDER"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(6,"section",4),b.Jc(7,ce,156,58,"div",5),b.bc()),2&c&&(b.Kb(7),b.sc("ngIf",!e.isLoading))},directives:[a.m,h.h],pipes:[a.e,a.s],styles:[".table-bordered[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #000!important}"]}),ee),re=t("5Pgx"),ne=t("tk/3"),ae=t("AytR"),oe=((te=function(){function c(e){_classCallCheck(this,c),this.http=e,this.baseUrl=ae.a.baseUrl}return _createClass(c,[{key:"list",value:function(c,e,t,i){var r=(new ne.f).set("_page",c).set("_limit",e);return""!==t&&(""===i&&(i="asc"),r=r.append("sort","".concat(t,":").concat(i))),this.http.get(this.baseUrl+"/api/purchase-orders",{params:r,observe:"response"})}},{key:"search",value:function(c,e,t,i,r){var n=(new ne.f).set("_page",c).set("_limit",e);return""!==t&&(""===i&&(i="asc"),n=n.append("sort","".concat(t,":").concat(i))),this.http.post(this.baseUrl+"/api/purchase-orders",{keyword:r},{params:n,observe:"response"})}},{key:"create",value:function(c){return this.http.post(this.baseUrl+"/api/purchase-order",c)}},{key:"detail",value:function(c){return this.http.get("".concat(this.baseUrl,"/api/purchase-order/").concat(c))}}]),c}()).\u0275fac=function(c){return new(c||te)(b.gc(ne.b))},te.\u0275prov=b.Sb({token:te,factory:te.\u0275fac,providedIn:"root"}),te);function se(c,e){1&c&&(b.cc(0,"div",18),b.cc(1,"h4"),b.Lc(2,"No records found"),b.bc(),b.bc())}function de(c,e){if(1&c){var t=b.dc();b.cc(0,"tr"),b.cc(1,"td"),b.Lc(2),b.bc(),b.cc(3,"td"),b.Lc(4),b.bc(),b.cc(5,"td"),b.Lc(6),b.bc(),b.cc(7,"td"),b.Lc(8),b.nc(9,"date"),b.bc(),b.cc(10,"td"),b.Lc(11),b.bc(),b.cc(12,"td"),b.cc(13,"button",23),b.kc("click",(function(){b.Dc(t);var c=e.$implicit;return b.mc(2).onView(c)})),b.Xb(14,"i",24),b.bc(),b.bc(),b.bc()}if(2&c){var i=e.$implicit,r=b.mc(2);b.Kb(2),b.Mc(i.po_num),b.Kb(2),b.Mc(i.buyer.name),b.Kb(2),b.Mc(i.issue_to.name),b.Kb(2),b.Mc(b.pc(9,5,i.issued_date,"d MMM yyyy h:mm:ss aaa")),b.Kb(3),b.Mc(r.getPOStatus(i))}}function le(c,e){if(1&c){var t=b.dc();b.cc(0,"div",19),b.cc(1,"table",20),b.cc(2,"thead"),b.cc(3,"tr"),b.cc(4,"th"),b.cc(5,"app-sort-column",21),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.cc(6,"th"),b.cc(7,"app-sort-column",21),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.cc(8,"th"),b.cc(9,"app-sort-column",21),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.cc(10,"th"),b.cc(11,"app-sort-column",21),b.kc("onSortBy",(function(c){return b.Dc(t),b.mc().onSortBy(c)})),b.bc(),b.bc(),b.cc(12,"th"),b.Lc(13,"Status"),b.bc(),b.Xb(14,"th"),b.bc(),b.bc(),b.cc(15,"tbody"),b.Jc(16,de,15,8,"tr",22),b.bc(),b.bc(),b.bc()}if(2&c){var i=b.mc();b.Kb(5),b.sc("name","PO No.")("sort","po_num")("dir",i.sortDir)("current",i.sort),b.Kb(2),b.sc("name","Buyer")("sort","buyer__name")("dir",i.sortDir)("current",i.sort),b.Kb(2),b.sc("name","Issue To")("sort","issue_to__name")("dir",i.sortDir)("current",i.sort),b.Kb(2),b.sc("name","Issued Date")("sort","issued_date")("dir",i.sortDir)("current",i.sort),b.Kb(5),b.sc("ngForOf",i.list)}}function ue(c,e){if(1&c){var t=b.dc();b.cc(0,"div",25),b.cc(1,"div",26),b.cc(2,"pagination",27),b.kc("ngModelChange",(function(c){return b.Dc(t),b.mc().page=c}))("pageChanged",(function(c){return b.Dc(t),b.mc().pageChanged(c)})),b.bc(),b.bc(),b.bc()}if(2&c){var i=b.mc();b.Kb(2),b.sc("totalItems",i.totalCount)("itemsPerPage",i.pageSize)("maxSize",i.MAX_PAGE_NUMBERS)("ngModel",i.page)}}var be,me=((be=function(){function c(e,t,i,r){_classCallCheck(this,c),this.route=e,this.router=t,this.purchaseOrderService=i,this.msService=r,this.isLoading=!1,this.list=[],this.totalCount=0,this.pageSize=J.a.PAGE_SIZE,this.page=1,this.search="",this.sort="issued_date",this.sortDir="desc",this.sx=0,this.sy=0,this.uiState="mining-company.purchase-order-listing",this.isEmpty=L.a.isEmpty,this.PAGE_SIZE=J.a.PAGE_SIZE,this.MAX_PAGE_NUMBERS=J.a.MAX_PAGE_NUMBERS}return _createClass(c,[{key:"ngOnInit",value:function(){var c=this;this.subs=this.msService.get().subscribe((function(e){if(e.name===c.uiState){var t=e.data;c.page=t.page,c.sort=t.sort,c.sortDir=t.dir,c.search=t.search,c.sx=t.sx,c.sy=t.sy}})),this.load()}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}},{key:"load",value:function(){var c=this;""===this.search?(this.isLoading=!0,this.purchaseOrderService.list(this.page,J.a.PAGE_SIZE,this.sort,this.sortDir).subscribe((function(e){c.list=e.body,c.totalCount=Number(e.headers.get(J.a.HTTP_HEADER.X_TOTAL_COUNT)),c.isLoading=!1,setTimeout((function(){window.scrollTo(c.sx,c.sy)}),200)}),(function(c){}),(function(){c.isLoading=!1}))):this.onSearch(this.search)}},{key:"onSearch",value:function(c){var e=this;this.search=c,this.isLoading=!0,this.purchaseOrderService.search(this.page,J.a.PAGE_SIZE,this.sort,this.sortDir,c).subscribe((function(c){e.list=c.body,e.totalCount=Number(c.headers.get(J.a.HTTP_HEADER.X_TOTAL_COUNT)),e.isLoading=!1,setTimeout((function(){window.scrollTo(e.sx,e.sy)}),200)}),(function(c){}),(function(){e.isLoading=!1}))}},{key:"pageChanged",value:function(c){this.page=c.page,this.load()}},{key:"onSortBy",value:function(c){""===c.sort&&"asc"===c.dir?(this.sort="issued_date",this.sortDir="desc"):(this.sort=c.sort,this.sortDir=c.dir),this.load()}},{key:"goto",value:function(c){this.msService.send(this.uiState,{page:this.page,sort:this.sort,dir:this.sortDir,search:this.search,sx:window.scrollX,sy:window.scrollY}),this.router.navigate(["/ams/mining-company/purchase-order/"+c])}},{key:"onView",value:function(c){this.goto("detail/"+c.id)}},{key:"getPOStatus",value:function(c){return c.status===J.a.POStatus.IN_PROGRESS?"IN PROGRESS":c.status===J.a.POStatus.COMPLETED?"COMPLETED":c.status===J.a.POStatus.CANCELLED?"CANCELLED":c.status===J.a.POStatus.REJECTED?"REJECTED":"PENDING"}}]),c}()).\u0275fac=function(c){return new(c||be)(b.Wb(h.a),b.Wb(h.g),b.Wb(oe),b.Wb(H.a))},be.\u0275cmp=b.Qb({type:be,selectors:[["app-purchase-order-listing"]],decls:21,vars:4,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-6","col-12","p-1"],[3,"search","onSearch"],[1,"col-sm-6","col-12","p-1","text-right"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card-body"],["class","text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover"],[3,"name","sort","dir","current","onSortBy"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-eye"],[1,"card-footer"],[1,"float-right"],[3,"totalItems","itemsPerPage","maxSize","ngModel","ngModelChange","pageChanged"]],template:function(c,e){1&c&&(b.cc(0,"section",0),b.cc(1,"div",1),b.cc(2,"div",2),b.cc(3,"div",3),b.cc(4,"h1",4),b.Lc(5,"Purchase Order Listing"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(6,"section",5),b.cc(7,"div",1),b.cc(8,"div",6),b.cc(9,"div",7),b.cc(10,"div",8),b.cc(11,"div",9),b.cc(12,"app-search-input",10),b.kc("onSearch",(function(c){return e.onSearch(c)})),b.bc(),b.bc(),b.cc(13,"div",11),b.cc(14,"button",12),b.kc("click",(function(){return e.goto("create")})),b.Xb(15,"i",13),b.Lc(16," Issue PO"),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(17,"div",14),b.Jc(18,se,3,0,"div",15),b.Jc(19,le,17,17,"div",16),b.bc(),b.Jc(20,ue,3,4,"div",17),b.bc(),b.bc(),b.bc()),2&c&&(b.Kb(12),b.sc("search",e.search),b.Kb(6),b.sc("ngIf",e.isEmpty(e.list)&&!e.isLoading),b.Kb(1),b.sc("ngIf",!e.isEmpty(e.list)&&!e.isLoading),b.Kb(1),b.sc("ngIf",e.totalCount&&!e.isLoading))},directives:[Z.a,a.m,Q.a,a.l,u.a,o.j,o.l],pipes:[a.e],styles:[""]}),be),pe=t("mMBO");function ve(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," Buyer is required "),b.bc())}function _e(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," Material is required "),b.bc())}function fe(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," Truck is required "),b.bc())}function he(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," Driver is required "),b.bc())}function ge(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," Weight is required "),b.bc())}function ye(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," Weight is invalid "),b.bc())}function Le(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," Name is required "),b.bc())}function ke(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," Address is required "),b.bc())}function Ce(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," Postcode is required "),b.bc())}function Se(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," City is required "),b.bc())}function Ke(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," State is required "),b.bc())}function Ne(c,e){1&c&&(b.cc(0,"small",27),b.Lc(1," Country is required "),b.bc())}var Ee=function(c){return{"is-invalid":c}};function Ie(c,e){if(1&c){var t=b.dc();b.cc(0,"div",28),b.cc(1,"div",17),b.cc(2,"h3",18),b.Lc(3),b.bc(),b.cc(4,"div",29),b.cc(5,"button",30),b.kc("click",(function(){b.Dc(t);var c=e.$implicit;return b.mc().onRemoveMaterial(c)})),b.Xb(6,"i",31),b.bc(),b.bc(),b.bc(),b.cc(7,"div",32),b.cc(8,"div",9),b.cc(9,"label",33),b.Lc(10,"Material\xa0"),b.cc(11,"span",11),b.Lc(12,"*"),b.bc(),b.bc(),b.cc(13,"div",34),b.Xb(14,"ng-select",35),b.Jc(15,_e,2,0,"small",14),b.bc(),b.cc(16,"label",33),b.Lc(17,"Truck\xa0"),b.cc(18,"span",11),b.Lc(19,"*"),b.bc(),b.bc(),b.cc(20,"div",34),b.Xb(21,"ng-select",36),b.Jc(22,fe,2,0,"small",14),b.bc(),b.cc(23,"label",33),b.Lc(24,"Driver\xa0"),b.cc(25,"span",11),b.Lc(26,"*"),b.bc(),b.bc(),b.cc(27,"div",34),b.Xb(28,"ng-select",37),b.Jc(29,he,2,0,"small",14),b.bc(),b.bc(),b.cc(30,"div",9),b.cc(31,"label",33),b.Lc(32,"Weight\xa0"),b.cc(33,"span",11),b.Lc(34,"*"),b.bc(),b.bc(),b.cc(35,"div",34),b.Xb(36,"input",38),b.Jc(37,ge,2,0,"small",14),b.Jc(38,ye,2,0,"small",14),b.bc(),b.cc(39,"label",33),b.Lc(40,"tons"),b.bc(),b.bc(),b.cc(41,"div",15),b.cc(42,"div",16),b.cc(43,"h4",18),b.Lc(44,"Receiver Details"),b.bc(),b.Xb(45,"br"),b.Xb(46,"hr"),b.bc(),b.bc(),b.cc(47,"div",9),b.cc(48,"label",33),b.Lc(49,"Name\xa0"),b.cc(50,"span",11),b.Lc(51,"*"),b.bc(),b.bc(),b.cc(52,"div",39),b.Xb(53,"input",40),b.Jc(54,Le,2,0,"small",14),b.bc(),b.bc(),b.cc(55,"div",9),b.cc(56,"label",33),b.Lc(57,"Address\xa0"),b.cc(58,"span",11),b.Lc(59,"*"),b.bc(),b.bc(),b.cc(60,"div",39),b.Xb(61,"input",41),b.Jc(62,ke,2,0,"small",14),b.bc(),b.bc(),b.cc(63,"div",9),b.cc(64,"div",42),b.Xb(65,"input",43),b.bc(),b.bc(),b.cc(66,"div",9),b.cc(67,"div",42),b.Xb(68,"input",44),b.bc(),b.bc(),b.cc(69,"div",9),b.cc(70,"label",33),b.Lc(71,"Postcode\xa0"),b.cc(72,"span",11),b.Lc(73,"*"),b.bc(),b.bc(),b.cc(74,"div",45),b.Xb(75,"input",46),b.Jc(76,Ce,2,0,"small",14),b.bc(),b.cc(77,"label",33),b.Lc(78,"City\xa0"),b.cc(79,"span",11),b.Lc(80,"*"),b.bc(),b.bc(),b.cc(81,"div",47),b.Xb(82,"input",48),b.Jc(83,Se,2,0,"small",14),b.bc(),b.bc(),b.cc(84,"div",9),b.cc(85,"label",33),b.Lc(86,"State\xa0"),b.cc(87,"span",11),b.Lc(88,"*"),b.bc(),b.bc(),b.cc(89,"div",45),b.Xb(90,"ng-select",49),b.Jc(91,Ke,2,0,"small",14),b.bc(),b.cc(92,"label",33),b.Lc(93,"Country\xa0"),b.cc(94,"span",11),b.Lc(95,"*"),b.bc(),b.bc(),b.cc(96,"div",47),b.cc(97,"ng-select",50),b.kc("change",(function(c){b.Dc(t);var i=e.$implicit;return b.mc().onChangeReceiverCountry(c,i)})),b.bc(),b.Jc(98,Ne,2,0,"small",14),b.bc(),b.bc(),b.bc(),b.bc()}if(2&c){var i=e.$implicit,r=e.index,n=b.mc();b.Kb(3),b.Nc("Item #",r+1,""),b.Kb(4),b.sc("formGroupName",r),b.Kb(7),b.sc("items",n.materialList),b.Kb(1),b.sc("ngIf",n.invalidFg(i,"truck_id")&&n.hasErrorFg(i,"truck_id","required")),b.Kb(6),b.sc("items",n.truckList),b.Kb(1),b.sc("ngIf",n.invalidFg(i,"truck_id")&&n.hasErrorFg(i,"truck_id","required")),b.Kb(6),b.sc("items",n.driverList),b.Kb(1),b.sc("ngIf",n.invalidFg(i,"driver_id")&&n.hasErrorFg(i,"driver_id","required")),b.Kb(7),b.sc("ngClass",b.vc(23,Ee,n.invalidFg(i,"weight"))),b.Kb(1),b.sc("ngIf",n.invalidFg(i,"weight")&&n.hasErrorFg(i,"weight","required")),b.Kb(1),b.sc("ngIf",n.invalidFg(i,"weight")&&n.hasErrorFg(i,"weight","pattern")),b.Kb(15),b.sc("ngClass",b.vc(25,Ee,n.invalidFg(i,"recv_name"))),b.Kb(1),b.sc("ngIf",n.invalidFg(i,"recv_name")&&n.hasErrorFg(i,"recv_name","required")),b.Kb(7),b.sc("ngClass",b.vc(27,Ee,n.invalidFg(i,"recv_addr_line_1"))),b.Kb(1),b.sc("ngIf",n.invalidFg(i,"recv_addr_line_1")&&n.hasErrorFg(i,"recv_addr_line_1","required")),b.Kb(13),b.sc("ngClass",b.vc(29,Ee,n.invalidFg(i,"recv_postcode"))),b.Kb(1),b.sc("ngIf",n.invalidFg(i,"recv_postcode")&&n.hasErrorFg(i,"recv_postcode","required")),b.Kb(6),b.sc("ngClass",b.vc(31,Ee,n.invalidFg(i,"recv_city"))),b.Kb(1),b.sc("ngIf",n.invalidFg(i,"recv_city")&&n.hasErrorFg(i,"recv_city","required")),b.Kb(7),b.sc("items",n.getStateList(i)),b.Kb(1),b.sc("ngIf",n.invalidFg(i,"recv_state_id")&&n.hasErrorFg(i,"recv_state_id","required")),b.Kb(6),b.sc("items",n.countryList),b.Kb(1),b.sc("ngIf",n.invalidFg(i,"recv_country_id")&&n.hasErrorFg(i,"recv_country_id","required"))}}function Me(c,e){if(1&c&&(b.ac(0),b.Lc(1),b.nc(2,"uppercase"),b.Zb()),2&c){var t=b.mc(2);b.Kb(1),b.Nc(", ",b.oc(2,1,t.data.buyer.addr_line_2),"")}}function we(c,e){if(1&c&&(b.ac(0),b.Lc(1,","),b.Xb(2,"br"),b.Lc(3),b.nc(4,"uppercase"),b.Zb()),2&c){var t=b.mc(2);b.Kb(3),b.Mc(b.oc(4,1,t.data.buyer.addr_line_3))}}function Oe(c,e){if(1&c&&(b.ac(0),b.Lc(1),b.nc(2,"uppercase"),b.Zb()),2&c){var t=b.mc(2);b.Kb(1),b.Nc(", ",b.oc(2,1,t.data.issue_to.addr_line_2),"")}}function Ae(c,e){if(1&c&&(b.ac(0),b.Lc(1,","),b.Xb(2,"br"),b.Lc(3),b.nc(4,"uppercase"),b.Zb()),2&c){var t=b.mc(2);b.Kb(3),b.Mc(b.oc(4,1,t.data.issue_to.addr_line_3))}}function De(c,e){if(1&c&&(b.ac(0),b.Lc(1),b.nc(2,"uppercase"),b.Zb()),2&c){var t=b.mc().$implicit;b.Kb(1),b.Nc(", ",b.oc(2,1,t.recv_addr_line_2),"")}}function Pe(c,e){if(1&c&&(b.ac(0),b.Lc(1),b.nc(2,"uppercase"),b.Zb()),2&c){var t=b.mc().$implicit;b.Kb(1),b.Nc(", ",b.oc(2,1,t.recv_addr_line_3),"")}}function xe(c,e){if(1&c&&(b.ac(0),b.cc(1,"tr"),b.cc(2,"td"),b.Lc(3),b.bc(),b.cc(4,"td"),b.Lc(5),b.bc(),b.cc(6,"td"),b.Lc(7),b.bc(),b.cc(8,"td"),b.Lc(9),b.bc(),b.cc(10,"td"),b.Lc(11),b.bc(),b.cc(12,"td"),b.Lc(13),b.bc(),b.cc(14,"td"),b.Lc(15),b.bc(),b.bc(),b.cc(16,"tr"),b.cc(17,"td",26),b.Lc(18),b.Xb(19,"br"),b.Lc(20),b.nc(21,"uppercase"),b.Jc(22,De,3,3,"ng-container",13),b.Jc(23,Pe,3,3,"ng-container",13),b.Lc(24),b.nc(25,"uppercase"),b.nc(26,"uppercase"),b.nc(27,"uppercase"),b.bc(),b.bc(),b.Zb()),2&c){var t=e.$implicit,i=e.index;b.Kb(3),b.Mc(i+1),b.Kb(2),b.Pc("",t.material.name," ",t.material.material_type," ",t.material.grade,""),b.Kb(2),b.Mc(t.truck.registration_num),b.Kb(2),b.Mc(t.driver.name),b.Kb(2),b.Mc(t.driver.id_num),b.Kb(2),b.Mc(t.weight),b.Kb(2),b.Mc(t.do_num),b.Kb(3),b.Nc(" Destination: ",t.recv_name,""),b.Kb(2),b.Nc(" ",b.oc(21,17,t.recv_addr_line_1),""),b.Kb(2),b.sc("ngIf",t.recv_addr_line_2),b.Kb(1),b.sc("ngIf",t.recv_addr_line_3),b.Kb(1),b.Qc(" ",t.recv_postcode," ",b.oc(25,19,t.recv_city)," ",b.oc(26,21,t.recv_state.name),", ",b.oc(27,23,t.recv_country.name)," ")}}var Te=function(c){return["/purchase-order",c,"print"]};function Re(c,e){if(1&c){var t=b.dc();b.cc(0,"div",1),b.cc(1,"div",7),b.cc(2,"div",8),b.cc(3,"div",9),b.cc(4,"div",7),b.cc(5,"div",8),b.cc(6,"h4"),b.cc(7,"small",10),b.Lc(8),b.nc(9,"date"),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(10,"div",11),b.cc(11,"div",12),b.Lc(12," From "),b.cc(13,"address"),b.cc(14,"strong"),b.Lc(15),b.bc(),b.Xb(16,"br"),b.Lc(17),b.Xb(18,"br"),b.Lc(19),b.nc(20,"uppercase"),b.Jc(21,Me,3,3,"ng-container",13),b.Jc(22,we,5,3,"ng-container",13),b.Xb(23,"br"),b.Lc(24),b.nc(25,"uppercase"),b.Xb(26,"br"),b.Lc(27),b.nc(28,"uppercase"),b.nc(29,"uppercase"),b.Xb(30,"br"),b.Lc(31),b.Xb(32,"br"),b.Lc(33),b.bc(),b.bc(),b.cc(34,"div",12),b.Lc(35," To "),b.cc(36,"address"),b.cc(37,"strong"),b.Lc(38),b.bc(),b.Xb(39,"br"),b.Lc(40),b.Xb(41,"br"),b.Lc(42),b.nc(43,"uppercase"),b.Jc(44,Oe,3,3,"ng-container",13),b.Jc(45,Ae,5,3,"ng-container",13),b.Xb(46,"br"),b.Lc(47),b.nc(48,"uppercase"),b.Xb(49,"br"),b.Lc(50),b.nc(51,"uppercase"),b.nc(52,"uppercase"),b.Xb(53,"br"),b.Lc(54),b.Xb(55,"br"),b.Lc(56),b.bc(),b.bc(),b.cc(57,"div",14),b.cc(58,"b"),b.Lc(59),b.bc(),b.Xb(60,"br"),b.bc(),b.bc(),b.cc(61,"div",7),b.cc(62,"div",15),b.cc(63,"table",16),b.cc(64,"thead"),b.cc(65,"tr"),b.cc(66,"th"),b.Lc(67,"#"),b.bc(),b.cc(68,"th"),b.Lc(69,"Material"),b.bc(),b.cc(70,"th"),b.Lc(71,"Truck"),b.bc(),b.cc(72,"th"),b.Lc(73,"Driver"),b.bc(),b.cc(74,"th"),b.Lc(75,"I/C No."),b.bc(),b.cc(76,"th"),b.Lc(77,"Weight (tons)"),b.bc(),b.cc(78,"th"),b.Lc(79,"DO No."),b.bc(),b.bc(),b.bc(),b.cc(80,"tbody"),b.Jc(81,xe,28,25,"ng-container",17),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(82,"div",18),b.cc(83,"div",8),b.cc(84,"button",19),b.kc("click",(function(){return b.Dc(t),b.mc().onBack()})),b.Xb(85,"i",20),b.Lc(86," Back"),b.bc(),b.cc(87,"button",21),b.kc("cbOnSuccess",(function(c){return b.Dc(t),b.mc().onCopySuccess(c)})),b.Lc(88,"Copy"),b.bc(),b.cc(89,"button",22),b.kc("click",(function(){return b.Dc(t),b.mc().onWhatsapp()})),b.Xb(90,"i",23),b.bc(),b.cc(91,"a",24),b.Xb(92,"i",25),b.Lc(93," Print"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc()}if(2&c){var i=b.mc();b.Kb(8),b.Nc("Date: ",b.pc(9,27,i.data.issued_date,"d MMM yyyy"),""),b.Kb(7),b.Mc(i.data.buyer.name),b.Kb(2),b.Nc("",i.data.buyer.registration_num," "),b.Kb(2),b.Mc(b.oc(20,30,i.data.buyer.addr_line_1)),b.Kb(2),b.sc("ngIf",i.data.buyer.addr_line_2),b.Kb(1),b.sc("ngIf",i.data.buyer.addr_line_3),b.Kb(2),b.Oc("",i.data.buyer.postcode," ",b.oc(25,32,i.data.buyer.city)," "),b.Kb(3),b.Oc("",b.oc(28,34,i.data.buyer.state.name),", ",b.oc(29,36,i.data.buyer.country.name)," "),b.Kb(4),b.Nc("Phone: ",i.data.buyer.contact_no," "),b.Kb(2),b.Nc("Email: ",i.data.buyer.email," "),b.Kb(5),b.Mc(i.data.issue_to.name),b.Kb(2),b.Nc("",i.data.issue_to.registration_num," "),b.Kb(2),b.Mc(b.oc(43,38,i.data.issue_to.addr_line_1)),b.Kb(2),b.sc("ngIf",i.data.issue_to.addr_line_2),b.Kb(1),b.sc("ngIf",i.data.issue_to.addr_line_3),b.Kb(2),b.Oc("",i.data.issue_to.postcode," ",b.oc(48,40,i.data.issue_to.city)," "),b.Kb(3),b.Oc("",b.oc(51,42,i.data.issue_to.state.name),", ",b.oc(52,44,i.data.issue_to.country.name)," "),b.Kb(4),b.Nc("Phone: ",i.data.issue_to.contact_no," "),b.Kb(2),b.Nc("Email: ",i.data.issue_to.email," "),b.Kb(3),b.Nc("Purchase Order #",i.data.po_num,""),b.Kb(22),b.sc("ngForOf",i.data.details),b.Kb(6),b.sc("cbContent",i.getPODetails()),b.Kb(4),b.sc("routerLink",b.vc(46,Te,i.id))}}var qe,Xe,Fe,Je,Be=[{path:"company-details",component:F},{path:"delivery-order",children:[{path:"list",component:oc},{path:"create",component:Pc},{path:"edit/:id",component:Pc},{path:"detail/:id",component:ie}]},{path:"permit/:id",component:Xc},{path:"purchase-order",children:[{path:"list",component:me},{path:"create",component:(Xe=function(c){_inherits(t,c);var e=_createSuper(t);function t(c,i,r,n,a,o,s){var d;return _classCallCheck(this,t),(d=e.call(this)).fb=c,d.route=i,d.router=r,d.authService=n,d.lookupService=a,d.purchaseOrderService=o,d.toastr=s,d.isLoading=!1,d.buyerList=[],d.materialList=[],d.truckList=[],d.driverList=[],d.countryList=[],d.createForm(),d}return _createClass(t,[{key:"ngOnInit",value:function(){var c=this.authService.loadUser();this.mining_company_id=c.mining_company_id,this.load()}},{key:"createForm",value:function(){this.mform=this.fb.group({buyer_id:[null,[o.p.required]],materialForms:this.fb.array([])})}},{key:"createMaterialForm",value:function(){return this.fb.group({id:[y.a.uniqueId()],material_id:[null],weight:["0",[o.p.required,o.p.pattern(J.a.VALIDATE.AMOUNT)]],truck_id:[null,[o.p.required]],driver_id:[null,[o.p.required]],recv_name:["",[o.p.required]],recv_addr_line_1:["",[o.p.required]],recv_addr_line_2:[""],recv_addr_line_3:[""],recv_postcode:["",[o.p.required]],recv_city:["",[o.p.required]],recv_state_id:[null,[o.p.required]],recv_country_id:[null,[o.p.required]],stateList:[[]]})}},{key:"load",value:function(){var c=this;this.isLoading=!0;var e=this.lookupService.listBuyer(),t=this.lookupService.listMaterial(this.mining_company_id),i=this.lookupService.listCountry();Object(sc.a)([e,t,i]).subscribe((function(e){c.buyerList=e[0],c.materialList=e[1],c.countryList=e[2],c.materialList=e[1].map((function(c){return c.label="".concat(c.name," (").concat(c.material_type,") - ").concat(c.grade),c}))}),(function(c){}),(function(){c.isLoading=!1}))}},{key:"onBack",value:function(){this.router.navigate(["/ams/mining-company/purchase-order/list"])}},{key:"onAddMaterial",value:function(){var c=this.materialForms,e=this.createMaterialForm();e.patchValue({recv_country_id:this.countryList[0].id}),this.onChangeReceiverCountry(this.countryList[0],e),c.insert(0,e)}},{key:"onRemoveMaterial",value:function(c){var e=this.materialForms,t=y.a.reject(e.controls,(function(e){return e.controls.id.value===c.controls.id.value}));e.controls=t}},{key:"onSubmit",value:function(){var c=this;if(this.mform.invalid)this.mform.markAllAsTouched();else{var e=this.materialForms.value.map((function(c){return{material_id:c.material_id,truck_id:c.truck_id,driver_id:c.driver_id,weight:c.weight,recv_name:c.recv_name,recv_addr_line_1:c.recv_addr_line_1,recv_addr_line_2:c.recv_addr_line_2,recv_addr_line_3:c.recv_addr_line_3,recv_postcode:c.recv_postcode,recv_city:c.recv_city,recv_state_id:c.recv_state_id,recv_country_id:c.recv_country_id}}));this.purchaseOrderService.create({buyer_id:this.mform.value.buyer_id,issue_to_id:this.mining_company_id,purchase_order_detail:e}).subscribe((function(e){c.toastr.success("New Purchase Order successfully created"),c.mform.reset()}))}}},{key:"onChangeBuyer",value:function(c){var e=this,t=this.lookupService.listTruck(c.id),i=this.lookupService.listDriver(c.id);Object(sc.a)([t,i]).subscribe((function(c){e.truckList=c[0],e.driverList=c[1],e.driverList=c[1].map((function(c){return c.label="".concat(c.name," - ").concat(c.id_num),c})),y.a.each(e.materialForms.controls,(function(c){c.patchValue({truck_id:null,driver_id:null})}))}))}},{key:"onChangeReceiverCountry",value:function(c,e){this.lookupService.listStates(c.id).subscribe((function(c){e.patchValue({state_id:null,stateList:c})}))}},{key:"getStateList",value:function(c){return c.controls.stateList.value}},{key:"invalidFg",value:function(c,e){var t=c.controls[e];return t.invalid&&(t.dirty||t.touched)}},{key:"hasErrorFg",value:function(c,e,t){return c.controls[e].hasError(t)}},{key:"materialForms",get:function(){return this.mform.get("materialForms")}}]),t}(k.a),Xe.\u0275fac=function(c){return new(c||Xe)(b.Wb(o.c),b.Wb(h.a),b.Wb(h.g),b.Wb(S.a),b.Wb(C.a),b.Wb(pe.a),b.Wb(N.b))},Xe.\u0275cmp=b.Qb({type:Xe,selectors:[["app-purchase-order-create"]],features:[b.Hb],decls:40,vars:4,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-2","col-form-label"],[1,"text-danger"],[1,"col-sm-10"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","buyer_id","name","buyer_id",3,"items","change"],["class","badge badge-danger",4,"ngIf"],[1,"row"],[1,"col-sm-12"],[1,"card-header"],[1,"card-title"],[1,"col-sm-2","col-4"],["type","button",1,"btn","btn-primary",3,"click"],["class","card","formArrayName","materialForms",4,"ngFor","ngForOf"],[1,"card-footer"],["type","button",1,"btn","btn-outline-dark","mr-2",3,"click"],[1,"fas","fa-chevron-circle-left"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],[1,"badge","badge-danger"],["formArrayName","materialForms",1,"card"],[1,"card-tools"],["type","button",1,"btn","btn-tool",3,"click"],[1,"fas","fa-times"],[1,"card-body",3,"formGroupName"],[1,"col-sm-1","col-form-label"],[1,"col-sm-2"],["bindLabel","label","bindValue","id","placeholder","Please select","formControlName","material_id","name","material_id",3,"items"],["bindLabel","registration_num","bindValue","id","placeholder","Please select","formControlName","truck_id","name","truck_id",3,"items"],["bindLabel","label","bindValue","id","placeholder","Please select","formControlName","driver_id","name","driver_id",3,"items"],["type","text","placeholder","Weight (tons)","name","weight","formControlName","weight",1,"form-control",3,"ngClass"],[1,"col-sm-11"],["type","text","placeholder","Name","name","recv_name","formControlName","recv_name",1,"form-control",3,"ngClass"],["type","text","placeholder","Address","name","recv_addr_line_1","formControlName","recv_addr_line_1",1,"form-control",3,"ngClass"],[1,"col-sm-11","offset-sm-1"],["type","text","placeholder","Address 2","name","recv_addr_line_2","formControlName","recv_addr_line_2",1,"form-control"],["type","text","placeholder","Address 3","name","recv_addr_line_3","formControlName","recv_addr_line_3",1,"form-control"],[1,"col-sm-3"],["type","text","placeholder","Postcode","name","recv_postcode","formControlName","recv_postcode",1,"form-control",3,"ngClass"],[1,"col-sm-7"],["type","text","placeholder","City","name","recv_city","formControlName","recv_city",1,"form-control",3,"ngClass"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","recv_state_id","name","recv_state_id",3,"items"],["bindLabel","name","bindValue","id","placeholder","Please select","name","recv_country_id","formControlName","recv_country_id",3,"items","change"]],template:function(c,e){1&c&&(b.cc(0,"section",0),b.cc(1,"div",1),b.cc(2,"div",2),b.cc(3,"div",3),b.cc(4,"h1",4),b.Lc(5,"Issue Purchase Order"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(6,"section",5),b.cc(7,"div",1),b.cc(8,"form",6),b.kc("ngSubmit",(function(){return e.onSubmit()})),b.cc(9,"div",7),b.cc(10,"div",8),b.cc(11,"div",9),b.cc(12,"label",10),b.Lc(13,"Buyer\xa0"),b.cc(14,"span",11),b.Lc(15,"*"),b.bc(),b.bc(),b.cc(16,"div",12),b.cc(17,"ng-select",13),b.kc("change",(function(c){return e.onChangeBuyer(c)})),b.bc(),b.Jc(18,ve,2,0,"small",14),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(19,"div",15),b.cc(20,"div",16),b.cc(21,"div",7),b.cc(22,"div",17),b.cc(23,"h3",18),b.Lc(24,"Materials"),b.bc(),b.bc(),b.cc(25,"div",8),b.cc(26,"div",9),b.cc(27,"div",19),b.ac(28),b.cc(29,"button",20),b.kc("click",(function(){return e.onAddMaterial()})),b.Lc(30,"Add Material"),b.bc(),b.Zb(),b.bc(),b.bc(),b.Jc(31,Ie,99,33,"div",21),b.bc(),b.cc(32,"div",22),b.cc(33,"div",3),b.cc(34,"button",23),b.kc("click",(function(){return e.onBack()})),b.Xb(35,"i",24),b.Lc(36," Back"),b.bc(),b.cc(37,"button",25),b.Xb(38,"i",26),b.Lc(39," Submit"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc()),2&c&&(b.Kb(8),b.sc("formGroup",e.mform),b.Kb(9),b.sc("items",e.buyerList),b.Kb(1),b.sc("ngIf",e.invalid("buyer_id")&&e.f.buyer_id.hasError("required")),b.Kb(13),b.sc("ngForOf",e.materialForms.controls))},directives:[o.q,o.k,o.e,s.a,o.j,o.d,a.m,a.l,o.b,o.f,o.a,a.k],styles:[""]}),Xe)},{path:"detail/:id",component:(qe=function(){function c(e,t,i,r,n){_classCallCheck(this,c),this.route=e,this.router=t,this.authService=i,this.purchaseOrderService=r,this.toastr=n,this.isLoading=!1,this.data={id:""}}return _createClass(c,[{key:"ngOnInit",value:function(){var c=this;this.route.paramMap.subscribe((function(e){c.id=e.get("id"),c.load()}))}},{key:"load",value:function(){var c=this;y.a.isNull(this.id)||y.a.isUndefined(this.id)?this.isLoading=!1:(this.isLoading=!0,this.purchaseOrderService.detail(this.id).subscribe((function(e){c.data=e}),(function(c){}),(function(){c.isLoading=!1})))}},{key:"onBack",value:function(){this.router.navigate(["/ams/mining-company/purchase-order/list"])}},{key:"onCopySuccess",value:function(c){this.toastr.success("DO Details copied")}},{key:"onWhatsapp",value:function(){var c=this.getPODetails();c=encodeURIComponent(c);var e=""+this.data.issue_to.contact_no;e&&e.indexOf("60")<0&&(e="6"+e),window.open("https://api.whatsapp.com/send?phone=".concat(e,"&text=").concat(c),"_blank")}},{key:"getPODetails",value:function(){var c=[];return y.a.each(this.data.details,(function(e){var t="DO #".concat(e.do_num,"\n");t+="Material: ".concat(e.material.name,", Type: ").concat(e.material.material_type,", Grade: ").concat(e.material.grade,"\n"),t+="Truck No: ".concat(e.truck.registration_num,"\n"),t+="Driver: ".concat(e.driver.name,", IC No.: ").concat(e.driver.id_num,"\n\n"),c.push(t)})),c.join("-----------------------------\n\n")}}]),c}(),qe.\u0275fac=function(c){return new(c||qe)(b.Wb(h.a),b.Wb(h.g),b.Wb(S.a),b.Wb(oe),b.Wb(N.b))},qe.\u0275cmp=b.Qb({type:qe,selectors:[["app-purchase-order-detail"]],decls:9,vars:1,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-sm-10"],[1,"col-sm-2"],[1,"content"],["class","container-fluid",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"invoice","p-3","mb-3"],[1,"float-right"],[1,"row","invoice-info"],[1,"col-sm-6","invoice-col"],[4,"ngIf"],[1,"col-sm-4","invoice-col"],[1,"col-12","table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"row","no-print"],["type","button",1,"btn","btn-outline-dark","mr-2",3,"click"],[1,"fas","fa-chevron-circle-left"],["type","button","ngxClipboard","",1,"btn","btn-default","mr-2",3,"cbContent","cbOnSuccess"],["type","button",1,"btn","btn-success","mr-2",3,"click"],[1,"fab","fa-whatsapp"],["target","_blank",1,"btn","btn-default",3,"routerLink"],[1,"fas","fa-print"],["colspan","7"]],template:function(c,e){1&c&&(b.cc(0,"section",0),b.cc(1,"div",1),b.cc(2,"div",2),b.cc(3,"div",3),b.cc(4,"h1"),b.Lc(5,"Purchase Order"),b.bc(),b.bc(),b.Xb(6,"div",4),b.bc(),b.bc(),b.bc(),b.cc(7,"section",5),b.Jc(8,Re,94,48,"div",6),b.bc()),2&c&&(b.Kb(8),b.sc("ngIf",!e.isLoading))},directives:[a.m,a.l,_,h.h],pipes:[a.e,a.s],styles:[""]}),qe)}]},{path:"buyer",children:[{path:"list",component:Fc.a},{path:"create",component:Jc.a},{path:"edit/:id",component:Jc.a},{path:"truck/:buyer_id",children:[{path:"list",component:Bc.a},{path:"create",component:Wc.a},{path:"edit/:id",component:Wc.a}]},{path:"driver/:buyer_id",children:[{path:"list",component:Uc.a},{path:"create",component:Vc.a},{path:"edit/:id",component:Vc.a}]},{path:"user/:buyer_id",children:[{path:"list",component:re.a}]}]}],We=((Fe=function c(){_classCallCheck(this,c)}).\u0275mod=b.Ub({type:Fe}),Fe.\u0275inj=b.Tb({factory:function(c){return new(c||Fe)},imports:[[h.i.forChild(Be)],h.i]}),Fe),Ue=t("jgPy"),Ve=t("mrcu"),Ge=t("Thox"),je=t("DLVw"),He=t("WF//"),Ze=((Je=function c(){_classCallCheck(this,c)}).\u0275mod=b.Ub({type:Je}),Je.\u0275inj=b.Tb({factory:function(c){return new(c||Je)},providers:[Ve.a,Ge.a,j.a,xc.a,je.a,dc.a,lc.a,He.a,oe],imports:[[a.c,We,o.g,o.n,Ue.a,s.b,d.c.forRoot(),l.c.forRoot(),u.b.forRoot(),f]]}),Je)}}]);