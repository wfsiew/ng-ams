(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{VOPl:function(t,c,i){"use strict";i.r(c),i.d(c,"SetupModule",(function(){return oc}));var s=i("ofXK"),e=i("3Pt+"),r=i("ZOsW"),n=i("LqlI"),o=i("ienR"),a=i("6No5"),d=i("tyNb"),l=i("d2bA"),b=i("C7yL"),h=i("g/JT"),m=i("fXoL"),u=i("tk/3"),p=i("AytR");let g=(()=>{class t{constructor(t){this.http=t,this.baseUrl=p.a.baseUrl}list(t,c,i,s){let e=(new u.f).set("_page",t).set("_limit",c);return""!==i&&(""===s&&(s="asc"),e=e.append("sort",`${i}:${s}`)),this.http.get(this.baseUrl+"/api/users",{params:e,observe:"response"})}search(t,c,i,s,e){let r=(new u.f).set("_page",t).set("_limit",c);return""!==i&&(""===s&&(s="asc"),r=r.append("sort",`${i}:${s}`)),this.http.post(this.baseUrl+"/api/users",{keyword:e},{params:r,observe:"response"})}create(t){return this.http.post(this.baseUrl+"/api/user",t)}edit(t){return this.http.get(`${this.baseUrl}/api/user/${t}`)}update(t,c){return this.http.put(`${this.baseUrl}/api/user/${t}`,c)}remove(t){return this.http.delete(`${this.baseUrl}/api/user/${t}`)}}return t.\u0275fac=function(c){return new(c||t)(m.gc(u.b))},t.\u0275prov=m.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=i("QLLi"),v=i("5eHb"),y=i("OpGx"),_=i("C4D8");function S(t,c){1&t&&(m.cc(0,"div",18),m.cc(1,"h4"),m.Lc(2,"No records found"),m.bc(),m.bc())}function L(t,c){if(1&t){const t=m.dc();m.cc(0,"tr"),m.cc(1,"td"),m.Lc(2),m.bc(),m.cc(3,"td"),m.Lc(4),m.bc(),m.cc(5,"td"),m.Lc(6),m.bc(),m.cc(7,"td"),m.Lc(8),m.bc(),m.cc(9,"td"),m.Lc(10),m.bc(),m.cc(11,"td",23),m.cc(12,"button",24),m.kc("click",(function(){m.Dc(t);const i=c.$implicit;return m.mc(2).onEdit(i)})),m.Xb(13,"i",25),m.bc(),m.cc(14,"button",26),m.kc("click",(function(){m.Dc(t);const i=c.$implicit;return m.mc(2).onDelete(i)})),m.Xb(15,"i",27),m.bc(),m.bc(),m.bc()}if(2&t){const t=c.$implicit,i=m.mc(2);m.Kb(2),m.Mc(t.username),m.Kb(2),m.Mc(t.email),m.Kb(2),m.Mc(t.first_name),m.Kb(2),m.Mc(t.last_name),m.Kb(2),m.Mc(i.getUserRoles(t))}}function E(t,c){if(1&t){const t=m.dc();m.cc(0,"div",19),m.cc(1,"table",20),m.cc(2,"thead"),m.cc(3,"tr"),m.cc(4,"th"),m.cc(5,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(6,"th"),m.cc(7,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(8,"th"),m.cc(9,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(10,"th"),m.cc(11,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(12,"th"),m.Lc(13,"Role"),m.bc(),m.Xb(14,"th"),m.bc(),m.bc(),m.cc(15,"tbody"),m.Jc(16,L,16,5,"tr",22),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(5),m.sc("name","Username")("sort","username")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Email")("sort","email")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","First name")("sort","first_name")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Last name")("sort","last_name")("dir",t.sortDir)("current",t.sort),m.Kb(5),m.sc("ngForOf",t.list)}}function k(t,c){if(1&t){const t=m.dc();m.cc(0,"div",28),m.cc(1,"div",29),m.cc(2,"pagination",30),m.kc("ngModelChange",(function(c){return m.Dc(t),m.mc().page=c}))("pageChanged",(function(c){return m.Dc(t),m.mc().pageChanged(c)})),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(2),m.sc("totalItems",t.totalCount)("itemsPerPage",t.pageSize)("maxSize",t.MAX_PAGE_NUMBERS)("ngModel",t.page)}}let C=(()=>{class t{constructor(t,c,i,s,e){this.router=t,this.userService=c,this.msService=i,this.toastr=s,this.modalService=e,this.isLoading=!1,this.list=[],this.totalCount=0,this.pageSize=b.a.PAGE_SIZE,this.page=1,this.search="",this.sort="username",this.sortDir="asc",this.sx=0,this.sy=0,this.uiState="setup.user.user-listing",this.isEmpty=h.a.isEmpty,this.PAGE_SIZE=b.a.PAGE_SIZE,this.MAX_PAGE_NUMBERS=b.a.MAX_PAGE_NUMBERS,this.subs=this.msService.get().subscribe(t=>{if(t.name===this.uiState){const c=t.data;this.page=c.page,this.sort=c.sort,this.sortDir=c.dir,this.search=c.search,this.sx=c.sx,this.sy=c.sy}})}ngOnInit(){this.load()}ngOnDestroy(){this.subs.unsubscribe()}load(){""===this.search?(this.isLoading=!0,this.userService.list(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir).subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})):this.onSearch(this.search)}onSearch(t){this.search=t,this.isLoading=!0,this.userService.search(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir,t).subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})}pageChanged(t){this.page=t.page,this.load()}onSortBy(t){""===t.sort&&"asc"===t.dir?(this.sort="username",this.sortDir="asc"):(this.sort=t.sort,this.sortDir=t.dir),this.load()}goto(t){this.msService.send(this.uiState,{page:this.page,sort:this.sort,dir:this.sortDir,search:this.search,sx:window.scrollX,sy:window.scrollY}),this.router.navigate(["/ams/setup/user/"+t])}onEdit(t){this.goto("edit/"+t.id)}onDelete(t){this.bsModalRef=this.modalService.show(l.a,{initialState:{title:"Delete User",message:`Are you sure to delete this User ${t.username} ?`}}),this.bsModalRef.content.onClose.subscribe(c=>{!0===c.result&&this.userService.remove(t.id).subscribe(t=>{this.toastr.success("User successfully deleted"),this.load()})})}getUserRoles(t){return t.groups.map(t=>t.name).join(", ")}}return t.\u0275fac=function(c){return new(c||t)(m.Wb(d.g),m.Wb(g),m.Wb(f.a),m.Wb(v.b),m.Wb(n.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-user-listing"]],decls:21,vars:4,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-6","col-12","p-1"],[3,"search","onSearch"],[1,"col-sm-6","col-12","p-1","text-right"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card-body"],["class","text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover"],[3,"name","sort","dir","current","onSortBy"],[4,"ngFor","ngForOf"],[1,"text-nowrap"],["type","button",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"fas","fa-pencil-alt"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"card-footer"],[1,"float-right"],[3,"totalItems","itemsPerPage","maxSize","ngModel","ngModelChange","pageChanged"]],template:function(t,c){1&t&&(m.cc(0,"section",0),m.cc(1,"div",1),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"h1",4),m.Lc(5,"User Listing"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(6,"section",5),m.cc(7,"div",1),m.cc(8,"div",6),m.cc(9,"div",7),m.cc(10,"div",8),m.cc(11,"div",9),m.cc(12,"app-search-input",10),m.kc("onSearch",(function(t){return c.onSearch(t)})),m.bc(),m.bc(),m.cc(13,"div",11),m.cc(14,"button",12),m.kc("click",(function(){return c.goto("create")})),m.Xb(15,"i",13),m.Lc(16," Add New"),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(17,"div",14),m.Jc(18,S,3,0,"div",15),m.Jc(19,E,17,17,"div",16),m.bc(),m.Jc(20,k,3,4,"div",17),m.bc(),m.bc(),m.bc()),2&t&&(m.Kb(12),m.sc("search",c.search),m.Kb(6),m.sc("ngIf",c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",!c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",c.totalCount&&!c.isLoading))},directives:[y.a,s.m,_.a,s.l,a.a,e.j,e.l],styles:[""]}),t})();var D=i("LvDl"),K=i.n(D),x=i("fwOm"),w=i("wgH9");function I(t,c){1&t&&(m.cc(0,"small",26),m.Lc(1," Username is required "),m.bc())}function A(t,c){1&t&&(m.cc(0,"small",26),m.Lc(1," Password is required "),m.bc())}function M(t,c){1&t&&(m.cc(0,"small",26),m.Lc(1," Password should be between 6 to 8 characters in length "),m.bc())}function N(t,c){1&t&&(m.cc(0,"small",26),m.Lc(1," Password should be between 6 to 8 characters in length "),m.bc())}function P(t,c){1&t&&(m.cc(0,"small",26),m.Lc(1," Email is invalid "),m.bc())}function B(t,c){if(1&t&&(m.ac(0),m.Xb(1,"input",27),m.Zb()),2&t){const t=m.mc(2);m.Kb(1),m.sc("value",t.group)}}function X(t,c){1&t&&(m.cc(0,"small",26),m.Lc(1," Role is required "),m.bc())}function T(t,c){if(1&t&&(m.ac(0),m.Xb(1,"ng-select",28),m.Jc(2,X,2,0,"small",15),m.Zb()),2&t){const t=m.mc(2);m.Kb(1),m.sc("items",t.groupList),m.Kb(1),m.sc("ngIf",t.invalid("group_id")&&t.f.group_id.hasError("required"))}}const U=function(t){return{"is-invalid":t}};function G(t,c){if(1&t){const t=m.dc();m.cc(0,"div",1),m.cc(1,"form",7),m.kc("ngSubmit",(function(){return m.Dc(t),m.mc().onSubmit()})),m.cc(2,"div",8),m.cc(3,"div",9),m.cc(4,"div",10),m.cc(5,"label",11),m.Lc(6,"Username\xa0"),m.cc(7,"span",12),m.Lc(8,"*"),m.bc(),m.bc(),m.cc(9,"div",13),m.Xb(10,"input",14),m.Jc(11,I,2,0,"small",15),m.bc(),m.bc(),m.cc(12,"div",10),m.cc(13,"label",11),m.Lc(14,"Password\xa0"),m.cc(15,"span",12),m.Lc(16,"*"),m.bc(),m.bc(),m.cc(17,"div",13),m.Xb(18,"input",16),m.Jc(19,A,2,0,"small",15),m.Jc(20,M,2,0,"small",15),m.Jc(21,N,2,0,"small",15),m.bc(),m.bc(),m.cc(22,"div",10),m.cc(23,"label",11),m.Lc(24,"Email"),m.bc(),m.cc(25,"div",13),m.Xb(26,"input",17),m.Jc(27,P,2,0,"small",15),m.bc(),m.bc(),m.cc(28,"div",10),m.cc(29,"label",11),m.Lc(30,"First name"),m.bc(),m.cc(31,"div",13),m.Xb(32,"input",18),m.bc(),m.bc(),m.cc(33,"div",10),m.cc(34,"label",11),m.Lc(35,"Last name"),m.bc(),m.cc(36,"div",13),m.Xb(37,"input",19),m.bc(),m.bc(),m.cc(38,"div",10),m.cc(39,"label",11),m.Lc(40,"Role\xa0"),m.cc(41,"span",12),m.Lc(42,"*"),m.bc(),m.bc(),m.cc(43,"div",13),m.Jc(44,B,2,1,"ng-container",20),m.Jc(45,T,3,2,"ng-container",20),m.bc(),m.bc(),m.bc(),m.cc(46,"div",21),m.cc(47,"button",22),m.kc("click",(function(){return m.Dc(t),m.mc().onBack()})),m.Xb(48,"i",23),m.Lc(49," Back"),m.bc(),m.cc(50,"button",24),m.Xb(51,"i",25),m.Lc(52," Save"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(1),m.sc("formGroup",t.mform),m.Kb(9),m.sc("ngClass",m.vc(11,U,t.invalid("username"))),m.Kb(1),m.sc("ngIf",t.invalid("username")&&t.f.username.hasError("required")),m.Kb(7),m.sc("ngClass",m.vc(13,U,t.invalid("password"))),m.Kb(1),m.sc("ngIf",t.invalid("password")&&t.f.password.hasError("required")),m.Kb(1),m.sc("ngIf",t.invalid("password")&&t.f.password.hasError("minLength")),m.Kb(1),m.sc("ngIf",t.invalid("password")&&t.f.password.hasError("maxLength")),m.Kb(5),m.sc("ngClass",m.vc(15,U,t.invalid("email"))),m.Kb(1),m.sc("ngIf",t.invalid("email")&&t.f.email.hasError("email")),m.Kb(17),m.sc("ngIf",t.lockGroup),m.Kb(1),m.sc("ngIf",!t.lockGroup)}}let O=(()=>{class t extends x.a{constructor(t,c,i,s,e,r){super(),this.fb=t,this.route=c,this.router=i,this.lookupService=s,this.userService=e,this.toastr=r,this.isLoading=!1,this.data={id:""},this.isEdit=!1,this.lockGroup=!1,this.groupList=[],this.createForm()}ngOnInit(){this.route.paramMap.subscribe(t=>{this.id=t.get("id"),K.a.isNull(this.id)||(this.isEdit=!0),this.load()})}createForm(){this.mform=this.fb.group({username:["",[e.r.required]],password:["",[e.r.required,e.r.minLength(6),e.r.maxLength(8)]],email:["",[e.r.email]],first_name:[""],last_name:[""],group_id:[null,[e.r.required]]})}setForm(){const t=this.data;this.lockGroup=t.assigned;const c=t.groups;let i=0;h.a.isEmpty(c)||(i=c[0].id),this.mform.patchValue({username:t.username,password:"********",email:t.email,first_name:t.first_name,last_name:t.last_name,group_id:i})}load(){this.isLoading=!0,this.lookupService.listGroup().subscribe(t=>{this.groupList=t,this.loadDetails()},t=>{this.isLoading=!1})}loadDetails(){K.a.isNull(this.id)||K.a.isUndefined(this.id)?this.isLoading=!1:this.userService.edit(this.id).subscribe(t=>{this.data=t,this.setForm()},t=>{},()=>{this.isLoading=!1})}onBack(){this.router.navigate(["/ams/setup/user/list"])}onSubmit(){if(this.mform.invalid)return void this.mform.markAllAsTouched();const t=this.mform.value,c={username:t.username,password:t.password,email:t.email,first_name:t.first_name,last_name:t.last_name};this.lockGroup||(c.group_id=t.group_id),this.isEdit?this.userService.update(this.data.id,c).subscribe(t=>{this.toastr.success("User successfully updated")}):this.userService.create(c).subscribe(t=>{this.toastr.success("New User successfully created"),this.mform.reset()})}get group(){const t=this.data.groups;let c="";return h.a.isEmpty(t)||(c=t[0].name),c}}return t.\u0275fac=function(c){return new(c||t)(m.Wb(e.c),m.Wb(d.a),m.Wb(d.g),m.Wb(w.a),m.Wb(g),m.Wb(v.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-user-create"]],features:[m.Hb],decls:8,vars:1,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],["class","container-fluid",4,"ngIf"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-2","col-form-label"],[1,"text-danger"],[1,"col-sm-10"],["type","text","placeholder","Username","name","username","formControlName","username",1,"form-control",3,"ngClass"],["class","badge badge-danger",4,"ngIf"],["type","text","placeholder","Password","name","password","formControlName","password",1,"form-control",3,"ngClass"],["type","text","placeholder","Email","name","email","formControlName","email",1,"form-control",3,"ngClass"],["type","text","placeholder","First name","name","first_name","formControlName","first_name",1,"form-control"],["type","text","placeholder","Last name","name","last_name","formControlName","last_name",1,"form-control"],[4,"ngIf"],[1,"card-footer"],["type","button",1,"btn","btn-outline-dark","mr-2",3,"click"],[1,"fas","fa-chevron-circle-left"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],[1,"badge","badge-danger"],["type","text","readonly","",1,"form-control",3,"value"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","group_id","name","group_id",3,"items"]],template:function(t,c){1&t&&(m.cc(0,"section",0),m.cc(1,"div",1),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"h1",4),m.Lc(5,"Add / Edit User"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(6,"section",5),m.Jc(7,G,53,17,"div",6),m.bc()),2&t&&(m.Kb(7),m.sc("ngIf",!c.isLoading))},directives:[s.m,e.t,e.k,e.e,e.a,e.j,e.d,s.k,r.a],styles:[""]}),t})();var W=i("mrcu");function R(t,c){1&t&&(m.cc(0,"div",18),m.cc(1,"h4"),m.Lc(2,"No records found"),m.bc(),m.bc())}function J(t,c){if(1&t){const t=m.dc();m.cc(0,"tr"),m.cc(1,"td"),m.Lc(2),m.bc(),m.cc(3,"td"),m.Lc(4),m.bc(),m.cc(5,"td",23),m.cc(6,"button",24),m.kc("click",(function(){m.Dc(t);const i=c.$implicit;return m.mc(2).onEdit(i)})),m.Xb(7,"i",25),m.bc(),m.cc(8,"button",26),m.kc("click",(function(){m.Dc(t);const i=c.$implicit;return m.mc(2).onDelete(i)})),m.Xb(9,"i",27),m.bc(),m.bc(),m.bc()}if(2&t){const t=c.$implicit;m.Kb(2),m.Mc(t.name),m.Kb(2),m.Mc(t.iso_code)}}function q(t,c){if(1&t){const t=m.dc();m.cc(0,"div",19),m.cc(1,"table",20),m.cc(2,"thead"),m.cc(3,"tr"),m.cc(4,"th"),m.cc(5,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(6,"th"),m.cc(7,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.Xb(8,"th"),m.bc(),m.bc(),m.cc(9,"tbody"),m.Jc(10,J,10,2,"tr",22),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(5),m.sc("name","Name")("sort","name")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","ISO Code")("sort","iso_code")("dir",t.sortDir)("current",t.sort),m.Kb(3),m.sc("ngForOf",t.list)}}function $(t,c){if(1&t){const t=m.dc();m.cc(0,"div",28),m.cc(1,"div",29),m.cc(2,"pagination",30),m.kc("ngModelChange",(function(c){return m.Dc(t),m.mc().page=c}))("pageChanged",(function(c){return m.Dc(t),m.mc().pageChanged(c)})),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(2),m.sc("totalItems",t.totalCount)("itemsPerPage",t.pageSize)("maxSize",t.MAX_PAGE_NUMBERS)("ngModel",t.page)}}let F=(()=>{class t{constructor(t,c,i,s,e){this.router=t,this.countryService=c,this.msService=i,this.toastr=s,this.modalService=e,this.isLoading=!1,this.list=[],this.totalCount=0,this.pageSize=b.a.PAGE_SIZE,this.page=1,this.search="",this.sort="name",this.sortDir="asc",this.sx=0,this.sy=0,this.uiState="setup.country.country-listing",this.isEmpty=h.a.isEmpty,this.PAGE_SIZE=b.a.PAGE_SIZE,this.MAX_PAGE_NUMBERS=b.a.MAX_PAGE_NUMBERS,this.subs=this.msService.get().subscribe(t=>{if(t.name===this.uiState){const c=t.data;this.page=c.page,this.sort=c.sort,this.sortDir=c.dir,this.search=c.search,this.sx=c.sx,this.sy=c.sy}})}ngOnInit(){this.load()}ngOnDestroy(){this.subs.unsubscribe()}load(){""===this.search?(this.isLoading=!0,this.countryService.list(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir).subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})):this.onSearch(this.search)}onSearch(t){this.search=t,this.isLoading=!0,this.countryService.search(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir,t).subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})}pageChanged(t){this.page=t.page,this.load()}onSortBy(t){""===t.sort&&"asc"===t.dir?(this.sort="name",this.sortDir="asc"):(this.sort=t.sort,this.sortDir=t.dir),this.load()}goto(t){this.msService.send(this.uiState,{page:this.page,sort:this.sort,dir:this.sortDir,search:this.search,sx:window.scrollX,sy:window.scrollY}),this.router.navigate(["/ams/setup/country/"+t])}onEdit(t){this.goto("edit/"+t.id)}onDelete(t){this.bsModalRef=this.modalService.show(l.a,{initialState:{title:"Delete Country",message:`Are you sure to delete this Country ${t.name} ?`}}),this.bsModalRef.content.onClose.subscribe(c=>{!0===c.result&&this.countryService.remove(t.id).subscribe(t=>{this.toastr.success("Country successfully deleted"),this.load()})})}}return t.\u0275fac=function(c){return new(c||t)(m.Wb(d.g),m.Wb(W.a),m.Wb(f.a),m.Wb(v.b),m.Wb(n.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-country-listing"]],decls:21,vars:4,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-6","col-12","p-1"],[3,"search","onSearch"],[1,"col-sm-6","col-12","p-1","text-right"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card-body"],["class","text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover"],[3,"name","sort","dir","current","onSortBy"],[4,"ngFor","ngForOf"],[1,"text-nowrap"],["type","button",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"fas","fa-pencil-alt"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"card-footer"],[1,"float-right"],[3,"totalItems","itemsPerPage","maxSize","ngModel","ngModelChange","pageChanged"]],template:function(t,c){1&t&&(m.cc(0,"section",0),m.cc(1,"div",1),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"h1",4),m.Lc(5,"Country Listing"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(6,"section",5),m.cc(7,"div",1),m.cc(8,"div",6),m.cc(9,"div",7),m.cc(10,"div",8),m.cc(11,"div",9),m.cc(12,"app-search-input",10),m.kc("onSearch",(function(t){return c.onSearch(t)})),m.bc(),m.bc(),m.cc(13,"div",11),m.cc(14,"button",12),m.kc("click",(function(){return c.goto("create")})),m.Xb(15,"i",13),m.Lc(16," Add New"),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(17,"div",14),m.Jc(18,R,3,0,"div",15),m.Jc(19,q,11,9,"div",16),m.bc(),m.Jc(20,$,3,4,"div",17),m.bc(),m.bc(),m.bc()),2&t&&(m.Kb(12),m.sc("search",c.search),m.Kb(6),m.sc("ngIf",c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",!c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",c.totalCount&&!c.isLoading))},directives:[y.a,s.m,_.a,s.l,a.a,e.j,e.l],styles:[""]}),t})();function Z(t,c){1&t&&(m.cc(0,"small",22),m.Lc(1," Name is required "),m.bc())}function H(t,c){1&t&&(m.cc(0,"small",22),m.Lc(1," ISO Code is required "),m.bc())}const z=function(t){return{"is-invalid":t}};function j(t,c){if(1&t){const t=m.dc();m.cc(0,"div",1),m.cc(1,"form",7),m.kc("ngSubmit",(function(){return m.Dc(t),m.mc().onSubmit()})),m.cc(2,"div",8),m.cc(3,"div",9),m.cc(4,"div",10),m.cc(5,"label",11),m.Lc(6,"Name\xa0"),m.cc(7,"span",12),m.Lc(8,"*"),m.bc(),m.bc(),m.cc(9,"div",13),m.Xb(10,"input",14),m.Jc(11,Z,2,0,"small",15),m.bc(),m.bc(),m.cc(12,"div",10),m.cc(13,"label",11),m.Lc(14,"ISO Code\xa0"),m.cc(15,"span",12),m.Lc(16,"*"),m.bc(),m.bc(),m.cc(17,"div",13),m.Xb(18,"input",16),m.Jc(19,H,2,0,"small",15),m.bc(),m.bc(),m.bc(),m.cc(20,"div",17),m.cc(21,"button",18),m.kc("click",(function(){return m.Dc(t),m.mc().onBack()})),m.Xb(22,"i",19),m.Lc(23," Back"),m.bc(),m.cc(24,"button",20),m.Xb(25,"i",21),m.Lc(26," Save"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(1),m.sc("formGroup",t.mform),m.Kb(9),m.sc("ngClass",m.vc(5,z,t.invalid("name"))),m.Kb(1),m.sc("ngIf",t.invalid("name")&&t.f.name.hasError("required")),m.Kb(7),m.sc("ngClass",m.vc(7,z,t.invalid("iso_code"))),m.Kb(1),m.sc("ngIf",t.invalid("iso_code")&&t.f.iso_code.hasError("required"))}}let V=(()=>{class t extends x.a{constructor(t,c,i,s,e){super(),this.fb=t,this.route=c,this.router=i,this.countryService=s,this.toastr=e,this.isLoading=!1,this.data={id:""},this.isEdit=!1,this.createForm()}ngOnInit(){this.route.paramMap.subscribe(t=>{this.id=t.get("id"),K.a.isNull(this.id)||(this.isEdit=!0),this.load()})}createForm(){this.mform=this.fb.group({name:["",[e.r.required]],iso_code:["",[e.r.required]]})}setForm(){const t=this.data;this.mform.patchValue({name:t.name,iso_code:t.iso_code})}load(){K.a.isNull(this.id)||K.a.isUndefined(this.id)||(this.isLoading=!0,this.countryService.edit(this.id).subscribe(t=>{this.data=t,this.setForm()},t=>{},()=>{this.isLoading=!1}))}onBack(){this.router.navigate(["/ams/setup/country/list"])}onSubmit(){if(this.mform.invalid)return void this.mform.markAllAsTouched();const t=this.mform.value,c={name:t.name,iso_code:t.iso_code};this.isEdit?this.countryService.update(this.data.id,c).subscribe(t=>{this.toastr.success("Country successfully updated")}):this.countryService.create(c).subscribe(t=>{this.toastr.success("New Country successfully created"),this.mform.reset()})}}return t.\u0275fac=function(c){return new(c||t)(m.Wb(e.c),m.Wb(d.a),m.Wb(d.g),m.Wb(W.a),m.Wb(v.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-country-create"]],features:[m.Hb],decls:8,vars:1,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],["class","container-fluid",4,"ngIf"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-2","col-form-label"],[1,"text-danger"],[1,"col-sm-10"],["type","text","placeholder","Name","name","name","formControlName","name",1,"form-control",3,"ngClass"],["class","badge badge-danger",4,"ngIf"],["type","text","placeholder","ISO Code","name","iso_code","formControlName","iso_code",1,"form-control",3,"ngClass"],[1,"card-footer"],["type","button",1,"btn","btn-outline-dark","mr-2",3,"click"],[1,"fas","fa-chevron-circle-left"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],[1,"badge","badge-danger"]],template:function(t,c){1&t&&(m.cc(0,"section",0),m.cc(1,"div",1),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"h1",4),m.Lc(5,"Add / Edit Country"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(6,"section",5),m.Jc(7,j,27,9,"div",6),m.bc()),2&t&&(m.Kb(7),m.sc("ngIf",!c.isLoading))},directives:[s.m,e.t,e.k,e.e,e.a,e.j,e.d,s.k],styles:[""]}),t})();var Q=i("Thox");function Y(t,c){1&t&&(m.cc(0,"div",18),m.cc(1,"h4"),m.Lc(2,"No records found"),m.bc(),m.bc())}function tt(t,c){if(1&t){const t=m.dc();m.cc(0,"tr"),m.cc(1,"td"),m.Lc(2),m.bc(),m.cc(3,"td"),m.Lc(4),m.bc(),m.cc(5,"td",23),m.cc(6,"button",24),m.kc("click",(function(){m.Dc(t);const i=c.$implicit;return m.mc(2).onEdit(i)})),m.Xb(7,"i",25),m.bc(),m.cc(8,"button",26),m.kc("click",(function(){m.Dc(t);const i=c.$implicit;return m.mc(2).onDelete(i)})),m.Xb(9,"i",27),m.bc(),m.bc(),m.bc()}if(2&t){const t=c.$implicit;m.Kb(2),m.Mc(t.name),m.Kb(2),m.Mc(t.country.name)}}function ct(t,c){if(1&t){const t=m.dc();m.cc(0,"div",19),m.cc(1,"table",20),m.cc(2,"thead"),m.cc(3,"tr"),m.cc(4,"th"),m.cc(5,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(6,"th"),m.cc(7,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.Xb(8,"th"),m.bc(),m.bc(),m.cc(9,"tbody"),m.Jc(10,tt,10,2,"tr",22),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(5),m.sc("name","Name")("sort","name")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Country")("sort","country__name")("dir",t.sortDir)("current",t.sort),m.Kb(3),m.sc("ngForOf",t.list)}}function it(t,c){if(1&t){const t=m.dc();m.cc(0,"div",28),m.cc(1,"div",29),m.cc(2,"pagination",30),m.kc("ngModelChange",(function(c){return m.Dc(t),m.mc().page=c}))("pageChanged",(function(c){return m.Dc(t),m.mc().pageChanged(c)})),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(2),m.sc("totalItems",t.totalCount)("itemsPerPage",t.pageSize)("maxSize",t.MAX_PAGE_NUMBERS)("ngModel",t.page)}}let st=(()=>{class t{constructor(t,c,i,s,e){this.router=t,this.stateService=c,this.msService=i,this.toastr=s,this.modalService=e,this.isLoading=!1,this.list=[],this.totalCount=0,this.pageSize=b.a.PAGE_SIZE,this.page=1,this.search="",this.sort="name",this.sortDir="asc",this.sx=0,this.sy=0,this.uiState="setup.state.state-listing",this.isEmpty=h.a.isEmpty,this.PAGE_SIZE=b.a.PAGE_SIZE,this.MAX_PAGE_NUMBERS=b.a.MAX_PAGE_NUMBERS,this.subs=this.msService.get().subscribe(t=>{if(t.name===this.uiState){const c=t.data;this.page=c.page,this.sort=c.sort,this.sortDir=c.dir,this.search=c.search,this.sx=c.sx,this.sy=c.sy}})}ngOnInit(){this.load()}ngOnDestroy(){this.subs.unsubscribe()}load(){""===this.search?(this.isLoading=!0,this.stateService.list(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir).subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})):this.onSearch(this.search)}onSearch(t){this.search=t,this.isLoading=!0,this.stateService.search(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir,t).subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})}pageChanged(t){this.page=t.page,this.load()}onSortBy(t){""===t.sort&&"asc"===t.dir?(this.sort="name",this.sortDir="asc"):(this.sort=t.sort,this.sortDir=t.dir),this.load()}goto(t){this.msService.send(this.uiState,{page:this.page,sort:this.sort,dir:this.sortDir,search:this.search,sx:window.scrollX,sy:window.scrollY}),this.router.navigate(["/ams/setup/state/"+t])}onEdit(t){this.goto("edit/"+t.id)}onDelete(t){this.bsModalRef=this.modalService.show(l.a,{initialState:{title:"Delete State",message:`Are you sure to delete this State ${t.name} ?`}}),this.bsModalRef.content.onClose.subscribe(c=>{!0===c.result&&this.stateService.remove(t.id).subscribe(t=>{this.toastr.success("State successfully deleted"),this.load()})})}}return t.\u0275fac=function(c){return new(c||t)(m.Wb(d.g),m.Wb(Q.a),m.Wb(f.a),m.Wb(v.b),m.Wb(n.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-state-listing"]],decls:21,vars:4,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-6","col-12","p-1"],[3,"search","onSearch"],[1,"col-sm-6","col-12","p-1","text-right"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card-body"],["class","text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover"],[3,"name","sort","dir","current","onSortBy"],[4,"ngFor","ngForOf"],[1,"text-nowrap"],["type","button",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"fas","fa-pencil-alt"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"card-footer"],[1,"float-right"],[3,"totalItems","itemsPerPage","maxSize","ngModel","ngModelChange","pageChanged"]],template:function(t,c){1&t&&(m.cc(0,"section",0),m.cc(1,"div",1),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"h1",4),m.Lc(5,"State Listing"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(6,"section",5),m.cc(7,"div",1),m.cc(8,"div",6),m.cc(9,"div",7),m.cc(10,"div",8),m.cc(11,"div",9),m.cc(12,"app-search-input",10),m.kc("onSearch",(function(t){return c.onSearch(t)})),m.bc(),m.bc(),m.cc(13,"div",11),m.cc(14,"button",12),m.kc("click",(function(){return c.goto("create")})),m.Xb(15,"i",13),m.Lc(16," Add New"),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(17,"div",14),m.Jc(18,Y,3,0,"div",15),m.Jc(19,ct,11,9,"div",16),m.bc(),m.Jc(20,it,3,4,"div",17),m.bc(),m.bc(),m.bc()),2&t&&(m.Kb(12),m.sc("search",c.search),m.Kb(6),m.sc("ngIf",c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",!c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",c.totalCount&&!c.isLoading))},directives:[y.a,s.m,_.a,s.l,a.a,e.j,e.l],styles:[""]}),t})();function et(t,c){1&t&&(m.cc(0,"small",22),m.Lc(1," Name is required "),m.bc())}function rt(t,c){1&t&&(m.cc(0,"small",22),m.Lc(1," Country is required "),m.bc())}const nt=function(t){return{"is-invalid":t}};function ot(t,c){if(1&t){const t=m.dc();m.cc(0,"div",1),m.cc(1,"form",7),m.kc("ngSubmit",(function(){return m.Dc(t),m.mc().onSubmit()})),m.cc(2,"div",8),m.cc(3,"div",9),m.cc(4,"div",10),m.cc(5,"label",11),m.Lc(6,"Name\xa0"),m.cc(7,"span",12),m.Lc(8,"*"),m.bc(),m.bc(),m.cc(9,"div",13),m.Xb(10,"input",14),m.Jc(11,et,2,0,"small",15),m.bc(),m.bc(),m.cc(12,"div",10),m.cc(13,"label",11),m.Lc(14,"Country\xa0"),m.cc(15,"span",12),m.Lc(16,"*"),m.bc(),m.bc(),m.cc(17,"div",13),m.Xb(18,"ng-select",16),m.Jc(19,rt,2,0,"small",15),m.bc(),m.bc(),m.bc(),m.cc(20,"div",17),m.cc(21,"button",18),m.kc("click",(function(){return m.Dc(t),m.mc().onBack()})),m.Xb(22,"i",19),m.Lc(23," Back"),m.bc(),m.cc(24,"button",20),m.Xb(25,"i",21),m.Lc(26," Save"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(1),m.sc("formGroup",t.mform),m.Kb(9),m.sc("ngClass",m.vc(5,nt,t.invalid("name"))),m.Kb(1),m.sc("ngIf",t.invalid("name")&&t.f.name.hasError("required")),m.Kb(7),m.sc("items",t.countryList),m.Kb(1),m.sc("ngIf",t.invalid("country_id")&&t.f.country_id.hasError("required"))}}let at=(()=>{class t extends x.a{constructor(t,c,i,s,e,r){super(),this.fb=t,this.route=c,this.router=i,this.lookupService=s,this.stateService=e,this.toastr=r,this.isLoading=!1,this.data={id:""},this.isEdit=!1,this.countryList=[],this.createForm()}ngOnInit(){this.route.paramMap.subscribe(t=>{this.id=t.get("id"),K.a.isNull(this.id)||(this.isEdit=!0),this.load()})}createForm(){this.mform=this.fb.group({name:["",[e.r.required]],country_id:[null,[e.r.required]]})}setForm(){const t=this.data;this.mform.patchValue({name:t.name,country_id:t.country.id})}load(){this.isLoading=!0,this.lookupService.listCountry().subscribe(t=>{this.countryList=t,this.loadDetails()},t=>{this.isLoading=!1})}loadDetails(){K.a.isNull(this.id)||K.a.isUndefined(this.id)?this.isLoading=!1:this.stateService.edit(this.id).subscribe(t=>{this.data=t,this.setForm()},t=>{},()=>{this.isLoading=!1})}onBack(){this.router.navigate(["/ams/setup/state/list"])}onSubmit(){if(this.mform.invalid)return void this.mform.markAllAsTouched();const t=this.mform.value,c={name:t.name,country_id:t.country_id};this.isEdit?this.stateService.update(this.data.id,c).subscribe(t=>{this.toastr.success("State successfully updated")}):this.stateService.create(c).subscribe(t=>{this.toastr.success("New State successfully created"),this.mform.reset()})}}return t.\u0275fac=function(c){return new(c||t)(m.Wb(e.c),m.Wb(d.a),m.Wb(d.g),m.Wb(w.a),m.Wb(Q.a),m.Wb(v.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-state-create"]],features:[m.Hb],decls:8,vars:1,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],["class","container-fluid",4,"ngIf"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-2","col-form-label"],[1,"text-danger"],[1,"col-sm-10"],["type","text","placeholder","Name","name","name","formControlName","name",1,"form-control",3,"ngClass"],["class","badge badge-danger",4,"ngIf"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","country_id","name","country_id",3,"items"],[1,"card-footer"],["type","button",1,"btn","btn-outline-dark","mr-2",3,"click"],[1,"fas","fa-chevron-circle-left"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],[1,"badge","badge-danger"]],template:function(t,c){1&t&&(m.cc(0,"section",0),m.cc(1,"div",1),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"h1",4),m.Lc(5,"Add / Edit State"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(6,"section",5),m.Jc(7,ot,27,7,"div",6),m.bc()),2&t&&(m.Kb(7),m.sc("ngIf",!c.isLoading))},directives:[s.m,e.t,e.k,e.e,e.a,e.j,e.d,s.k,r.a],styles:[""]}),t})();var dt=i("LNgY"),lt=i("VuLe"),bt=i("eUtn"),ht=i("bOQg"),mt=i("fdx9"),ut=i("wWB1"),pt=i("5Pgx"),gt=i("a+IK");function ft(t,c){1&t&&(m.cc(0,"div",18),m.cc(1,"h4"),m.Lc(2,"No records found"),m.bc(),m.bc())}function vt(t,c){if(1&t){const t=m.dc();m.cc(0,"tr"),m.cc(1,"td"),m.Lc(2),m.bc(),m.cc(3,"td"),m.Lc(4),m.bc(),m.cc(5,"td"),m.Lc(6),m.bc(),m.cc(7,"td"),m.Lc(8),m.bc(),m.cc(9,"td"),m.Lc(10),m.bc(),m.cc(11,"td"),m.Lc(12),m.bc(),m.cc(13,"td"),m.Lc(14),m.bc(),m.cc(15,"td"),m.Lc(16),m.bc(),m.cc(17,"td"),m.Lc(18),m.bc(),m.cc(19,"td"),m.Lc(20),m.bc(),m.cc(21,"td"),m.cc(22,"button",23),m.kc("click",(function(){m.Dc(t);const i=c.$implicit;return m.mc(2).onUser(i)})),m.Xb(23,"i",24),m.bc(),m.bc(),m.cc(24,"td",25),m.cc(25,"button",26),m.kc("click",(function(){m.Dc(t);const i=c.$implicit;return m.mc(2).onEdit(i)})),m.Xb(26,"i",27),m.bc(),m.cc(27,"button",28),m.kc("click",(function(){m.Dc(t);const i=c.$implicit;return m.mc(2).onDelete(i)})),m.Xb(28,"i",29),m.bc(),m.bc(),m.bc()}if(2&t){const t=c.$implicit;m.Kb(2),m.Mc(t.name),m.Kb(2),m.Mc(t.registration_num),m.Kb(2),m.Mc(t.contact_no),m.Kb(2),m.Mc(t.email),m.Kb(2),m.Mc(t.fax_no),m.Kb(2),m.Mc(t.addr_line_1),m.Kb(2),m.Mc(t.postcode),m.Kb(2),m.Mc(t.city),m.Kb(2),m.Mc(t.state.name),m.Kb(2),m.Mc(t.country.name)}}function yt(t,c){if(1&t){const t=m.dc();m.cc(0,"div",19),m.cc(1,"table",20),m.cc(2,"thead"),m.cc(3,"tr"),m.cc(4,"th"),m.cc(5,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(6,"th"),m.cc(7,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(8,"th"),m.cc(9,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(10,"th"),m.cc(11,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(12,"th"),m.cc(13,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(14,"th"),m.cc(15,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(16,"th"),m.cc(17,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(18,"th"),m.cc(19,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(20,"th"),m.cc(21,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(22,"th"),m.cc(23,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(24,"th"),m.Lc(25,"Users"),m.bc(),m.Xb(26,"th"),m.bc(),m.bc(),m.cc(27,"tbody"),m.Jc(28,vt,29,10,"tr",22),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(5),m.sc("name","Name")("sort","name")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Business Reg. No.")("sort","registration_num")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Contact No.")("sort","contact_no")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Email")("sort","email")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Fax No.")("sort","fax_no")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Address 1")("sort","addr_line_1")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Postcode")("sort","pstcode")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","City")("sort","city")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","State")("sort","state__name")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Country")("sort","country__name")("dir",t.sortDir)("current",t.sort),m.Kb(5),m.sc("ngForOf",t.list)}}function _t(t,c){if(1&t){const t=m.dc();m.cc(0,"div",30),m.cc(1,"div",31),m.cc(2,"pagination",32),m.kc("ngModelChange",(function(c){return m.Dc(t),m.mc().page=c}))("pageChanged",(function(c){return m.Dc(t),m.mc().pageChanged(c)})),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(2),m.sc("totalItems",t.totalCount)("itemsPerPage",t.pageSize)("maxSize",t.MAX_PAGE_NUMBERS)("ngModel",t.page)}}let St=(()=>{class t{constructor(t,c,i,s,e){this.router=t,this.miningCompanyService=c,this.msService=i,this.toastr=s,this.modalService=e,this.isLoading=!1,this.list=[],this.totalCount=0,this.pageSize=b.a.PAGE_SIZE,this.page=1,this.search="",this.sort="name",this.sortDir="asc",this.sx=0,this.sy=0,this.uiState="setup.mining-company.mining-company-listing",this.isEmpty=h.a.isEmpty,this.PAGE_SIZE=b.a.PAGE_SIZE,this.MAX_PAGE_NUMBERS=b.a.MAX_PAGE_NUMBERS,this.subs=this.msService.get().subscribe(t=>{if(t.name===this.uiState){const c=t.data;this.page=c.page,this.sort=c.sort,this.sortDir=c.dir,this.search=c.search,this.sx=c.sx,this.sy=c.sy}})}ngOnInit(){this.load()}ngOnDestroy(){this.subs.unsubscribe()}load(){""===this.search?(this.isLoading=!0,this.miningCompanyService.list(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir).subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})):this.onSearch(this.search)}onSearch(t){this.search=t,this.isLoading=!0,this.miningCompanyService.search(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir,t).subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})}pageChanged(t){this.page=t.page,this.load()}onSortBy(t){""===t.sort&&"asc"===t.dir?(this.sort="name",this.sortDir="asc"):(this.sort=t.sort,this.sortDir=t.dir),this.load()}goto(t){this.msService.send(this.uiState,{page:this.page,sort:this.sort,dir:this.sortDir,search:this.search,sx:window.scrollX,sy:window.scrollY}),this.router.navigate(["/ams/setup/mining-company/"+t])}onUser(t){this.goto(`user/${t.id}/list`)}onEdit(t){this.goto("edit/"+t.id)}onDelete(t){this.bsModalRef=this.modalService.show(l.a,{initialState:{title:"Delete Mining Company",message:`Are you sure to delete this Mining Company ${t.name} ?`}}),this.bsModalRef.content.onClose.subscribe(c=>{!0===c.result&&this.miningCompanyService.remove(t.id).subscribe(t=>{this.toastr.success("Mining Company successfully deleted"),this.load()})})}}return t.\u0275fac=function(c){return new(c||t)(m.Wb(d.g),m.Wb(gt.a),m.Wb(f.a),m.Wb(v.b),m.Wb(n.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-mining-company-listing"]],decls:21,vars:4,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-6","col-12","p-1"],[3,"search","onSearch"],[1,"col-sm-6","col-12","p-1","text-right"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card-body"],["class","text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover"],[3,"name","sort","dir","current","onSortBy"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-user"],[1,"text-nowrap"],["type","button",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"fas","fa-pencil-alt"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"card-footer"],[1,"float-right"],[3,"totalItems","itemsPerPage","maxSize","ngModel","ngModelChange","pageChanged"]],template:function(t,c){1&t&&(m.cc(0,"section",0),m.cc(1,"div",1),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"h1",4),m.Lc(5,"Mining Company Listing"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(6,"section",5),m.cc(7,"div",1),m.cc(8,"div",6),m.cc(9,"div",7),m.cc(10,"div",8),m.cc(11,"div",9),m.cc(12,"app-search-input",10),m.kc("onSearch",(function(t){return c.onSearch(t)})),m.bc(),m.bc(),m.cc(13,"div",11),m.cc(14,"button",12),m.kc("click",(function(){return c.goto("create")})),m.Xb(15,"i",13),m.Lc(16," Add New"),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(17,"div",14),m.Jc(18,ft,3,0,"div",15),m.Jc(19,yt,29,41,"div",16),m.bc(),m.Jc(20,_t,3,4,"div",17),m.bc(),m.bc(),m.bc()),2&t&&(m.Kb(12),m.sc("search",c.search),m.Kb(6),m.sc("ngIf",c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",!c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",c.totalCount&&!c.isLoading))},directives:[y.a,s.m,_.a,s.l,a.a,e.j,e.l],styles:[""]}),t})();function Lt(t,c){1&t&&(m.cc(0,"small",44),m.Lc(1," Name is required "),m.bc())}function Et(t,c){1&t&&(m.cc(0,"small",44),m.Lc(1," Business Registration No. is required "),m.bc())}function kt(t,c){1&t&&(m.cc(0,"small",44),m.Lc(1," Mining License No. is required "),m.bc())}function Ct(t,c){1&t&&(m.cc(0,"small",44),m.Lc(1," Contact No. is required "),m.bc())}function Dt(t,c){1&t&&(m.cc(0,"small",44),m.Lc(1," Address 1 is required "),m.bc())}function Kt(t,c){1&t&&(m.cc(0,"small",44),m.Lc(1," Postcode is required "),m.bc())}function xt(t,c){1&t&&(m.cc(0,"small",44),m.Lc(1," City is required "),m.bc())}function wt(t,c){1&t&&(m.cc(0,"small",44),m.Lc(1," State is required "),m.bc())}function It(t,c){1&t&&(m.cc(0,"small",44),m.Lc(1," Country is required "),m.bc())}const At=function(t){return{"is-invalid":t}},Mt=function(){return{containerClass:"theme-blue",dateInputFormat:"YYYY-MM-DD"}};function Nt(t,c){if(1&t){const t=m.dc();m.cc(0,"div",1),m.cc(1,"form",7),m.kc("ngSubmit",(function(){return m.Dc(t),m.mc().onSubmit()})),m.cc(2,"div",8),m.cc(3,"div",9),m.cc(4,"div",10),m.cc(5,"label",11),m.Lc(6,"Name\xa0"),m.cc(7,"span",12),m.Lc(8,"*"),m.bc(),m.bc(),m.cc(9,"div",13),m.Xb(10,"input",14),m.Jc(11,Lt,2,0,"small",15),m.bc(),m.bc(),m.cc(12,"div",10),m.cc(13,"label",11),m.Lc(14,"Business Registration No.\xa0"),m.cc(15,"span",12),m.Lc(16,"*"),m.bc(),m.bc(),m.cc(17,"div",13),m.Xb(18,"input",16),m.Jc(19,Et,2,0,"small",15),m.bc(),m.bc(),m.cc(20,"div",10),m.cc(21,"label",11),m.Lc(22,"Mining License No.\xa0"),m.cc(23,"span",12),m.Lc(24,"*"),m.bc(),m.bc(),m.cc(25,"div",13),m.Xb(26,"input",17),m.Jc(27,kt,2,0,"small",15),m.bc(),m.bc(),m.cc(28,"div",10),m.cc(29,"label",11),m.Lc(30,"License Expiry\xa0"),m.cc(31,"span",12),m.Lc(32,"*"),m.bc(),m.bc(),m.cc(33,"div",18),m.cc(34,"div",19),m.Xb(35,"input",20,21),m.cc(37,"div",22),m.cc(38,"button",23),m.kc("click",(function(){return m.Dc(t),m.Bc(36).show()})),m.Xb(39,"i",24),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(40,"div",10),m.cc(41,"label",11),m.Lc(42,"Contact No.\xa0"),m.cc(43,"span",12),m.Lc(44,"*"),m.bc(),m.bc(),m.cc(45,"div",13),m.Xb(46,"input",25),m.Jc(47,Ct,2,0,"small",15),m.bc(),m.bc(),m.cc(48,"div",10),m.cc(49,"label",11),m.Lc(50,"Email"),m.bc(),m.cc(51,"div",13),m.Xb(52,"input",26),m.bc(),m.bc(),m.cc(53,"div",10),m.cc(54,"label",11),m.Lc(55,"Fax No."),m.bc(),m.cc(56,"div",13),m.Xb(57,"input",27),m.bc(),m.bc(),m.cc(58,"div",10),m.cc(59,"label",11),m.Lc(60,"Address\xa0"),m.cc(61,"span",12),m.Lc(62,"*"),m.bc(),m.bc(),m.cc(63,"div",13),m.Xb(64,"input",28),m.Jc(65,Dt,2,0,"small",15),m.bc(),m.bc(),m.cc(66,"div",10),m.cc(67,"div",29),m.Xb(68,"input",30),m.bc(),m.bc(),m.cc(69,"div",10),m.cc(70,"div",29),m.Xb(71,"input",31),m.bc(),m.bc(),m.cc(72,"div",10),m.cc(73,"label",11),m.Lc(74,"Postcode\xa0"),m.cc(75,"span",12),m.Lc(76,"*"),m.bc(),m.bc(),m.cc(77,"div",32),m.Xb(78,"input",33),m.Jc(79,Kt,2,0,"small",15),m.bc(),m.cc(80,"label",34),m.Lc(81,"City\xa0"),m.cc(82,"span",12),m.Lc(83,"*"),m.bc(),m.bc(),m.cc(84,"div",35),m.Xb(85,"input",36),m.Jc(86,xt,2,0,"small",15),m.bc(),m.bc(),m.cc(87,"div",10),m.cc(88,"label",11),m.Lc(89,"State\xa0"),m.cc(90,"span",12),m.Lc(91,"*"),m.bc(),m.bc(),m.cc(92,"div",32),m.Xb(93,"ng-select",37),m.Jc(94,wt,2,0,"small",15),m.bc(),m.cc(95,"label",34),m.Lc(96,"Country\xa0"),m.cc(97,"span",12),m.Lc(98,"*"),m.bc(),m.bc(),m.cc(99,"div",35),m.cc(100,"ng-select",38),m.kc("change",(function(c){return m.Dc(t),m.mc().onChangeCountry(c)})),m.bc(),m.Jc(101,It,2,0,"small",15),m.bc(),m.bc(),m.bc(),m.cc(102,"div",39),m.cc(103,"button",40),m.kc("click",(function(){return m.Dc(t),m.mc().onBack()})),m.Xb(104,"i",41),m.Lc(105," Back"),m.bc(),m.cc(106,"button",42),m.Xb(107,"i",43),m.Lc(108," Save"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.Bc(36),c=m.mc();m.Kb(1),m.sc("formGroup",c.mform),m.Kb(9),m.sc("ngClass",m.vc(21,At,c.invalid("name"))),m.Kb(1),m.sc("ngIf",c.invalid("name")&&c.f.name.hasError("required")),m.Kb(7),m.sc("ngClass",m.vc(23,At,c.invalid("registration_num"))),m.Kb(1),m.sc("ngIf",c.invalid("registration_num")&&c.f.registration_num.hasError("required")),m.Kb(7),m.sc("ngClass",m.vc(25,At,c.invalid("registration_num"))),m.Kb(1),m.sc("ngIf",c.invalid("mining_license_num")&&c.f.mining_license_num.hasError("required")),m.Kb(8),m.sc("bsConfig",m.uc(27,Mt)),m.Kb(3),m.Lb("aria-expanded",t.isOpen),m.Kb(8),m.sc("ngClass",m.vc(28,At,c.invalid("contact_no"))),m.Kb(1),m.sc("ngIf",c.invalid("contact_no")&&c.f.contact_no.hasError("required")),m.Kb(17),m.sc("ngClass",m.vc(30,At,c.invalid("addr_line_1"))),m.Kb(1),m.sc("ngIf",c.invalid("addr_line_1")&&c.f.addr_line_1.hasError("required")),m.Kb(13),m.sc("ngClass",m.vc(32,At,c.invalid("postcode"))),m.Kb(1),m.sc("ngIf",c.invalid("postcode")&&c.f.postcode.hasError("required")),m.Kb(6),m.sc("ngClass",m.vc(34,At,c.invalid("city"))),m.Kb(1),m.sc("ngIf",c.invalid("city")&&c.f.city.hasError("required")),m.Kb(7),m.sc("items",c.stateList),m.Kb(1),m.sc("ngIf",c.invalid("state_id")&&c.f.state_id.hasError("required")),m.Kb(6),m.sc("items",c.countryList),m.Kb(1),m.sc("ngIf",c.invalid("country_id")&&c.f.country_id.hasError("required"))}}let Pt=(()=>{class t extends x.a{constructor(t,c,i,s,e,r){super(),this.fb=t,this.route=c,this.router=i,this.lookupService=s,this.miningCompanyService=e,this.toastr=r,this.isLoading=!1,this.data={id:""},this.isEdit=!1,this.countryList=[],this.stateList=[],this.createForm()}ngOnInit(){this.route.paramMap.subscribe(t=>{this.id=t.get("id"),K.a.isNull(this.id)||(this.isEdit=!0),this.load()})}createForm(){this.mform=this.fb.group({name:["",[e.r.required]],registration_num:["",[e.r.required]],mining_license_num:["",[e.r.required]],mining_license_expiry_date:[null,[e.r.required]],contact_no:["",[e.r.required]],email:[""],fax_no:[""],addr_line_1:["",[e.r.required]],addr_line_2:[""],addr_line_3:[""],postcode:["",[e.r.required]],city:["",[e.r.required]],state_id:[null,[e.r.required]],country_id:[null,[e.r.required]]})}setForm(){const t=this.data;this.mform.patchValue({name:t.name,registration_num:t.registration_num,mining_license_num:t.mining_license_num,mining_license_expiry_date:t.mining_license_expiry_date,contact_no:t.contact_no,email:t.email,fax_no:t.fax_no,addr_line_1:t.addr_line_1,addr_line_2:t.addr_line_2,addr_line_3:t.addr_line_3,postcode:t.postcode,city:t.city,country_id:t.country.id}),this.lookupService.listStates(t.country.id).subscribe(c=>{this.stateList=c,this.mform.patchValue({state_id:t.state.id})})}load(){this.isLoading=!0,this.lookupService.listCountry().subscribe(t=>{this.countryList=t,this.mform.patchValue({country_id:this.countryList[0].id}),this.onChangeCountry(this.countryList[0]),this.loadDetails()},t=>{this.isLoading=!1})}loadDetails(){K.a.isNull(this.id)||K.a.isUndefined(this.id)?this.isLoading=!1:this.miningCompanyService.edit(this.id).subscribe(t=>{this.data=t,this.setForm()},t=>{},()=>{this.isLoading=!1})}onBack(){this.router.navigate(["/ams/setup/mining-company/list"])}onSubmit(){if(this.mform.invalid)return void this.mform.markAllAsTouched();const t=this.mform.value,c={name:t.name,registration_num:t.registration_num,mining_license_num:t.mining_license_num,mining_license_expiry_date:h.a.toDateStr(t.mining_license_expiry_date),contact_no:t.contact_no,email:t.email,fax_no:t.fax_no,addr_line_1:t.addr_line_1,addr_line_2:t.addr_line_2,addr_line_3:t.addr_line_3,postcode:t.postcode,city:t.city,state_id:t.state_id,country_id:t.country_id};this.isEdit?this.miningCompanyService.update(this.data.id,c).subscribe(t=>{this.toastr.success("Mining Company successfully updated")}):this.miningCompanyService.create(c).subscribe(t=>{this.toastr.success("New Mining Company successfully created"),this.mform.reset()})}onChangeCountry(t){this.lookupService.listStates(t.id).subscribe(t=>{this.stateList=t,this.mform.patchValue({state_id:null})})}}return t.\u0275fac=function(c){return new(c||t)(m.Wb(e.c),m.Wb(d.a),m.Wb(d.g),m.Wb(w.a),m.Wb(gt.a),m.Wb(v.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-mining-company-create"]],features:[m.Hb],decls:8,vars:1,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],["class","container-fluid",4,"ngIf"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-2","col-form-label"],[1,"text-danger"],[1,"col-sm-10"],["type","text","placeholder","Name","name","name","formControlName","name",1,"form-control",3,"ngClass"],["class","badge badge-danger",4,"ngIf"],["type","text","placeholder","Business Registration No.","name","registration_num","formControlName","registration_num",1,"form-control",3,"ngClass"],["type","text","placeholder","Mining License No.","name","mining_license_num","formControlName","mining_license_num",1,"form-control",3,"ngClass"],[1,"col-sm-2","col-12"],[1,"input-group","date"],["type","text","placeholder","License Expiry","name","mining_license_expiry_date","formControlName","mining_license_expiry_date","bsDatepicker","",1,"form-control",3,"bsConfig"],["dp1","bsDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-default",3,"click"],[1,"fas","fa-calendar-alt"],["type","text","placeholder","Contact No.","name","contact_no","formControlName","contact_no",1,"form-control",3,"ngClass"],["type","text","placeholder","Email","name","email","formControlName","email",1,"form-control"],["type","text","placeholder","Fax No.","name","fax_no","formControlName","fax_no",1,"form-control"],["type","text","placeholder","Adress 1","name","addr_line_1","formControlName","addr_line_1",1,"form-control",3,"ngClass"],[1,"col-sm-10","offset-sm-2"],["type","text","placeholder","Adress 2","name","addr_line_2","formControlName","addr_line_2",1,"form-control"],["type","text","placeholder","Adress 3","name","addr_line_3","formControlName","addr_line_3",1,"form-control"],[1,"col-sm-3"],["type","text","placeholder","Postcode","name","postcode","formControlName","postcode",1,"form-control",3,"ngClass"],[1,"col-sm-1","col-form-label"],[1,"col-sm-6"],["type","text","placeholder","City","name","city","formControlName","city",1,"form-control",3,"ngClass"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","state_id","name","state_id",3,"items"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","country_id","name","country_id",3,"items","change"],[1,"card-footer"],["type","button",1,"btn","btn-outline-dark","mr-2",3,"click"],[1,"fas","fa-chevron-circle-left"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],[1,"badge","badge-danger"]],template:function(t,c){1&t&&(m.cc(0,"section",0),m.cc(1,"div",1),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"h1",4),m.Lc(5,"Add / Edit Mining Company"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(6,"section",5),m.Jc(7,Nt,109,36,"div",6),m.bc()),2&t&&(m.Kb(7),m.sc("ngIf",!c.isLoading))},directives:[s.m,e.t,e.k,e.e,e.a,e.j,e.d,s.k,o.b,o.a,r.a],styles:[""]}),t})(),Bt=(()=>{class t{constructor(t){this.http=t,this.baseUrl=p.a.baseUrl}listPending(t,c,i,s){let e=(new u.f).set("_page",t).set("_limit",c);return""!==i&&(""===s&&(s="asc"),e=e.append("sort",`${i}:${s}`)),this.http.get(this.baseUrl+"/api/assign/mining-companies",{params:e,observe:"response"})}searchPending(t,c,i,s,e){let r=(new u.f).set("_page",t).set("_limit",c);return""!==i&&(""===s&&(s="asc"),r=r.append("sort",`${i}:${s}`)),this.http.post(this.baseUrl+"/api/assign/mining-companies",{keyword:e},{params:r,observe:"response"})}listActive(t,c,i,s,e){let r=(new u.f).set("_page",c).set("_limit",i);return""!==s&&(""===e&&(e="asc"),r=r.append("sort",`${s}:${e}`)),this.http.get(`${this.baseUrl}/api/assigned/mining-companies/${t}`,{params:r,observe:"response"})}searchActive(t,c,i,s,e,r){let n=(new u.f).set("_page",c).set("_limit",i);return""!==s&&(""===e&&(e="asc"),n=n.append("sort",`${s}:${e}`)),this.http.post(`${this.baseUrl}/api/assigned/mining-companies/${t}`,{keyword:r},{params:n,observe:"response"})}assign(t){return this.http.post(this.baseUrl+"/api/assigned/mining-company",t)}remove(t){return this.http.post(this.baseUrl+"/api/assigned/mining-company/delete",t)}}return t.\u0275fac=function(c){return new(c||t)(m.gc(u.b))},t.\u0275prov=m.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Xt(t,c){1&t&&(m.cc(0,"div",21),m.cc(1,"h4"),m.Lc(2,"No records found"),m.bc(),m.bc())}function Tt(t,c){if(1&t){const t=m.dc();m.ac(0),m.cc(1,"button",28),m.kc("click",(function(){m.Dc(t);const c=m.mc().$implicit;return m.mc(2).onAssign(c)})),m.Xb(2,"i",29),m.bc(),m.Zb()}}function Ut(t,c){if(1&t){const t=m.dc();m.ac(0),m.cc(1,"button",30),m.kc("click",(function(){m.Dc(t);const c=m.mc().$implicit;return m.mc(2).onDelete(c)})),m.Xb(2,"i",31),m.bc(),m.Zb()}}function Gt(t,c){if(1&t&&(m.cc(0,"tr"),m.cc(1,"td"),m.Lc(2),m.bc(),m.cc(3,"td"),m.Lc(4),m.bc(),m.cc(5,"td"),m.Lc(6),m.bc(),m.cc(7,"td"),m.Lc(8),m.bc(),m.cc(9,"td"),m.Lc(10),m.bc(),m.cc(11,"td",26),m.Jc(12,Tt,3,0,"ng-container",27),m.Jc(13,Ut,3,0,"ng-container",27),m.bc(),m.bc()),2&t){const t=c.$implicit,i=m.mc(2);m.Kb(2),m.Mc(t.username),m.Kb(2),m.Mc(t.email),m.Kb(2),m.Mc(t.first_name),m.Kb(2),m.Mc(t.last_name),m.Kb(2),m.Mc(i.getUserRoles(t)),m.Kb(2),m.sc("ngIf",0===i.tab),m.Kb(1),m.sc("ngIf",1===i.tab)}}function Ot(t,c){if(1&t){const t=m.dc();m.cc(0,"div",22),m.cc(1,"table",23),m.cc(2,"thead"),m.cc(3,"tr"),m.cc(4,"th"),m.cc(5,"app-sort-column",24),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(6,"th"),m.cc(7,"app-sort-column",24),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(8,"th"),m.cc(9,"app-sort-column",24),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(10,"th"),m.cc(11,"app-sort-column",24),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(12,"th"),m.Lc(13,"Role"),m.bc(),m.Xb(14,"th"),m.bc(),m.bc(),m.cc(15,"tbody"),m.Jc(16,Gt,14,7,"tr",25),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(5),m.sc("name","Username")("sort","username")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Email")("sort","email")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","First name")("sort","first_name")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Last name")("sort","last_name")("dir",t.sortDir)("current",t.sort),m.Kb(5),m.sc("ngForOf",t.list)}}function Wt(t,c){if(1&t){const t=m.dc();m.cc(0,"div",32),m.cc(1,"div",33),m.cc(2,"pagination",34),m.kc("ngModelChange",(function(c){return m.Dc(t),m.mc().page=c}))("pageChanged",(function(c){return m.Dc(t),m.mc().pageChanged(c)})),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(2),m.sc("totalItems",t.totalCount)("itemsPerPage",t.pageSize)("maxSize",t.MAX_PAGE_NUMBERS)("ngModel",t.page)}}const Rt=function(t){return{active:t}};let Jt=(()=>{class t{constructor(t,c,i,s,e,r,n){this.route=t,this.router=c,this.userService=i,this.miningCompanyService=s,this.msService=e,this.toastr=r,this.modalService=n,this.mining_company="",this.isLoading=!1,this.list=[],this.totalCount=0,this.pageSize=b.a.PAGE_SIZE,this.page=1,this.search="",this.sort="username",this.sortDir="asc",this.tab=1,this.sx=0,this.sy=0,this.uiState="setup.mining-company.user-listing",this.isEmpty=h.a.isEmpty,this.PAGE_SIZE=b.a.PAGE_SIZE,this.MAX_PAGE_NUMBERS=b.a.MAX_PAGE_NUMBERS}ngOnInit(){this.route.paramMap.subscribe(t=>{this.mining_company_id=t.get("mining_company_id"),this.isLoading=!0,this.loadMiningCompany()}),this.subs=this.msService.get().subscribe(t=>{if(t.name===this.uiState){const c=t.data;this.page=c.page,this.sort=c.sort,this.sortDir=c.dir,this.search=c.search,this.sx=c.sx,this.sy=c.sy}})}ngOnDestroy(){this.subs.unsubscribe()}loadMiningCompany(){this.miningCompanyService.edit(this.mining_company_id).subscribe(t=>{this.mining_company=" - "+t.name,this.load()})}load(){if(""!==this.search)return void this.onSearch(this.search);this.isLoading=!0;let t=null;t=0===this.tab?this.userService.listPending(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir):this.userService.listActive(this.mining_company_id,this.page,b.a.PAGE_SIZE,this.sort,this.sortDir),t.subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})}onSearch(t){this.search=t,this.isLoading=!0;let c=null;c=0===this.tab?this.userService.searchPending(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir,t):this.userService.searchActive(this.mining_company_id,this.page,b.a.PAGE_SIZE,this.sort,this.sortDir,t),c.subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})}pageChanged(t){this.page=t.page,this.load()}onSortBy(t){""===t.sort&&"asc"===t.dir?(this.sort="username",this.sortDir="asc"):(this.sort=t.sort,this.sortDir=t.dir),this.load()}onTab(t){return this.tab!==t&&(this.page=1),this.tab=t,this.load(),!1}onBack(){this.router.navigate(["/ams/setup/mining-company/list"])}onAssign(t){this.userService.assign({mining_company_id:this.mining_company_id,user_id:t.id}).subscribe(t=>{this.toastr.success("User successfully assigned"),this.load()})}onDelete(t){this.bsModalRef=this.modalService.show(l.a,{initialState:{title:"Delete User from "+this._mining_company,message:`Are you sure to delete this User ${t.username} from ${this._mining_company} ?`}}),this.bsModalRef.content.onClose.subscribe(c=>{!0===c.result&&this.userService.remove({mining_company_id:this.mining_company_id,user_id:t.id}).subscribe(t=>{this.toastr.success("User successfully deleted"),this.load()})})}getUserRoles(t){return t.groups.map(t=>t.name).join(", ")}get _mining_company(){return this.mining_company.replace(" - ","")}}return t.\u0275fac=function(c){return new(c||t)(m.Wb(d.a),m.Wb(d.g),m.Wb(Bt),m.Wb(gt.a),m.Wb(f.a),m.Wb(v.b),m.Wb(n.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-user-listing"]],decls:28,vars:11,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-6","col-12","p-1"],[3,"search","onSearch"],[1,"col-sm-6","col-12","p-1","text-right"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"fas","fa-chevron-circle-left"],[1,"card-body"],["role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["data-toggle","pill","href","#","role","tab",1,"nav-link",3,"ngClass","click"],["class","text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover"],[3,"name","sort","dir","current","onSortBy"],[4,"ngFor","ngForOf"],[1,"text-nowrap"],[4,"ngIf"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-plus"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"card-footer"],[1,"float-right"],[3,"totalItems","itemsPerPage","maxSize","ngModel","ngModelChange","pageChanged"]],template:function(t,c){1&t&&(m.cc(0,"section",0),m.cc(1,"div",1),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"h1",4),m.Lc(5),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(6,"section",5),m.cc(7,"div",1),m.cc(8,"div",6),m.cc(9,"div",7),m.cc(10,"div",8),m.cc(11,"div",9),m.cc(12,"app-search-input",10),m.kc("onSearch",(function(t){return c.onSearch(t)})),m.bc(),m.bc(),m.cc(13,"div",11),m.cc(14,"button",12),m.kc("click",(function(){return c.onBack()})),m.Xb(15,"i",13),m.Lc(16," Back"),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(17,"div",14),m.cc(18,"ul",15),m.cc(19,"li",16),m.cc(20,"a",17),m.kc("click",(function(){return c.onTab(1)})),m.Lc(21,"Active"),m.bc(),m.bc(),m.cc(22,"li",16),m.cc(23,"a",17),m.kc("click",(function(){return c.onTab(0)})),m.Lc(24,"Pending"),m.bc(),m.bc(),m.bc(),m.Jc(25,Xt,3,0,"div",18),m.Jc(26,Ot,17,17,"div",19),m.bc(),m.Jc(27,Wt,3,4,"div",20),m.bc(),m.bc(),m.bc()),2&t&&(m.Kb(5),m.Nc("User Listing ",c.mining_company,""),m.Kb(7),m.sc("search",c.search),m.Kb(8),m.sc("ngClass",m.vc(7,Rt,1===c.tab)),m.Kb(3),m.sc("ngClass",m.vc(9,Rt,0===c.tab)),m.Kb(2),m.sc("ngIf",c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",!c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",c.totalCount))},directives:[y.a,s.k,s.m,_.a,s.l,a.a,e.j,e.l],styles:[""]}),t})();var qt=i("WF//");function $t(t,c){1&t&&(m.cc(0,"div",18),m.cc(1,"h4"),m.Lc(2,"No records found"),m.bc(),m.bc())}function Ft(t,c){if(1&t){const t=m.dc();m.cc(0,"tr"),m.cc(1,"td"),m.Lc(2),m.bc(),m.cc(3,"td"),m.Lc(4),m.bc(),m.cc(5,"td"),m.Lc(6),m.bc(),m.cc(7,"td",23),m.cc(8,"button",24),m.kc("click",(function(){m.Dc(t);const i=c.$implicit;return m.mc(2).onEdit(i)})),m.Xb(9,"i",25),m.bc(),m.cc(10,"button",26),m.kc("click",(function(){m.Dc(t);const i=c.$implicit;return m.mc(2).onDelete(i)})),m.Xb(11,"i",27),m.bc(),m.bc(),m.bc()}if(2&t){const t=c.$implicit;m.Kb(2),m.Mc(t.name),m.Kb(2),m.Mc(t.material_type),m.Kb(2),m.Mc(t.grade)}}function Zt(t,c){if(1&t){const t=m.dc();m.cc(0,"div",19),m.cc(1,"table",20),m.cc(2,"thead"),m.cc(3,"tr"),m.cc(4,"th"),m.cc(5,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(6,"th"),m.cc(7,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.cc(8,"th"),m.cc(9,"app-sort-column",21),m.kc("onSortBy",(function(c){return m.Dc(t),m.mc().onSortBy(c)})),m.bc(),m.bc(),m.Xb(10,"th"),m.bc(),m.bc(),m.cc(11,"tbody"),m.Jc(12,Ft,12,3,"tr",22),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(5),m.sc("name","Name")("sort","name")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Material Type")("sort","material_type")("dir",t.sortDir)("current",t.sort),m.Kb(2),m.sc("name","Grade")("sort","grade")("dir",t.sortDir)("current",t.sort),m.Kb(3),m.sc("ngForOf",t.list)}}function Ht(t,c){if(1&t){const t=m.dc();m.cc(0,"div",28),m.cc(1,"div",29),m.cc(2,"pagination",30),m.kc("ngModelChange",(function(c){return m.Dc(t),m.mc().page=c}))("pageChanged",(function(c){return m.Dc(t),m.mc().pageChanged(c)})),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(2),m.sc("totalItems",t.totalCount)("itemsPerPage",t.pageSize)("maxSize",t.MAX_PAGE_NUMBERS)("ngModel",t.page)}}let zt=(()=>{class t{constructor(t,c,i,s,e){this.router=t,this.materialService=c,this.msService=i,this.toastr=s,this.modalService=e,this.isLoading=!1,this.list=[],this.totalCount=0,this.pageSize=b.a.PAGE_SIZE,this.page=1,this.search="",this.sort="name",this.sortDir="asc",this.sx=0,this.sy=0,this.uiState="setup.material.material-listing",this.isEmpty=h.a.isEmpty,this.PAGE_SIZE=b.a.PAGE_SIZE,this.MAX_PAGE_NUMBERS=b.a.MAX_PAGE_NUMBERS,this.subs=this.msService.get().subscribe(t=>{if(t.name===this.uiState){const c=t.data;this.page=c.page,this.sort=c.sort,this.sortDir=c.dir,this.search=c.search,this.sx=c.sx,this.sy=c.sy}})}ngOnInit(){this.load()}ngOnDestroy(){this.subs.unsubscribe()}load(){""===this.search?(this.isLoading=!0,this.materialService.list(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir).subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})):this.onSearch(this.search)}onSearch(t){this.search=t,this.isLoading=!0,this.materialService.search(this.page,b.a.PAGE_SIZE,this.sort,this.sortDir,t).subscribe(t=>{this.list=t.body,this.totalCount=Number(t.headers.get(b.a.HTTP_HEADER.X_TOTAL_COUNT)),this.isLoading=!1,setTimeout(()=>{window.scrollTo(this.sx,this.sy)},200)},t=>{},()=>{this.isLoading=!1})}pageChanged(t){this.page=t.page,this.load()}onSortBy(t){""===t.sort&&"asc"===t.dir?(this.sort="name",this.sortDir="asc"):(this.sort=t.sort,this.sortDir=t.dir),this.load()}goto(t){this.msService.send(this.uiState,{page:this.page,sort:this.sort,dir:this.sortDir,search:this.search,sx:window.scrollX,sy:window.scrollY}),this.router.navigate(["/ams/setup/material/"+t])}onEdit(t){this.goto("edit/"+t.id)}onDelete(t){this.bsModalRef=this.modalService.show(l.a,{initialState:{title:"Delete Material",message:`Are you sure to delete this Material ${t.name} ?`}}),this.bsModalRef.content.onClose.subscribe(c=>{!0===c.result&&this.materialService.remove(t.id).subscribe(t=>{this.toastr.success("Material successfully deleted"),this.load()})})}}return t.\u0275fac=function(c){return new(c||t)(m.Wb(d.g),m.Wb(qt.a),m.Wb(f.a),m.Wb(v.b),m.Wb(n.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-material-listing"]],decls:21,vars:4,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-6","col-12","p-1"],[3,"search","onSearch"],[1,"col-sm-6","col-12","p-1","text-right"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card-body"],["class","text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover"],[3,"name","sort","dir","current","onSortBy"],[4,"ngFor","ngForOf"],[1,"text-nowrap"],["type","button",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"fas","fa-pencil-alt"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"card-footer"],[1,"float-right"],[3,"totalItems","itemsPerPage","maxSize","ngModel","ngModelChange","pageChanged"]],template:function(t,c){1&t&&(m.cc(0,"section",0),m.cc(1,"div",1),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"h1",4),m.Lc(5,"Material Listing"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(6,"section",5),m.cc(7,"div",1),m.cc(8,"div",6),m.cc(9,"div",7),m.cc(10,"div",8),m.cc(11,"div",9),m.cc(12,"app-search-input",10),m.kc("onSearch",(function(t){return c.onSearch(t)})),m.bc(),m.bc(),m.cc(13,"div",11),m.cc(14,"button",12),m.kc("click",(function(){return c.goto("create")})),m.Xb(15,"i",13),m.Lc(16," Add New"),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(17,"div",14),m.Jc(18,$t,3,0,"div",15),m.Jc(19,Zt,13,13,"div",16),m.bc(),m.Jc(20,Ht,3,4,"div",17),m.bc(),m.bc(),m.bc()),2&t&&(m.Kb(12),m.sc("search",c.search),m.Kb(6),m.sc("ngIf",c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",!c.isEmpty(c.list)&&!c.isLoading),m.Kb(1),m.sc("ngIf",c.totalCount&&!c.isLoading))},directives:[y.a,s.m,_.a,s.l,a.a,e.j,e.l],styles:[""]}),t})();function jt(t,c){1&t&&(m.cc(0,"small",23),m.Lc(1," Name is required "),m.bc())}const Vt=function(t){return{"is-invalid":t}};function Qt(t,c){if(1&t){const t=m.dc();m.cc(0,"div",1),m.cc(1,"form",7),m.kc("ngSubmit",(function(){return m.Dc(t),m.mc().onSubmit()})),m.cc(2,"div",8),m.cc(3,"div",9),m.cc(4,"div",10),m.cc(5,"label",11),m.Lc(6,"Name\xa0"),m.cc(7,"span",12),m.Lc(8,"*"),m.bc(),m.bc(),m.cc(9,"div",13),m.Xb(10,"input",14),m.Jc(11,jt,2,0,"small",15),m.bc(),m.bc(),m.cc(12,"div",10),m.cc(13,"label",11),m.Lc(14,"Material Type"),m.bc(),m.cc(15,"div",13),m.Xb(16,"input",16),m.bc(),m.bc(),m.cc(17,"div",10),m.cc(18,"label",11),m.Lc(19,"Grade"),m.bc(),m.cc(20,"div",13),m.Xb(21,"input",17),m.bc(),m.bc(),m.bc(),m.cc(22,"div",18),m.cc(23,"button",19),m.kc("click",(function(){return m.Dc(t),m.mc().onBack()})),m.Xb(24,"i",20),m.Lc(25," Back"),m.bc(),m.cc(26,"button",21),m.Xb(27,"i",22),m.Lc(28," Save"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc()}if(2&t){const t=m.mc();m.Kb(1),m.sc("formGroup",t.mform),m.Kb(9),m.sc("ngClass",m.vc(3,Vt,t.invalid("name"))),m.Kb(1),m.sc("ngIf",t.invalid("name")&&t.f.name.hasError("required"))}}let Yt=(()=>{class t extends x.a{constructor(t,c,i,s,e){super(),this.fb=t,this.route=c,this.router=i,this.materialService=s,this.toastr=e,this.isLoading=!1,this.data={id:""},this.isEdit=!1,this.createForm()}ngOnInit(){this.route.paramMap.subscribe(t=>{this.id=t.get("id"),K.a.isNull(this.id)||(this.isEdit=!0),this.load()})}createForm(){this.mform=this.fb.group({name:["",[e.r.required]],material_type:[""],grade:[""]})}setForm(){const t=this.data;this.mform.patchValue({name:t.name,material_type:t.material_type,grade:t.grade})}load(){K.a.isNull(this.id)||K.a.isUndefined(this.id)||(this.isLoading=!0,this.materialService.edit(this.id).subscribe(t=>{this.data=t,this.setForm()},t=>{},()=>{this.isLoading=!1}))}onBack(){this.router.navigate(["/ams/setup/material/list"])}onSubmit(){if(this.mform.invalid)return void this.mform.markAllAsTouched();const t=this.mform.value,c={name:t.name,material_type:t.material_type,grade:t.grade};this.isEdit?this.materialService.update(this.data.id,c).subscribe(t=>{this.toastr.success("Material successfully updated")}):this.materialService.create(c).subscribe(t=>{this.toastr.success("New Material successfully created"),this.mform.reset()})}}return t.\u0275fac=function(c){return new(c||t)(m.Wb(e.c),m.Wb(d.a),m.Wb(d.g),m.Wb(qt.a),m.Wb(v.b))},t.\u0275cmp=m.Qb({type:t,selectors:[["app-material-create"]],features:[m.Hb],decls:8,vars:1,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],["class","container-fluid",4,"ngIf"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-2","col-form-label"],[1,"text-danger"],[1,"col-sm-10"],["type","text","placeholder","Name","name","name","formControlName","name",1,"form-control",3,"ngClass"],["class","badge badge-danger",4,"ngIf"],["type","text","placeholder","Material Type","name","material_type","formControlName","material_type",1,"form-control"],["type","text","placeholder","Grade","name","grade","formControlName","grade",1,"form-control"],[1,"card-footer"],["type","button",1,"btn","btn-outline-dark","mr-2",3,"click"],[1,"fas","fa-chevron-circle-left"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],[1,"badge","badge-danger"]],template:function(t,c){1&t&&(m.cc(0,"section",0),m.cc(1,"div",1),m.cc(2,"div",2),m.cc(3,"div",3),m.cc(4,"h1",4),m.Lc(5,"Add / Edit Material"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(6,"section",5),m.Jc(7,Qt,29,5,"div",6),m.bc()),2&t&&(m.Kb(7),m.sc("ngIf",!c.isLoading))},directives:[s.m,e.t,e.k,e.e,e.a,e.j,e.d,s.k],styles:[""]}),t})();const tc=[{path:"user",children:[{path:"list",component:C},{path:"create",component:O},{path:"edit/:id",component:O}]},{path:"country",children:[{path:"list",component:F},{path:"create",component:V},{path:"edit/:id",component:V}]},{path:"state",children:[{path:"list",component:st},{path:"create",component:at},{path:"edit/:id",component:at}]},{path:"buyer",children:[{path:"list",component:dt.a},{path:"create",component:lt.a},{path:"edit/:id",component:lt.a},{path:"truck/:buyer_id",children:[{path:"list",component:bt.a},{path:"create",component:ht.a},{path:"edit/:id",component:ht.a}]},{path:"driver/:buyer_id",children:[{path:"list",component:mt.a},{path:"create",component:ut.a},{path:"edit/:id",component:ut.a}]},{path:"user/:buyer_id",children:[{path:"list",component:pt.a}]}]},{path:"mining-company",children:[{path:"list",component:St},{path:"create",component:Pt},{path:"edit/:id",component:Pt},{path:"user/:mining_company_id",children:[{path:"list",component:Jt}]}]},{path:"material",children:[{path:"list",component:zt},{path:"create",component:Yt},{path:"edit/:id",component:Yt}]}];let cc=(()=>{class t{}return t.\u0275mod=m.Ub({type:t}),t.\u0275inj=m.Tb({factory:function(c){return new(c||t)},imports:[[d.i.forChild(tc)],d.i]}),t})();var ic=i("jgPy"),sc=i("DLVw"),ec=i("lSWO"),rc=i("kny6"),nc=i("pr82");let oc=(()=>{class t{}return t.\u0275mod=m.Ub({type:t}),t.\u0275inj=m.Tb({factory:function(c){return new(c||t)},providers:[g,W.a,Q.a,sc.a,ec.a,rc.a,nc.a,gt.a,Bt,qt.a],imports:[[s.c,cc,e.g,e.o,ic.a,r.b,n.c.forRoot(),o.c.forRoot(),a.b.forRoot()]]}),t})()}}]);