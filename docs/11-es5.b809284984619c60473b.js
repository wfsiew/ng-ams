function _classCallCheck(c,t){if(!(c instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}function _createClass(c,t,e){return t&&_defineProperties(c.prototype,t),e&&_defineProperties(c,e),c}function _inherits(c,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(t&&t.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),t&&_setPrototypeOf(c,t)}function _setPrototypeOf(c,t){return(_setPrototypeOf=Object.setPrototypeOf||function(c,t){return c.__proto__=t,c})(c,t)}function _createSuper(c){var t=_isNativeReflectConstruct();return function(){var e,i=_getPrototypeOf(c);if(t){var n=_getPrototypeOf(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(c,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(c):t}function _assertThisInitialized(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(c){return!1}}function _getPrototypeOf(c){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)})(c)}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4gke":function(c,t,e){"use strict";e.r(t),e.d(t,"MiningCompanyModule",(function(){return vc}));var i=e("ofXK"),n=e("3Pt+"),r=e("ZOsW"),a=e("LqlI"),o=e("ienR"),s=e("6No5"),d=e("tyNb"),l=e("LvDl"),u=e.n(l),b=e("g/JT"),m=e("fwOm"),_=e("fXoL"),f=e("wgH9"),h=e("IYfF"),p=e("a+IK"),g=e("5eHb");function v(c,t){1&c&&(_.cc(0,"small",42),_.Lc(1," Name is required "),_.bc())}function y(c,t){1&c&&(_.cc(0,"small",42),_.Lc(1," Business Registration No. is required "),_.bc())}function L(c,t){1&c&&(_.cc(0,"small",42),_.Lc(1," Mining License No. is required "),_.bc())}function k(c,t){1&c&&(_.cc(0,"small",42),_.Lc(1," Contact No. is required "),_.bc())}function C(c,t){1&c&&(_.cc(0,"small",42),_.Lc(1," Address 1 is required "),_.bc())}function S(c,t){1&c&&(_.cc(0,"small",42),_.Lc(1," Postcode is required "),_.bc())}function K(c,t){1&c&&(_.cc(0,"small",42),_.Lc(1," City is required "),_.bc())}function D(c,t){1&c&&(_.cc(0,"small",42),_.Lc(1," State is required "),_.bc())}function N(c,t){1&c&&(_.cc(0,"small",42),_.Lc(1," Country is required "),_.bc())}var I=function(c){return{"is-invalid":c}},w=function(){return{containerClass:"theme-blue",dateInputFormat:"YYYY-MM-DD"}};function M(c,t){if(1&c){var e=_.dc();_.cc(0,"div",1),_.cc(1,"form",7),_.kc("ngSubmit",(function(){return _.Dc(e),_.mc().onSubmit()})),_.cc(2,"div",8),_.cc(3,"div",9),_.cc(4,"div",10),_.cc(5,"label",11),_.Lc(6,"Name\xa0"),_.cc(7,"span",12),_.Lc(8,"*"),_.bc(),_.bc(),_.cc(9,"div",13),_.Xb(10,"input",14),_.Jc(11,v,2,0,"small",15),_.bc(),_.bc(),_.cc(12,"div",10),_.cc(13,"label",11),_.Lc(14,"Business Registration No.\xa0"),_.cc(15,"span",12),_.Lc(16,"*"),_.bc(),_.bc(),_.cc(17,"div",13),_.Xb(18,"input",16),_.Jc(19,y,2,0,"small",15),_.bc(),_.bc(),_.cc(20,"div",10),_.cc(21,"label",11),_.Lc(22,"Mining License No.\xa0"),_.cc(23,"span",12),_.Lc(24,"*"),_.bc(),_.bc(),_.cc(25,"div",13),_.Xb(26,"input",17),_.Jc(27,L,2,0,"small",15),_.bc(),_.bc(),_.cc(28,"div",10),_.cc(29,"label",11),_.Lc(30,"License Expiry\xa0"),_.cc(31,"span",12),_.Lc(32,"*"),_.bc(),_.bc(),_.cc(33,"div",18),_.cc(34,"div",19),_.Xb(35,"input",20,21),_.cc(37,"div",22),_.cc(38,"button",23),_.kc("click",(function(){return _.Dc(e),_.Bc(36).show()})),_.Xb(39,"i",24),_.bc(),_.bc(),_.bc(),_.bc(),_.bc(),_.cc(40,"div",10),_.cc(41,"label",11),_.Lc(42,"Contact No.\xa0"),_.cc(43,"span",12),_.Lc(44,"*"),_.bc(),_.bc(),_.cc(45,"div",13),_.Xb(46,"input",25),_.Jc(47,k,2,0,"small",15),_.bc(),_.bc(),_.cc(48,"div",10),_.cc(49,"label",11),_.Lc(50,"Email"),_.bc(),_.cc(51,"div",13),_.Xb(52,"input",26),_.bc(),_.bc(),_.cc(53,"div",10),_.cc(54,"label",11),_.Lc(55,"Fax No."),_.bc(),_.cc(56,"div",13),_.Xb(57,"input",27),_.bc(),_.bc(),_.cc(58,"div",10),_.cc(59,"label",11),_.Lc(60,"Address\xa0"),_.cc(61,"span",12),_.Lc(62,"*"),_.bc(),_.bc(),_.cc(63,"div",13),_.Xb(64,"input",28),_.Jc(65,C,2,0,"small",15),_.bc(),_.bc(),_.cc(66,"div",10),_.cc(67,"div",29),_.Xb(68,"input",30),_.bc(),_.bc(),_.cc(69,"div",10),_.cc(70,"div",29),_.Xb(71,"input",31),_.bc(),_.bc(),_.cc(72,"div",10),_.cc(73,"label",11),_.Lc(74,"Postcode\xa0"),_.cc(75,"span",12),_.Lc(76,"*"),_.bc(),_.bc(),_.cc(77,"div",32),_.Xb(78,"input",33),_.Jc(79,S,2,0,"small",15),_.bc(),_.cc(80,"label",34),_.Lc(81,"City\xa0"),_.cc(82,"span",12),_.Lc(83,"*"),_.bc(),_.bc(),_.cc(84,"div",35),_.Xb(85,"input",36),_.Jc(86,K,2,0,"small",15),_.bc(),_.bc(),_.cc(87,"div",10),_.cc(88,"label",11),_.Lc(89,"State\xa0"),_.cc(90,"span",12),_.Lc(91,"*"),_.bc(),_.bc(),_.cc(92,"div",32),_.Xb(93,"ng-select",37),_.Jc(94,D,2,0,"small",15),_.bc(),_.cc(95,"label",34),_.Lc(96,"Country\xa0"),_.cc(97,"span",12),_.Lc(98,"*"),_.bc(),_.bc(),_.cc(99,"div",35),_.cc(100,"ng-select",38),_.kc("change",(function(c){return _.Dc(e),_.mc().onChangeCountry(c)})),_.bc(),_.Jc(101,N,2,0,"small",15),_.bc(),_.bc(),_.bc(),_.cc(102,"div",39),_.cc(103,"button",40),_.Xb(104,"i",41),_.Lc(105," Save"),_.bc(),_.bc(),_.bc(),_.bc(),_.bc()}if(2&c){var i=_.Bc(36),n=_.mc();_.Kb(1),_.sc("formGroup",n.mform),_.Kb(9),_.sc("ngClass",_.vc(23,I,n.invalid("name"))),_.Kb(1),_.sc("ngIf",n.invalid("name")&&n.f.name.hasError("required")),_.Kb(7),_.sc("ngClass",_.vc(25,I,n.invalid("registration_num"))),_.Kb(1),_.sc("ngIf",n.invalid("registration_num")&&n.f.registration_num.hasError("required")),_.Kb(7),_.sc("ngClass",_.vc(27,I,n.invalid("registration_num"))),_.Kb(1),_.sc("ngIf",n.invalid("mining_license_num")&&n.f.mining_license_num.hasError("required")),_.Kb(8),_.sc("bsConfig",_.uc(29,w)),_.Kb(3),_.Lb("aria-expanded",i.isOpen),_.Kb(8),_.sc("ngClass",_.vc(30,I,n.invalid("contact_no"))),_.Kb(1),_.sc("ngIf",n.invalid("contact_no")&&n.f.contact_no.hasError("required")),_.Kb(17),_.sc("ngClass",_.vc(32,I,n.invalid("addr_line_1"))),_.Kb(1),_.sc("ngIf",n.invalid("addr_line_1")&&n.f.addr_line_1.hasError("required")),_.Kb(3),_.sc("ngClass",_.vc(34,I,n.invalid("addr_line_2"))),_.Kb(3),_.sc("ngClass",_.vc(36,I,n.invalid("addr_line_3"))),_.Kb(7),_.sc("ngClass",_.vc(38,I,n.invalid("postcode"))),_.Kb(1),_.sc("ngIf",n.invalid("postcode")&&n.f.postcode.hasError("required")),_.Kb(6),_.sc("ngClass",_.vc(40,I,n.invalid("city"))),_.Kb(1),_.sc("ngIf",n.invalid("city")&&n.f.city.hasError("required")),_.Kb(7),_.sc("items",n.stateList),_.Kb(1),_.sc("ngIf",n.invalid("state_id")&&n.f.state_id.hasError("required")),_.Kb(6),_.sc("items",n.countryList),_.Kb(1),_.sc("ngIf",n.invalid("country_id")&&n.f.country_id.hasError("required"))}}var E,O=((E=function(c){_inherits(e,c);var t=_createSuper(e);function e(c,i,n,r,a){var o;return _classCallCheck(this,e),(o=t.call(this)).fb=c,o.lookupService=i,o.authService=n,o.miningCompanyService=r,o.toastr=a,o.isLoading=!1,o.data={id:""},o.countryList=[],o.stateList=[],o.createForm(),o}return _createClass(e,[{key:"ngOnInit",value:function(){var c=this.authService.loadUser();this.id=c.mining_company_id,this.load()}},{key:"createForm",value:function(){this.mform=this.fb.group({name:["",[n.r.required]],registration_num:["",[n.r.required]],mining_license_num:["",[n.r.required]],mining_license_expiry_date:[null,[n.r.required]],contact_no:["",[n.r.required]],email:[""],fax_no:[""],addr_line_1:["",[n.r.required]],addr_line_2:[""],addr_line_3:[""],postcode:["",[n.r.required]],city:["",[n.r.required]],state_id:[null,[n.r.required]],country_id:[null,[n.r.required]]})}},{key:"setForm",value:function(){var c=this,t=this.data;this.mform.patchValue({name:t.name,registration_num:t.registration_num,mining_license_num:t.mining_license_num,mining_license_expiry_date:t.mining_license_expiry_date,contact_no:t.contact_no,email:t.email,fax_no:t.fax_no,addr_line_1:t.addr_line_1,addr_line_2:t.addr_line_2,addr_line_3:t.addr_line_3,postcode:t.postcode,city:t.city,country_id:t.country.id}),this.lookupService.listStates(t.country.id).subscribe((function(e){c.stateList=e,c.mform.patchValue({state_id:t.state.id})}))}},{key:"load",value:function(){var c=this;this.isLoading=!0,this.lookupService.listCountry().subscribe((function(t){c.countryList=t,c.loadDetails()}),(function(t){c.isLoading=!1}))}},{key:"loadDetails",value:function(){var c=this;u.a.isNull(this.id)||u.a.isUndefined(this.id)?this.isLoading=!1:this.miningCompanyService.edit(this.id).subscribe((function(t){c.data=t,c.setForm()}),(function(c){}),(function(){c.isLoading=!1}))}},{key:"onSubmit",value:function(){var c=this;if(this.mform.invalid)this.mform.markAllAsTouched();else{var t=this.mform.value,e={name:t.name,registration_num:t.registration_num,mining_license_num:t.mining_license_num,mining_license_expiry_date:b.a.toDateStr(t.mining_license_expiry_date),contact_no:t.contact_no,email:t.email,fax_no:t.fax_no,addr_line_1:t.addr_line_1,addr_line_2:t.addr_line_2,addr_line_3:t.addr_line_3,postcode:t.postcode,city:t.city,state_id:t.state_id,country_id:t.country_id};this.miningCompanyService.update(this.data.id,e).subscribe((function(t){c.toastr.success("Mining Company successfully updated")}))}}},{key:"onChangeCountry",value:function(c){var t=this;this.lookupService.listStates(c.id).subscribe((function(c){t.stateList=c,t.mform.patchValue({state_id:null})}))}}]),e}(m.a)).\u0275fac=function(c){return new(c||E)(_.Wb(n.c),_.Wb(f.a),_.Wb(h.a),_.Wb(p.a),_.Wb(g.b))},E.\u0275cmp=_.Qb({type:E,selectors:[["app-company-details"]],features:[_.Hb],decls:8,vars:1,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],["class","container-fluid",4,"ngIf"],[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-2","col-form-label"],[1,"text-danger"],[1,"col-sm-10"],["type","text","placeholder","Name","name","name","formControlName","name",1,"form-control",3,"ngClass"],["class","badge badge-danger",4,"ngIf"],["type","text","placeholder","Business Registration No.","name","registration_num","formControlName","registration_num",1,"form-control",3,"ngClass"],["type","text","placeholder","Mining License No.","name","mining_license_num","formControlName","mining_license_num",1,"form-control",3,"ngClass"],[1,"col-sm-2","col-12"],[1,"input-group","date"],["type","text","placeholder","License Expiry","name","mining_license_expiry_date","formControlName","mining_license_expiry_date","bsDatepicker","",1,"form-control",3,"bsConfig"],["dp1","bsDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-default",3,"click"],[1,"fas","fa-calendar-alt"],["type","text","placeholder","Contact No.","name","contact_no","formControlName","contact_no",1,"form-control",3,"ngClass"],["type","text","placeholder","Email","name","email","formControlName","email",1,"form-control"],["type","text","placeholder","Fax No.","name","fax_no","formControlName","fax_no",1,"form-control"],["type","text","placeholder","Adress 1","name","addr_line_1","formControlName","addr_line_1",1,"form-control",3,"ngClass"],[1,"col-sm-10","offset-sm-2"],["type","text","placeholder","Adress 2","name","addr_line_2","formControlName","addr_line_2",1,"form-control",3,"ngClass"],["type","text","placeholder","Adress 3","name","addr_line_3","formControlName","addr_line_3",1,"form-control",3,"ngClass"],[1,"col-sm-3"],["type","text","placeholder","Postcode","name","postcode","formControlName","postcode",1,"form-control",3,"ngClass"],[1,"col-sm-1","col-form-label"],[1,"col-sm-6"],["type","text","placeholder","City","name","city","formControlName","city",1,"form-control",3,"ngClass"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","state_id","name","state_id",3,"items"],["bindLabel","name","bindValue","id","placeholder","Please select","formControlName","country_id","name","country_id",3,"items","change"],[1,"card-footer"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],[1,"badge","badge-danger"]],template:function(c,t){1&c&&(_.cc(0,"section",0),_.cc(1,"div",1),_.cc(2,"div",2),_.cc(3,"div",3),_.cc(4,"h1",4),_.Lc(5,"Company Details"),_.bc(),_.bc(),_.bc(),_.bc(),_.bc(),_.cc(6,"section",5),_.Jc(7,M,106,42,"div",6),_.bc()),2&c&&(_.Kb(7),_.sc("ngIf",!t.isLoading))},directives:[i.m,n.t,n.k,n.e,n.a,n.j,n.d,i.k,o.b,o.a,r.a],styles:[""]}),E),x=e("C7yL"),P=e("XNiG");function X(c,t){1&c&&(_.cc(0,"small",17),_.Lc(1," Actual Weight is required "),_.bc())}function R(c,t){1&c&&(_.cc(0,"small",17),_.Lc(1," Actual Weight is invalid "),_.bc())}var q,T,A=function(c){return{"is-invalid":c}},J=((q=function(c){_inherits(e,c);var t=_createSuper(e);function e(c,i){var n;return _classCallCheck(this,e),(n=t.call(this)).fb=c,n.bsModalRef=i,n.createForm(),n}return _createClass(e,[{key:"ngOnInit",value:function(){this.onClose=new P.a,this.mform.patchValue({actual_weight:this.actual_weight})}},{key:"createForm",value:function(){this.mform=this.fb.group({actual_weight:["",[n.r.required]]})}},{key:"onYes",value:function(){this.mform.invalid?this.mform.markAllAsTouched():(this.onClose.next({result:!0,actual_weight:this.mform.value.actual_weight}),this.bsModalRef.hide())}},{key:"onHide",value:function(){this.onClose.next({result:!1}),this.bsModalRef.hide()}}]),e}(m.a)).\u0275fac=function(c){return new(c||q)(_.Wb(n.c),_.Wb(a.a))},q.\u0275cmp=_.Qb({type:q,selectors:[["app-checkout-modal"]],features:[_.Hb],decls:25,vars:7,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-horizontal",3,"formGroup"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"text-danger"],[1,"col-sm-7"],["type","text","placeholder","Actual Weight (kg)","name","actual_weight","formControlName","actual_weight",1,"form-control",3,"ngClass"],["class","badge badge-danger",4,"ngIf"],[1,"col-sm-1","col-form-label"],[1,"modal-footer"],["type","button",1,"btn","btn-success","mr-2","pl-4","pr-4",3,"click"],["type","button",1,"btn","btn-default","pl-4","pr-4",3,"click"],[1,"badge","badge-danger"]],template:function(c,t){1&c&&(_.cc(0,"div",0),_.cc(1,"div",1),_.cc(2,"h4",2),_.Lc(3),_.bc(),_.cc(4,"button",3),_.kc("click",(function(){return t.bsModalRef.hide()})),_.cc(5,"span",4),_.Lc(6,"\xd7"),_.bc(),_.bc(),_.bc(),_.cc(7,"div",5),_.cc(8,"form",6),_.cc(9,"div",7),_.cc(10,"label",8),_.Lc(11,"Actual Weight\xa0"),_.cc(12,"span",9),_.Lc(13,"*"),_.bc(),_.bc(),_.cc(14,"div",10),_.Xb(15,"input",11),_.Jc(16,X,2,0,"small",12),_.Jc(17,R,2,0,"small",12),_.bc(),_.cc(18,"label",13),_.Lc(19,"kg"),_.bc(),_.bc(),_.bc(),_.bc(),_.cc(20,"div",14),_.cc(21,"button",15),_.kc("click",(function(){return t.onYes()})),_.Lc(22,"Check Out"),_.bc(),_.cc(23,"button",16),_.kc("click",(function(){return t.onHide()})),_.Lc(24,"Cancel"),_.bc(),_.bc(),_.bc()),2&c&&(_.Kb(3),_.Mc(t.title),_.Kb(5),_.sc("formGroup",t.mform),_.Kb(7),_.sc("ngClass",_.vc(5,A,t.invalid("actual_weight"))),_.Kb(1),_.sc("ngIf",t.invalid("actual_weight")&&t.f.actual_weight.hasError("required")),_.Kb(1),_.sc("ngIf",t.invalid("actual_weight")&&t.f.actual_weight.hasError("pattern")))},directives:[n.t,n.k,n.e,n.a,n.j,n.d,i.k,i.m],styles:[""]}),q),B=e("tk/3"),W=e("AytR"),G=((T=function(){function c(t){_classCallCheck(this,c),this.http=t,this.baseUrl=W.a.baseUrl}return _createClass(c,[{key:"list",value:function(c,t,e,i,n){var r=(new B.f).set("_page",t).set("_limit",e).set("status",c);return""!==i&&(""===n&&(n="asc"),r=r.append("sort","".concat(i,":").concat(n))),this.http.get(this.baseUrl+"/api/delivery-orders",{params:r,observe:"response"})}},{key:"search",value:function(c,t,e,i,n,r){var a=(new B.f).set("_page",t).set("_limit",e).set("status",c);return""!==i&&(""===n&&(n="asc"),a=a.append("sort","".concat(i,":").concat(n))),this.http.post(this.baseUrl+"/api/delivery-orders",{keyword:r},{params:a,observe:"response"})}},{key:"updateTime",value:function(c){return this.http.post("".concat(this.baseUrl,"/api/delivery-order/").concat(c.id,"/timestamp"),c)}}]),c}()).\u0275fac=function(c){return new(c||T)(_.gc(B.b))},T.\u0275prov=_.Sb({token:T,factory:T.\u0275fac,providedIn:"root"}),T),U=e("QLLi"),F=e("OpGx"),j=e("C4D8");function H(c,t){1&c&&(_.cc(0,"div",21),_.cc(1,"h4"),_.Lc(2,"No records found"),_.bc(),_.bc())}function Z(c,t){if(1&c&&(_.ac(0),_.Lc(1),_.Zb()),2&c){var e=_.mc().$implicit;_.Kb(1),_.Nc(" ",e.purchase_order_detail.weight," ")}}function V(c,t){if(1&c&&(_.ac(0),_.Lc(1),_.Zb()),2&c){var e=_.mc().$implicit;_.Kb(1),_.Nc(" ",e.actual_weight," ")}}function z(c,t){if(1&c){var e=_.dc();_.cc(0,"button",30),_.kc("click",(function(){_.Dc(e);var c=_.mc().$implicit;return _.mc(2).onCheckIn(c)})),_.Lc(1,"Check In"),_.bc()}}function Y(c,t){if(1&c){var e=_.dc();_.cc(0,"button",30),_.kc("click",(function(){_.Dc(e);var c=_.mc().$implicit;return _.mc(2).onCheckOut(c)})),_.Lc(1,"Check Out"),_.bc()}}function $(c,t){if(1&c){var e=_.dc();_.cc(0,"button",31),_.kc("click",(function(){_.Dc(e);var c=_.mc().$implicit;return _.mc(2).onPermit(c)})),_.Lc(1,"Permit"),_.bc()}}function Q(c,t){if(1&c&&(_.cc(0,"tr"),_.cc(1,"td"),_.Lc(2),_.bc(),_.cc(3,"td"),_.Lc(4),_.nc(5,"date"),_.bc(),_.cc(6,"td"),_.Lc(7),_.bc(),_.cc(8,"td"),_.Lc(9),_.bc(),_.cc(10,"td"),_.Lc(11),_.bc(),_.cc(12,"td"),_.Lc(13),_.bc(),_.cc(14,"td"),_.Jc(15,Z,2,1,"ng-container",26),_.Jc(16,V,2,1,"ng-container",26),_.bc(),_.cc(17,"td"),_.Lc(18),_.bc(),_.cc(19,"td"),_.Lc(20),_.nc(21,"date"),_.bc(),_.cc(22,"td"),_.Lc(23),_.nc(24,"date"),_.bc(),_.cc(25,"td",27),_.Jc(26,z,2,0,"button",28),_.Jc(27,Y,2,0,"button",28),_.Jc(28,$,2,0,"button",29),_.bc(),_.bc()),2&c){var e=t.$implicit,i=_.mc(2);_.Kb(2),_.Mc(e.do_num),_.Kb(2),_.Mc(_.pc(5,14,e.created_date,"d MMM yyyy h:mm:ss aaa")),_.Kb(3),_.Mc(e.purchase_order_detail.material.name),_.Kb(2),_.Mc(e.purchase_order_detail.truck.registration_num),_.Kb(2),_.Mc(e.purchase_order_detail.driver.name),_.Kb(2),_.Mc(e.purchase_order_detail.driver.id_num),_.Kb(2),_.sc("ngIf",!e.checkout_date),_.Kb(1),_.sc("ngIf",e.checkout_date),_.Kb(2),_.Mc(i.getDOStatus(e)),_.Kb(2),_.Mc(_.pc(21,17,e.checkin_date,"d MMM yyyy h:mm:ss aaa")),_.Kb(3),_.Mc(_.pc(24,20,e.checkout_date,"d MMM yyyy h:mm:ss aaa")),_.Kb(3),_.sc("ngIf",!e.checkin_date),_.Kb(1),_.sc("ngIf",!e.checkout_date&&e.checkin_date),_.Kb(1),_.sc("ngIf",null!==e.permit)}}function cc(c,t){if(1&c){var e=_.dc();_.cc(0,"div",22),_.cc(1,"table",23),_.cc(2,"thead"),_.cc(3,"tr"),_.cc(4,"th"),_.cc(5,"app-sort-column",24),_.kc("onSortBy",(function(c){return _.Dc(e),_.mc().onSortBy(c)})),_.bc(),_.bc(),_.cc(6,"th"),_.cc(7,"app-sort-column",24),_.kc("onSortBy",(function(c){return _.Dc(e),_.mc().onSortBy(c)})),_.bc(),_.bc(),_.cc(8,"th"),_.cc(9,"app-sort-column",24),_.kc("onSortBy",(function(c){return _.Dc(e),_.mc().onSortBy(c)})),_.bc(),_.bc(),_.cc(10,"th"),_.cc(11,"app-sort-column",24),_.kc("onSortBy",(function(c){return _.Dc(e),_.mc().onSortBy(c)})),_.bc(),_.bc(),_.cc(12,"th"),_.cc(13,"app-sort-column",24),_.kc("onSortBy",(function(c){return _.Dc(e),_.mc().onSortBy(c)})),_.bc(),_.bc(),_.cc(14,"th"),_.cc(15,"app-sort-column",24),_.kc("onSortBy",(function(c){return _.Dc(e),_.mc().onSortBy(c)})),_.bc(),_.bc(),_.cc(16,"th"),_.cc(17,"app-sort-column",24),_.kc("onSortBy",(function(c){return _.Dc(e),_.mc().onSortBy(c)})),_.bc(),_.bc(),_.cc(18,"th"),_.Lc(19,"Status"),_.bc(),_.cc(20,"th"),_.cc(21,"app-sort-column",24),_.kc("onSortBy",(function(c){return _.Dc(e),_.mc().onSortBy(c)})),_.bc(),_.bc(),_.cc(22,"th"),_.cc(23,"app-sort-column",24),_.kc("onSortBy",(function(c){return _.Dc(e),_.mc().onSortBy(c)})),_.bc(),_.bc(),_.Xb(24,"th"),_.bc(),_.bc(),_.cc(25,"tbody"),_.Jc(26,Q,29,23,"tr",25),_.bc(),_.bc(),_.bc()}if(2&c){var i=_.mc();_.Kb(5),_.sc("name","DO No.")("sort","do_num")("dir",i.sortDir)("current",i.sort),_.Kb(2),_.sc("name","Date")("sort","created_date")("dir",i.sortDir)("current",i.sort),_.Kb(2),_.sc("name","Material")("sort","purchase_order_detail__material__name")("dir",i.sortDir)("current",i.sort),_.Kb(2),_.sc("name","Truck")("sort","purchase_order_detail__truck__registration_num")("dir",i.sortDir)("current",i.sort),_.Kb(2),_.sc("name","Driver")("sort","purchase_order_detail__driver__name")("dir",i.sortDir)("current",i.sort),_.Kb(2),_.sc("name","I/C No.")("sort","purchase_order_detail__driver__id_num")("dir",i.sortDir)("current",i.sort),_.Kb(2),_.sc("name","Weight")("sort","purchase_order_detail__weight")("dir",i.sortDir)("current",i.sort),_.Kb(4),_.sc("name","Check In Time")("sort","checkin_date")("dir",i.sortDir)("current",i.sort),_.Kb(2),_.sc("name","Check Out Time")("sort","checkout_date")("dir",i.sortDir)("current",i.sort),_.Kb(3),_.sc("ngForOf",i.list)}}function tc(c,t){if(1&c){var e=_.dc();_.cc(0,"div",32),_.cc(1,"div",33),_.cc(2,"pagination",34),_.kc("ngModelChange",(function(c){return _.Dc(e),_.mc().page=c}))("pageChanged",(function(c){return _.Dc(e),_.mc().pageChanged(c)})),_.bc(),_.bc(),_.bc()}if(2&c){var i=_.mc();_.Kb(2),_.sc("totalItems",i.totalCount)("itemsPerPage",i.pageSize)("maxSize",i.MAX_PAGE_NUMBERS)("ngModel",i.page)}}var ec,ic=((ec=function(){function c(t,e,i,n,r,a,o){_classCallCheck(this,c),this.route=t,this.router=e,this.authService=i,this.deliveryOrderService=n,this.msService=r,this.toastr=a,this.modalService=o,this.isLoading=!1,this.list=[],this.totalCount=0,this.pageSize=x.a.PAGE_SIZE,this.page=1,this.search="",this.do_status="0",this.sort="created_date",this.sortDir="desc",this.sx=0,this.sy=0,this.uiState="mining-company.delivery-order-listing",this.isEmpty=b.a.isEmpty,this.PAGE_SIZE=x.a.PAGE_SIZE,this.MAX_PAGE_NUMBERS=x.a.MAX_PAGE_NUMBERS}return _createClass(c,[{key:"ngOnInit",value:function(){var c=this,t=this.authService.loadUser();this.mining_company_id=t.mining_company_id,this.isLoading=!0,this.subs=this.msService.get().subscribe((function(t){if(t.name===c.uiState){var e=t.data;c.page=e.page,c.sort=e.sort,c.sortDir=e.dir,c.search=e.search,c.do_status=e.do_status,c.sx=e.sx,c.sy=e.sy}})),this.load()}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}},{key:"load",value:function(){var c=this;""===this.search?(this.isLoading=!0,this.deliveryOrderService.list(this.do_status,this.page,x.a.PAGE_SIZE,this.sort,this.sortDir).subscribe((function(t){c.list=t.body,c.totalCount=Number(t.headers.get(x.a.HTTP_HEADER.X_TOTAL_COUNT)),c.isLoading=!1,setTimeout((function(){window.scrollTo(c.sx,c.sy)}),200)}),(function(c){}),(function(){c.isLoading=!1}))):this.onSearch(this.search)}},{key:"onSearch",value:function(c){var t=this;this.search=c,this.isLoading=!0,this.deliveryOrderService.search(this.do_status,this.page,x.a.PAGE_SIZE,this.sort,this.sortDir,c).subscribe((function(c){t.list=c.body,t.totalCount=Number(c.headers.get(x.a.HTTP_HEADER.X_TOTAL_COUNT)),t.isLoading=!1,setTimeout((function(){window.scrollTo(t.sx,t.sy)}),200)}),(function(c){}),(function(){t.isLoading=!1}))}},{key:"pageChanged",value:function(c){this.page=c.page,this.load()}},{key:"onSortBy",value:function(c){""===c.sort&&"asc"===c.dir?(this.sort="created_date",this.sortDir="desc"):(this.sort=c.sort,this.sortDir=c.dir),this.load()}},{key:"onDOStatusChange",value:function(){this.load()}},{key:"goto",value:function(c){this.msService.send(this.uiState,{page:this.page,sort:this.sort,dir:this.sortDir,search:this.search,do_status:this.do_status,sx:window.scrollX,sy:window.scrollY}),this.router.navigate(["/ams/mining-company/delivery-order/"+c])}},{key:"onCheckIn",value:function(c){var t=this;this.isLoading=!0,this.deliveryOrderService.updateTime({id:c.id,checkin:1}).subscribe((function(e){t.toastr.success("DO #".concat(c.do_num," successfully checked in")),t.load()}),(function(c){}),(function(){t.isLoading=!1}))}},{key:"onCheckOut",value:function(c){var t=this;this.bsModalRef=this.modalService.show(J,{initialState:{title:"Check Out DO",actual_weight:c.actual_weight}}),this.bsModalRef.content.onClose.subscribe((function(e){!0===e.result&&(t.isLoading=!0,t.deliveryOrderService.updateTime({id:c.id,checkin:0,actual_weight:e.actual_weight}).subscribe((function(e){t.toastr.success("DO #".concat(c.do_num," successfully checked out")),t.load()}),(function(c){}),(function(){t.isLoading=!1})))}))}},{key:"onPermit",value:function(c){this.router.navigate(["/ams/mining-company/permit/"+c.permit.id])}},{key:"getDOStatus",value:function(c){return c.status===x.a.DOStatus.NEW?"NEW":c.status===x.a.DOStatus.IN_PROGRESS?"IN PROGRESS":c.status===x.a.DOStatus.DELIVERING?"DELIVERING":c.status===x.a.DOStatus.DELIVERED?"DELIVERED":"NEW"}}]),c}()).\u0275fac=function(c){return new(c||ec)(_.Wb(d.a),_.Wb(d.g),_.Wb(h.a),_.Wb(G),_.Wb(U.a),_.Wb(g.b),_.Wb(a.b))},ec.\u0275cmp=_.Qb({type:ec,selectors:[["app-delivery-order-listing"]],decls:27,vars:5,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"m-0","text-dark"],[1,"content"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-6","col-12","p-1"],[3,"search","onSearch"],[1,"col-sm-2","col-12","p-1"],["name","do_status",1,"form-control",3,"ngModel","ngModelChange","change"],["value","all"],["value","0"],["value","1"],["value","2"],[1,"card-body"],["class","text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover"],[3,"name","sort","dir","current","onSortBy"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-nowrap"],["class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"card-footer"],[1,"float-right"],[3,"totalItems","itemsPerPage","maxSize","ngModel","ngModelChange","pageChanged"]],template:function(c,t){1&c&&(_.cc(0,"section",0),_.cc(1,"div",1),_.cc(2,"div",2),_.cc(3,"div",3),_.cc(4,"h1",4),_.Lc(5,"Delivery Order Listing"),_.bc(),_.bc(),_.bc(),_.bc(),_.bc(),_.cc(6,"section",5),_.cc(7,"div",1),_.cc(8,"div",6),_.cc(9,"div",7),_.cc(10,"div",8),_.cc(11,"div",9),_.cc(12,"app-search-input",10),_.kc("onSearch",(function(c){return t.onSearch(c)})),_.bc(),_.bc(),_.cc(13,"div",11),_.cc(14,"select",12),_.kc("ngModelChange",(function(c){return t.do_status=c}))("change",(function(){return t.onDOStatusChange()})),_.cc(15,"option",13),_.Lc(16,"ALL"),_.bc(),_.cc(17,"option",14),_.Lc(18,"NEW"),_.bc(),_.cc(19,"option",15),_.Lc(20,"IN PROGRESS"),_.bc(),_.cc(21,"option",16),_.Lc(22,"DELIVERING"),_.bc(),_.bc(),_.bc(),_.bc(),_.bc(),_.cc(23,"div",17),_.Jc(24,H,3,0,"div",18),_.Jc(25,cc,27,37,"div",19),_.bc(),_.Jc(26,tc,3,4,"div",20),_.bc(),_.bc(),_.bc()),2&c&&(_.Kb(12),_.sc("search",t.search),_.Kb(2),_.sc("ngModel",t.do_status),_.Kb(10),_.sc("ngIf",t.isEmpty(t.list)&&!t.isLoading),_.Kb(1),_.sc("ngIf",!t.isEmpty(t.list)&&!t.isLoading),_.Kb(1),_.sc("ngIf",t.totalCount))},directives:[F.a,n.q,n.j,n.l,n.m,n.s,i.m,j.a,i.l,s.a],pipes:[i.e],styles:[""]}),ec),nc=e("cpHE");function rc(c,t){if(1&c&&(_.ac(0),_.Lc(1),_.Zb()),2&c){var e=_.mc(2);_.Kb(1),_.Nc(", ",e.data.purchase_order.issue_to.addr_line_2,"")}}function ac(c,t){if(1&c&&(_.ac(0),_.Lc(1,","),_.Xb(2,"br"),_.Lc(3),_.Zb()),2&c){var e=_.mc(2);_.Kb(3),_.Mc(e.data.purchase_order.issue_to.addr_line_3)}}function oc(c,t){if(1&c&&(_.ac(0),_.Lc(1),_.Zb()),2&c){var e=_.mc(2);_.Kb(1),_.Nc(", ",e.data.purchase_order_detail.recv_addr_line_2,"")}}function sc(c,t){if(1&c&&(_.ac(0),_.Lc(1,","),_.Xb(2,"br"),_.Lc(3),_.Zb()),2&c){var e=_.mc(2);_.Kb(3),_.Mc(e.data.purchase_order_detail.recv_addr_line_3)}}var dc=function(c){return["/permit",c,"print"]};function lc(c,t){if(1&c&&(_.cc(0,"div",1),_.cc(1,"div",7),_.cc(2,"div",8),_.cc(3,"div",9),_.cc(4,"div",7),_.cc(5,"div",8),_.cc(6,"h4"),_.cc(7,"small",10),_.Lc(8),_.nc(9,"date"),_.bc(),_.bc(),_.bc(),_.bc(),_.cc(10,"div",11),_.cc(11,"div",12),_.Lc(12," Mining License Holder "),_.cc(13,"address"),_.cc(14,"strong"),_.Lc(15),_.bc(),_.Xb(16,"br"),_.Lc(17),_.Xb(18,"br"),_.Lc(19),_.Xb(20,"br"),_.Lc(21),_.nc(22,"date"),_.Xb(23,"br"),_.Lc(24),_.Jc(25,rc,2,1,"ng-container",13),_.Jc(26,ac,4,1,"ng-container",13),_.Xb(27,"br"),_.Lc(28),_.Xb(29,"br"),_.Lc(30),_.Xb(31,"br"),_.Lc(32),_.Xb(33,"br"),_.Lc(34),_.Xb(35,"br"),_.Lc(36),_.bc(),_.bc(),_.cc(37,"div",12),_.Lc(38," Driver & Truck Details "),_.cc(39,"address"),_.cc(40,"strong"),_.Lc(41),_.bc(),_.Xb(42,"br"),_.Lc(43),_.Xb(44,"br"),_.Lc(45),_.Xb(46,"br"),_.Lc(47),_.Xb(48,"br"),_.Lc(49),_.nc(50,"number"),_.bc(),_.bc(),_.cc(51,"div",12),_.Lc(52," Destination "),_.cc(53,"address"),_.cc(54,"strong"),_.Lc(55),_.bc(),_.Xb(56,"br"),_.Lc(57),_.Jc(58,oc,2,1,"ng-container",13),_.Jc(59,sc,4,1,"ng-container",13),_.Xb(60,"br"),_.Lc(61),_.Xb(62,"br"),_.Lc(63),_.bc(),_.bc(),_.bc(),_.cc(64,"div",14),_.cc(65,"div",8),_.cc(66,"a",15),_.Xb(67,"i",16),_.Lc(68," Print"),_.bc(),_.bc(),_.bc(),_.bc(),_.bc(),_.bc(),_.bc()),2&c){var e=_.mc();_.Kb(8),_.Nc("Date: ",_.pc(9,31,e.data.created_date,"d MMM yyyy"),""),_.Kb(7),_.Mc(e.data.purchase_order.issue_to.name),_.Kb(2),_.Nc("",e.data.purchase_order.issue_to.registration_num," "),_.Kb(2),_.Nc("Mineral License No. ",e.data.purchase_order.issue_to.mining_license_num," "),_.Kb(2),_.Nc("License Expiry: ",_.pc(22,34,e.data.purchase_order.issue_to.mining_license_expiry_date,"d MMM yyyy")," "),_.Kb(3),_.Mc(e.data.purchase_order.issue_to.addr_line_1),_.Kb(1),_.sc("ngIf",e.data.purchase_order.issue_to.addr_line_2),_.Kb(1),_.sc("ngIf",e.data.purchase_order.issue_to.addr_line_3),_.Kb(2),_.Oc("",e.data.purchase_order.issue_to.postcode," ",e.data.purchase_order.issue_to.city," "),_.Kb(2),_.Oc("",e.data.purchase_order.issue_to.state.name,", ",e.data.purchase_order.issue_to.country.name," "),_.Kb(2),_.Nc("Phone: ",e.data.purchase_order.issue_to.contact_no," "),_.Kb(2),_.Nc("Email: ",e.data.purchase_order.issue_to.email," "),_.Kb(2),_.Nc("Fax: ",e.data.purchase_order.issue_to.fax_no," "),_.Kb(5),_.Mc(e.data.purchase_order_detail.driver.name),_.Kb(2),_.Nc("I/C No.: ",e.data.purchase_order_detail.driver.id_num," "),_.Kb(2),_.Nc("Truck Reg. No.: ",e.data.purchase_order_detail.truck.registration_num," "),_.Kb(2),_.Pc("Material: ",e.data.purchase_order_detail.material.name," ",e.data.purchase_order_detail.material.material_type," ",e.data.purchase_order_detail.material.grade," "),_.Kb(2),_.Nc("Weight: ",_.oc(50,37,e.data.delivery_order.actual_weight)," kg "),_.Kb(6),_.Mc(e.data.purchase_order_detail.recv_name),_.Kb(2),_.Mc(e.data.purchase_order_detail.recv_addr_line_1),_.Kb(1),_.sc("ngIf",e.data.purchase_order_detail.recv_addr_line_2),_.Kb(1),_.sc("ngIf",e.data.purchase_order_detail.recv_addr_line_3),_.Kb(2),_.Oc("",e.data.purchase_order_detail.recv_postcode," ",e.data.purchase_order_detail.recv_city," "),_.Kb(2),_.Oc("",e.data.purchase_order_detail.recv_state.name,", ",e.data.purchase_order_detail.recv_country.name," "),_.Kb(3),_.sc("routerLink",_.vc(39,dc,e.id))}}var uc,bc,mc,_c=[{path:"company-details",component:O},{path:"delivery-order",children:[{path:"list",component:ic}]},{path:"permit/:id",component:(uc=function(){function c(t,e,i){_classCallCheck(this,c),this.route=t,this.router=e,this.permitService=i,this.isLoading=!1,this.data={id:""}}return _createClass(c,[{key:"ngOnInit",value:function(){var c=this;this.route.paramMap.subscribe((function(t){c.id=t.get("id"),c.load()}))}},{key:"load",value:function(){var c=this;u.a.isNull(this.id)||u.a.isUndefined(this.id)?this.isLoading=!1:(this.isLoading=!0,this.permitService.detail(this.id).subscribe((function(t){c.data=t}),(function(c){}),(function(){c.isLoading=!1})))}}]),c}(),uc.\u0275fac=function(c){return new(c||uc)(_.Wb(d.a),_.Wb(d.g),_.Wb(nc.a))},uc.\u0275cmp=_.Qb({type:uc,selectors:[["app-permit-detail"]],decls:9,vars:1,consts:[[1,"content-header"],[1,"container-fluid"],[1,"row","mb-2"],[1,"col-sm-10"],[1,"col-sm-2"],[1,"content"],["class","container-fluid",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"invoice","p-3","mb-3"],[1,"float-right"],[1,"row","invoice-info"],[1,"col-sm-4","invoice-col"],[4,"ngIf"],[1,"row","no-print"],["target","_blank",1,"btn","btn-default",3,"routerLink"],[1,"fas","fa-print"]],template:function(c,t){1&c&&(_.cc(0,"section",0),_.cc(1,"div",1),_.cc(2,"div",2),_.cc(3,"div",3),_.cc(4,"h1"),_.Lc(5,"Permit"),_.bc(),_.bc(),_.Xb(6,"div",4),_.bc(),_.bc(),_.bc(),_.cc(7,"section",5),_.Jc(8,lc,69,41,"div",6),_.bc()),2&c&&(_.Kb(8),_.sc("ngIf",!t.isLoading))},directives:[i.m,d.h],pipes:[i.e,i.f],styles:[""]}),uc)}],fc=((bc=function c(){_classCallCheck(this,c)}).\u0275mod=_.Ub({type:bc}),bc.\u0275inj=_.Tb({factory:function(c){return new(c||bc)},imports:[[d.i.forChild(_c)],d.i]}),bc),hc=e("jgPy"),pc=e("mrcu"),gc=e("Thox"),vc=((mc=function c(){_classCallCheck(this,c)}).\u0275mod=_.Ub({type:mc}),mc.\u0275inj=_.Tb({factory:function(c){return new(c||mc)},providers:[pc.a,gc.a,G,nc.a],imports:[[i.c,fc,n.g,n.o,hc.a,r.b,a.c.forRoot(),o.c.forRoot(),s.b.forRoot()]]}),mc)}}]);