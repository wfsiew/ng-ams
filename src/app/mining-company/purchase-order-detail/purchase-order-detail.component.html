<section class="content-header">
  <div class="container-fluid">
    <div class="row mb-2">
      <div class="col-sm-10">
        <h1>Purchase Order</h1>
      </div>
      <div class="col-sm-2"></div>
    </div>
  </div>
</section>
<section class="content">
  <div class="container-fluid" *ngIf="!isLoading">
    <div class="row">
      <div class="col-12">
        <div class="invoice p-3 mb-3">
          <div class="row">
            <div class="col-12">
              <h4>
                <small class="float-right">Date: {{ data.issued_date | date:'d MMM yyyy' }}</small>
              </h4>
            </div>
          </div>
          <div class="row invoice-info">
            <div class="col-sm-6 invoice-col">
              From
              <address>
                <strong>{{ data.buyer.name }}</strong>
                <br>{{ data.buyer.registration_num }}
                <br><span class="text-uppercase">{{ data.buyer.addr_line_1 }}</span><ng-container *ngIf="data.buyer.addr_line_2">, <span class="text-uppercase">{{ data.buyer.addr_line_2 }}</span></ng-container>
                <ng-container *ngIf="data.buyer.addr_line_3">,<br><span class="text-uppercase">{{ data.buyer.addr_line_3 }}</span></ng-container>
                <br>{{ data.buyer.postcode }} <span class="text-uppercase">{{ data.buyer.city }}</span>
                <br><span class="text-uppercase">{{ data.buyer.state.name }}, {{ data.buyer.country.name }}</span>
                <br>Phone: {{ data.buyer.contact_no }}
                <br>Email: {{ data.buyer.email }}
              </address>
            </div>
            <div class="col-sm-6 invoice-col">
              To
              <address>
                <strong>{{ data.issue_to.name }}</strong>
                <br>{{ data.issue_to.registration_num }}
                <br><span class="text-uppercase">{{ data.issue_to.addr_line_1 }}</span><ng-container *ngIf="data.issue_to.addr_line_2">, <span class="text-uppercase">{{ data.issue_to.addr_line_2 }}</span></ng-container>
                <ng-container *ngIf="data.issue_to.addr_line_3">,<br><span class="text-uppercase">{{ data.issue_to.addr_line_3 }}</span></ng-container>
                <br>{{ data.issue_to.postcode }} <span class="text-uppercase">{{ data.issue_to.city }}</span>
                <br><span class="text-uppercase">{{ data.issue_to.state.name }}, {{ data.issue_to.country.name }}</span>
                <br>Phone: {{ data.issue_to.contact_no }}
                <br>Email: {{ data.issue_to.email }}
              </address>
            </div>
            <div class="col-sm-4 invoice-col">
              <b>Purchase Order #{{ data.po_num }}</b><br>
            </div>
          </div>

          <div class="row">
            <div class="col-12 table-responsive">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Material</th>
                    <th>Truck</th>
                    <th>Driver</th>
                    <th>I/C No.</th>
                    <th>Weight (kg)</th>
                    <th>DO No.</th>
                  </tr>
                </thead>
                <tbody>
                  <ng-container *ngFor="let o of data.details; let i = index">
                    <tr>
                      <td>{{ i + 1 }}</td>
                      <td>{{ o.material.name }} {{ o.material.material_type }} {{ o.material.grade }}</td>
                      <td>{{ o.truck.registration_num }}</td>
                      <td>{{ o.driver.name }}</td>
                      <td>{{ o.driver.id_num }}</td>
                      <td>{{ o.weight }}</td>
                      <td>{{ o.do_num }}</td>
                    </tr>
                    <tr>
                      <td colspan="7">
                        Destination:
                        {{ o.recv_name }}<br>
                        <span class="text-uppercase">{{ o.recv_addr_line_1 }}</span><ng-container *ngIf="o.recv_addr_line_2">, <span class="text-uppercase">{{ o.recv_addr_line_2 }}</span></ng-container>
                        <ng-container *ngIf="o.recv_addr_line_3">, <span class="text-uppercase">{{ o.recv_addr_line_3 }}</span></ng-container>
                        {{ o.recv_postcode }} <span class="text-uppercase">{{ o.recv_city }}</span>
                        <span class="text-uppercase">{{ o.recv_state.name }}, {{ o.recv_country.name }}</span>
                      </td>
                    </tr>
                  </ng-container>
                </tbody>
              </table>
            </div>
          </div>

          <div class="row no-print">
            <div class="col-12">
              <button type="button" class="btn btn-outline-dark mr-2" (click)="onBack()"><i class="fas fa-chevron-circle-left"></i> Back</button>
              <a [routerLink]="['/purchase-order', id, 'print']" target="_blank" class="btn btn-default"><i class="fas fa-print"></i> Print</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
